<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Uniswap v3: The Universal AMM - Paradigm</title><meta name="description" content="Paradigm is a research-driven crypto investment firm that funds companies and protocols from their earliest stages."/><meta property="og:url" content="https://www.paradigm.xyz/2021/06/uniswap-v3-the-universal-amm"/><meta property="og:title" content="Uniswap v3: The Universal AMM"/><meta property="og:site_name" content="Paradigm"/><meta property="og:description" content="Uniswap v3 allows liquidity providers to provide custom amounts of liquidity in selected price ranges. This unlocks tremendous capital efficiency gains for liquidity providers who can manually adjust their exposure."/><meta property="og:image" content="https://cdn.sanity.io/images/dgybcd83/production/b0682e41b7920026096735694ef3de5f45072d4c-2400x1350.png?auto=format&amp;q=75&amp;w=1200&amp;format=png"/><meta name="twitter:site" content="@paradigm"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Uniswap v3: The Universal AMM - Paradigm"/><meta name="twitter:description" content="Paradigm is a research-driven crypto investment firm that funds companies and protocols from their earliest stages."/><meta name="twitter:url" content="https://www.paradigm.xyz/2021/06/uniswap-v3-the-universal-amm"/><meta name="twitter:image" content="https://cdn.sanity.io/images/dgybcd83/production/fd732ebeb1c4d286fd7e3b5b25395d72452edeb6-2400x1260.png?auto=format&amp;q=75&amp;w=1200&amp;format=png"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2021-06-07"/><meta property="article:modified_time" content="2021-06-07"/><meta property="article:author" content="https://paradigm-vc.vercel.app/team/dan-robinson"/><meta name="next-head-count" content="19"/><link rel="apple-touch-icon" sizes="180x180" href="../../favicon/apple-touch-icon.png"/><link rel="mask-icon" href="../../favicon/safari-pinned-tab.svg" color="#00d700"/><meta name="msapplication-TileColor" content="#00d700"/><link rel="icon" href="../../favicon/favicon.ico" sizes="any"/><link rel="icon" href="../../favicon/favicon.svg" type="image/svg+xml"/><link rel="manifest" href="../../favicon/site.webmanifest" crossorigin="use-credentials"/><meta name="theme-color" content="#00E100"/><link rel="preload" href="../../_next/static/css/36d742fa6f75af33.css" as="style"/><link rel="stylesheet" href="../../_next/static/css/36d742fa6f75af33.css" data-n-g=""/><link rel="preload" href="../../_next/static/css/5b6964bdff897f88.css" as="style"/><link rel="stylesheet" href="../../_next/static/css/5b6964bdff897f88.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="../../_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script defer="" src="../../_next/static/chunks/2334.fdd0fc2ee869ba74.js"></script><script defer="" src="../../_next/static/chunks/7333.de3f3254649aaade.js"></script><script src="../../_next/static/chunks/webpack-54ad8f2f0d9b23ef.js" defer=""></script><script src="../../_next/static/chunks/framework-cfbe8447b8b751ea.js" defer=""></script><script src="../../_next/static/chunks/main-9a281b117d523626.js" defer=""></script><script src="../../_next/static/chunks/pages/_app-64c08ce1425afd18.js" defer=""></script><script src="../../_next/static/chunks/175675d1-ea6ec12d1ec73e3b.js" defer=""></script><script src="../../_next/static/chunks/3114-9ad26c08e3a6fd59.js" defer=""></script><script src="../../_next/static/chunks/8294-352a030481cb472f.js" defer=""></script><script src="../../_next/static/chunks/1358-b6def54e6ad0bd04.js" defer=""></script><script src="../../_next/static/chunks/7213-de9885b5038b802a.js" defer=""></script><script src="../../_next/static/chunks/pages/[slug]/[postMonth]/[postSlug]-79dba873a1ad12ef.js" defer=""></script><script src="../../_next/static/l8SbaQQM0om_yyzCyQlj0/_buildManifest.js" defer=""></script><script src="../../_next/static/l8SbaQQM0om_yyzCyQlj0/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header><div class="lg:hidden fixed z-50 top-0 left-0 right-0 bg-white"><div class="px-container-mobile h-header-mobile flex justify-between items-center"><a class="block" href="../../index.html"><svg width="140" height="32" viewBox="0 0 140 32" class="block text-black"><path d="M28 9.84634L10.7692 0L8.61538 1.23168V3.69267L6.46154 2.46099L4.30769 3.69267V6.15367L2.15385 4.92198L0 6.15367V25.8463L2.15385 27.078L4.30769 25.8463V28.3073L6.46154 29.539L8.61538 28.3073V30.7683L10.7692 32L28 22.1537V19.6927L25.8462 18.461L28 17.2293V14.7683L25.8462 13.5366L28 12.305V9.84634ZM4.30769 23.3853L2.15385 24.617V7.38534L4.30769 8.61702V23.3853ZM10.7692 24.6147V22.1537L19.3846 17.2317L21.5385 18.4634L10.7692 24.6147ZM17.2308 16L10.7692 19.6927V12.3073L17.2308 16ZM19.3846 14.7683L10.7692 9.84634V7.38534L21.5385 13.539L19.3846 14.7683ZM6.46154 4.92198L8.61538 6.15367V8.61466L6.46154 7.38298V4.92198ZM6.46154 9.84634L8.61538 11.078V20.9244L6.46154 22.156V9.84634ZM6.46154 24.6147L8.61538 23.383V25.844L6.46154 27.0756V24.6147ZM25.8462 20.922L10.7692 29.5366V27.0756L23.6923 19.6903L25.8462 20.922ZM25.8462 16L23.6923 17.2317L21.5385 16L23.6923 14.7683L25.8462 16ZM23.6923 12.3073L10.7692 4.92198V2.46099L25.8462 11.0756L23.6923 12.3073Z" fill="#00E100"></path><g opacity="0"><path d="M38.9292 22.7264C38.9319 22.9865 39.6678 23.2626 40.7096 23.3938L41.4433 23.4572L41.4562 24.7103L33.9608 24.7879L33.9478 23.5348L34.5146 23.4581C35.5297 23.2821 36.118 23.0159 36.1154 22.7557L35.9733 9.04186C35.9706 8.78174 35.3768 8.52773 34.3584 8.37269L33.7903 8.30766L33.7773 7.05454L40.0195 6.98989C44.5119 6.94336 47.9329 8.46861 47.9691 11.968C48.0035 15.2783 45.0968 17.7441 40.3019 18.2666L40.005 16.9927C42.8857 16.5844 45.0725 15.4032 45.0474 12.9677C45.0201 10.3432 43.2509 8.46975 39.4441 8.50923L38.7822 8.51609L38.9294 22.7266L38.9292 22.7264Z" fill="currentColor"></path><path d="M48.7148 21.209C48.7148 18.5134 50.8902 17.9695 52.9475 17.6384C54.0353 17.4492 54.7445 17.1418 55.2884 16.5506L55.312 15.4156C55.3357 13.5713 54.5319 12.8382 53.3732 12.8382C52.309 12.8382 51.9307 13.3112 51.9307 13.9023C51.9307 14.3043 52.0253 14.6118 52.0253 14.8246C52.0253 15.132 51.5523 15.3685 50.6776 15.3685C49.9445 15.3685 49.2116 15.132 49.2116 14.8482C49.2116 13.7841 51.789 11.0885 54.3427 11.0885C56.5181 11.0885 57.866 11.9633 57.8187 14.5172L57.7004 19.9556C57.6531 22.0839 58.2443 22.6276 59.2848 22.6276C59.5449 22.6276 59.7104 22.604 59.9469 22.533L60.0179 22.5803C59.7341 23.739 58.8118 24.5192 57.677 24.5192C56.471 24.5192 55.7854 23.7625 55.407 22.6512C54.6976 23.8809 53.681 24.6376 52.2621 24.6376C50.3232 24.6376 48.7152 23.408 48.7152 21.209H48.7148ZM53.0656 22.8406C53.9169 22.8406 54.6263 22.3913 55.1938 21.8238L55.2648 17.8039C54.91 18.3005 54.3662 18.5607 53.5385 18.8208C52.2617 19.2228 51.1976 19.6011 51.1976 20.9961C51.1976 22.2021 51.9543 22.8406 53.0656 22.8406Z" fill="currentColor"></path><path d="M62.7621 14.5644C62.7621 14.328 62.5729 14.1388 60.9414 13.3821V12.531L64.2518 11.1121H64.843L65.2214 13.5476C66.1907 11.9632 67.042 11.1358 68.4609 11.1358C69.2176 11.1358 69.9031 11.4195 69.9031 11.7033C69.9031 12.862 69.1228 14.4225 68.7681 14.4225C68.6971 14.4225 68.6498 14.3989 68.4843 14.3043C67.9168 13.9732 67.3729 13.7604 66.8054 13.7604C66.3088 13.7604 65.7885 14.0442 65.3156 14.4698V22.2492C65.3156 22.5093 65.9304 22.7695 67.0891 22.935L67.8222 23.0296V24.1646H60.9885V23.0296L61.4142 22.935C62.431 22.7222 62.7619 22.5093 62.7619 22.2492V14.5642L62.7621 14.5644Z" fill="currentColor"></path><path d="M70.3496 21.209C70.3496 18.5134 72.525 17.9695 74.5823 17.6384C75.6701 17.4492 76.3793 17.1418 76.9232 16.5506L76.9468 15.4156C76.9705 13.5713 76.1666 12.8382 75.0079 12.8382C73.9438 12.8382 73.5654 13.3112 73.5654 13.9023C73.5654 14.3043 73.66 14.6118 73.66 14.8246C73.66 15.132 73.1871 15.3685 72.3123 15.3685C71.5793 15.3685 70.8464 15.132 70.8464 14.8482C70.8464 13.7841 73.4238 11.0885 75.9775 11.0885C78.1528 11.0885 79.5007 11.9633 79.4534 14.5172L79.3352 19.9556C79.2879 22.0839 79.8791 22.6276 80.9196 22.6276C81.1797 22.6276 81.3452 22.604 81.5817 22.533L81.6526 22.5803C81.3688 23.739 80.4466 24.5192 79.3117 24.5192C78.1057 24.5192 77.4201 23.7625 77.0418 22.6512C76.3324 23.8809 75.3157 24.6376 73.8969 24.6376C71.958 24.6376 70.35 23.408 70.35 21.209H70.3496ZM74.7003 22.8406C75.5516 22.8406 76.261 22.3913 76.8286 21.8238L76.8995 17.8039C76.5448 18.3005 76.0009 18.5607 75.1733 18.8208C73.8965 19.2228 72.8324 19.6011 72.8324 20.9961C72.8324 22.2021 73.5891 22.8406 74.7003 22.8406Z" fill="currentColor"></path><path d="M92.5238 24.8032H91.909L91.5779 22.9116C90.2065 23.8575 88.7404 24.6378 87.3691 24.6378C84.4132 24.6378 82.0723 22.1076 82.0723 18.3007C82.0723 13.9262 84.957 11.136 88.4566 11.136C89.6861 11.136 90.5847 11.3725 91.2941 11.8218V7.80802C91.2941 7.57155 91.0815 7.38237 89.4262 6.48397V5.65631L93.2568 4.35571H93.8244V19.9086C93.8244 21.9659 94.4156 22.5096 95.2903 22.5096C95.5031 22.5096 95.7158 22.4859 95.9524 22.4386L96.0234 22.4859V23.7629L92.5238 24.8032ZM88.953 22.6041C89.828 22.6041 90.5847 22.3913 91.2939 22.013V16.1488C91.2939 14.0444 89.9699 12.6729 88.1256 12.6729C86.2338 12.6729 84.744 14.0444 84.744 17.0238C84.744 20.618 86.3757 22.6041 88.953 22.6041Z" fill="currentColor"></path><path d="M96.944 24.1647V23.0296L97.3694 22.935C98.3863 22.6986 98.7171 22.4857 98.7171 22.2256V14.5643C98.7171 14.3278 98.5281 14.1386 96.8965 13.3819V12.5308L100.704 11.112H101.271V22.2256C101.271 22.4857 101.626 22.6986 102.619 22.935L103.044 23.0296V24.1647H96.9438H96.944ZM101.791 6.73762C101.791 7.84904 101.035 8.53462 99.9233 8.53462C98.8119 8.53462 98.0552 7.84885 98.0552 6.73762C98.0552 5.64984 98.8119 4.96426 99.9233 4.96426C101.058 4.96426 101.791 5.65003 101.791 6.73762Z" fill="currentColor"></path><path d="M108.193 19.8611C107.649 20.2867 107.223 20.7833 107.223 21.2799C107.223 21.7527 107.649 21.9657 108.997 22.0603L112.828 22.344C115.145 22.5332 116.469 23.6917 116.469 25.5599C116.469 28.3737 113.513 31.0222 109.21 31.0222C105.687 31.0222 103.984 29.7216 103.984 27.7591C103.984 26.5059 104.859 25.7019 106.94 24.1885C105.923 23.9757 104.576 23.2426 104.576 22.2969C104.576 21.3276 105.521 20.4526 107.129 19.6013C105.498 18.9865 104.363 17.6386 104.363 15.7707C104.363 12.9805 106.538 11.136 109.565 11.136C110.723 11.136 111.74 11.4907 112.497 12.0819L116.398 12.1765V13.4059L113.774 13.9971C114.057 14.4464 114.247 14.9665 114.247 15.6288C114.247 18.1352 112.095 19.9322 109.092 19.9322C108.784 19.9322 108.501 19.9085 108.193 19.8613L108.193 19.8611ZM109.943 29.5324C112.142 29.5324 113.939 28.2318 113.939 26.3875C113.939 25.2524 113.324 24.7559 111.432 24.614L108.311 24.4011C107.294 25.0869 106.419 26.0801 106.419 27.026C106.419 28.4446 107.696 29.5326 109.943 29.5326V29.5324ZM111.858 16.1723C111.858 14.3516 110.889 12.7436 109.044 12.7436C107.768 12.7436 106.869 13.6186 106.869 15.0372C106.869 16.8342 107.791 18.4659 109.659 18.4659C110.983 18.4659 111.858 17.5909 111.858 16.1723Z" fill="currentColor"></path><path d="M119.59 14.5654C119.59 14.3289 119.401 14.1397 117.77 13.383V12.5319L121.08 11.1131H121.671L121.955 12.9576C123.468 12.0117 125.076 11.1131 126.613 11.1131C127.984 11.1131 128.978 11.586 129.474 13.052C131.059 12.0826 132.737 11.1131 134.345 11.1131C136.355 11.1131 137.561 12.1772 137.561 16.0788V22.2504C137.561 22.5105 137.916 22.7233 138.932 22.9361L139.334 23.0307V24.1658H133.257V23.0307L133.659 22.9361C134.676 22.6997 135.007 22.5105 135.007 22.2504V16.4335C135.007 14.1872 134.132 13.2177 132.288 13.2177C131.389 13.2177 130.467 13.5014 129.71 13.9034C129.828 14.4946 129.876 15.2277 129.876 16.0788V22.2504C129.876 22.5105 130.207 22.7233 131.2 22.9361L131.625 23.0307V24.1658H125.572V23.0307L125.974 22.9361C126.991 22.6997 127.322 22.5105 127.322 22.2504V16.4335C127.322 14.1872 126.447 13.2177 124.579 13.2177C123.751 13.2177 122.876 13.4778 122.143 13.8325V22.2505C122.143 22.5107 122.474 22.6998 123.491 22.9363L123.893 23.0309V24.166H117.816V23.0309L118.242 22.9363C119.258 22.7235 119.589 22.5107 119.589 22.2505V14.5656L119.59 14.5654Z" fill="currentColor"></path></g></svg></a><button class="p-1 bg-black flex flex-col items-center text-center border border-solid border-transparent" aria-label="Mobile Menu"><div class="tag text-gray-dark"></div></button></div></div><div class="hidden lg:block fixed md:top-2 md:left-2 top-[16px] left-[16px] z-50 pointer-events-none w-full"><div class="grid grid-cols-12 items-center"><a class="col-start-1 block pointer-events-auto" href="../../index.html"><svg width="140" height="32" viewBox="0 0 140 32" class="block text-black"><path d="M28 9.84634L10.7692 0L8.61538 1.23168V3.69267L6.46154 2.46099L4.30769 3.69267V6.15367L2.15385 4.92198L0 6.15367V25.8463L2.15385 27.078L4.30769 25.8463V28.3073L6.46154 29.539L8.61538 28.3073V30.7683L10.7692 32L28 22.1537V19.6927L25.8462 18.461L28 17.2293V14.7683L25.8462 13.5366L28 12.305V9.84634ZM4.30769 23.3853L2.15385 24.617V7.38534L4.30769 8.61702V23.3853ZM10.7692 24.6147V22.1537L19.3846 17.2317L21.5385 18.4634L10.7692 24.6147ZM17.2308 16L10.7692 19.6927V12.3073L17.2308 16ZM19.3846 14.7683L10.7692 9.84634V7.38534L21.5385 13.539L19.3846 14.7683ZM6.46154 4.92198L8.61538 6.15367V8.61466L6.46154 7.38298V4.92198ZM6.46154 9.84634L8.61538 11.078V20.9244L6.46154 22.156V9.84634ZM6.46154 24.6147L8.61538 23.383V25.844L6.46154 27.0756V24.6147ZM25.8462 20.922L10.7692 29.5366V27.0756L23.6923 19.6903L25.8462 20.922ZM25.8462 16L23.6923 17.2317L21.5385 16L23.6923 14.7683L25.8462 16ZM23.6923 12.3073L10.7692 4.92198V2.46099L25.8462 11.0756L23.6923 12.3073Z" fill="#00E100"></path><g opacity="0"><path d="M38.9292 22.7264C38.9319 22.9865 39.6678 23.2626 40.7096 23.3938L41.4433 23.4572L41.4562 24.7103L33.9608 24.7879L33.9478 23.5348L34.5146 23.4581C35.5297 23.2821 36.118 23.0159 36.1154 22.7557L35.9733 9.04186C35.9706 8.78174 35.3768 8.52773 34.3584 8.37269L33.7903 8.30766L33.7773 7.05454L40.0195 6.98989C44.5119 6.94336 47.9329 8.46861 47.9691 11.968C48.0035 15.2783 45.0968 17.7441 40.3019 18.2666L40.005 16.9927C42.8857 16.5844 45.0725 15.4032 45.0474 12.9677C45.0201 10.3432 43.2509 8.46975 39.4441 8.50923L38.7822 8.51609L38.9294 22.7266L38.9292 22.7264Z" fill="currentColor"></path><path d="M48.7148 21.209C48.7148 18.5134 50.8902 17.9695 52.9475 17.6384C54.0353 17.4492 54.7445 17.1418 55.2884 16.5506L55.312 15.4156C55.3357 13.5713 54.5319 12.8382 53.3732 12.8382C52.309 12.8382 51.9307 13.3112 51.9307 13.9023C51.9307 14.3043 52.0253 14.6118 52.0253 14.8246C52.0253 15.132 51.5523 15.3685 50.6776 15.3685C49.9445 15.3685 49.2116 15.132 49.2116 14.8482C49.2116 13.7841 51.789 11.0885 54.3427 11.0885C56.5181 11.0885 57.866 11.9633 57.8187 14.5172L57.7004 19.9556C57.6531 22.0839 58.2443 22.6276 59.2848 22.6276C59.5449 22.6276 59.7104 22.604 59.9469 22.533L60.0179 22.5803C59.7341 23.739 58.8118 24.5192 57.677 24.5192C56.471 24.5192 55.7854 23.7625 55.407 22.6512C54.6976 23.8809 53.681 24.6376 52.2621 24.6376C50.3232 24.6376 48.7152 23.408 48.7152 21.209H48.7148ZM53.0656 22.8406C53.9169 22.8406 54.6263 22.3913 55.1938 21.8238L55.2648 17.8039C54.91 18.3005 54.3662 18.5607 53.5385 18.8208C52.2617 19.2228 51.1976 19.6011 51.1976 20.9961C51.1976 22.2021 51.9543 22.8406 53.0656 22.8406Z" fill="currentColor"></path><path d="M62.7621 14.5644C62.7621 14.328 62.5729 14.1388 60.9414 13.3821V12.531L64.2518 11.1121H64.843L65.2214 13.5476C66.1907 11.9632 67.042 11.1358 68.4609 11.1358C69.2176 11.1358 69.9031 11.4195 69.9031 11.7033C69.9031 12.862 69.1228 14.4225 68.7681 14.4225C68.6971 14.4225 68.6498 14.3989 68.4843 14.3043C67.9168 13.9732 67.3729 13.7604 66.8054 13.7604C66.3088 13.7604 65.7885 14.0442 65.3156 14.4698V22.2492C65.3156 22.5093 65.9304 22.7695 67.0891 22.935L67.8222 23.0296V24.1646H60.9885V23.0296L61.4142 22.935C62.431 22.7222 62.7619 22.5093 62.7619 22.2492V14.5642L62.7621 14.5644Z" fill="currentColor"></path><path d="M70.3496 21.209C70.3496 18.5134 72.525 17.9695 74.5823 17.6384C75.6701 17.4492 76.3793 17.1418 76.9232 16.5506L76.9468 15.4156C76.9705 13.5713 76.1666 12.8382 75.0079 12.8382C73.9438 12.8382 73.5654 13.3112 73.5654 13.9023C73.5654 14.3043 73.66 14.6118 73.66 14.8246C73.66 15.132 73.1871 15.3685 72.3123 15.3685C71.5793 15.3685 70.8464 15.132 70.8464 14.8482C70.8464 13.7841 73.4238 11.0885 75.9775 11.0885C78.1528 11.0885 79.5007 11.9633 79.4534 14.5172L79.3352 19.9556C79.2879 22.0839 79.8791 22.6276 80.9196 22.6276C81.1797 22.6276 81.3452 22.604 81.5817 22.533L81.6526 22.5803C81.3688 23.739 80.4466 24.5192 79.3117 24.5192C78.1057 24.5192 77.4201 23.7625 77.0418 22.6512C76.3324 23.8809 75.3157 24.6376 73.8969 24.6376C71.958 24.6376 70.35 23.408 70.35 21.209H70.3496ZM74.7003 22.8406C75.5516 22.8406 76.261 22.3913 76.8286 21.8238L76.8995 17.8039C76.5448 18.3005 76.0009 18.5607 75.1733 18.8208C73.8965 19.2228 72.8324 19.6011 72.8324 20.9961C72.8324 22.2021 73.5891 22.8406 74.7003 22.8406Z" fill="currentColor"></path><path d="M92.5238 24.8032H91.909L91.5779 22.9116C90.2065 23.8575 88.7404 24.6378 87.3691 24.6378C84.4132 24.6378 82.0723 22.1076 82.0723 18.3007C82.0723 13.9262 84.957 11.136 88.4566 11.136C89.6861 11.136 90.5847 11.3725 91.2941 11.8218V7.80802C91.2941 7.57155 91.0815 7.38237 89.4262 6.48397V5.65631L93.2568 4.35571H93.8244V19.9086C93.8244 21.9659 94.4156 22.5096 95.2903 22.5096C95.5031 22.5096 95.7158 22.4859 95.9524 22.4386L96.0234 22.4859V23.7629L92.5238 24.8032ZM88.953 22.6041C89.828 22.6041 90.5847 22.3913 91.2939 22.013V16.1488C91.2939 14.0444 89.9699 12.6729 88.1256 12.6729C86.2338 12.6729 84.744 14.0444 84.744 17.0238C84.744 20.618 86.3757 22.6041 88.953 22.6041Z" fill="currentColor"></path><path d="M96.944 24.1647V23.0296L97.3694 22.935C98.3863 22.6986 98.7171 22.4857 98.7171 22.2256V14.5643C98.7171 14.3278 98.5281 14.1386 96.8965 13.3819V12.5308L100.704 11.112H101.271V22.2256C101.271 22.4857 101.626 22.6986 102.619 22.935L103.044 23.0296V24.1647H96.9438H96.944ZM101.791 6.73762C101.791 7.84904 101.035 8.53462 99.9233 8.53462C98.8119 8.53462 98.0552 7.84885 98.0552 6.73762C98.0552 5.64984 98.8119 4.96426 99.9233 4.96426C101.058 4.96426 101.791 5.65003 101.791 6.73762Z" fill="currentColor"></path><path d="M108.193 19.8611C107.649 20.2867 107.223 20.7833 107.223 21.2799C107.223 21.7527 107.649 21.9657 108.997 22.0603L112.828 22.344C115.145 22.5332 116.469 23.6917 116.469 25.5599C116.469 28.3737 113.513 31.0222 109.21 31.0222C105.687 31.0222 103.984 29.7216 103.984 27.7591C103.984 26.5059 104.859 25.7019 106.94 24.1885C105.923 23.9757 104.576 23.2426 104.576 22.2969C104.576 21.3276 105.521 20.4526 107.129 19.6013C105.498 18.9865 104.363 17.6386 104.363 15.7707C104.363 12.9805 106.538 11.136 109.565 11.136C110.723 11.136 111.74 11.4907 112.497 12.0819L116.398 12.1765V13.4059L113.774 13.9971C114.057 14.4464 114.247 14.9665 114.247 15.6288C114.247 18.1352 112.095 19.9322 109.092 19.9322C108.784 19.9322 108.501 19.9085 108.193 19.8613L108.193 19.8611ZM109.943 29.5324C112.142 29.5324 113.939 28.2318 113.939 26.3875C113.939 25.2524 113.324 24.7559 111.432 24.614L108.311 24.4011C107.294 25.0869 106.419 26.0801 106.419 27.026C106.419 28.4446 107.696 29.5326 109.943 29.5326V29.5324ZM111.858 16.1723C111.858 14.3516 110.889 12.7436 109.044 12.7436C107.768 12.7436 106.869 13.6186 106.869 15.0372C106.869 16.8342 107.791 18.4659 109.659 18.4659C110.983 18.4659 111.858 17.5909 111.858 16.1723Z" fill="currentColor"></path><path d="M119.59 14.5654C119.59 14.3289 119.401 14.1397 117.77 13.383V12.5319L121.08 11.1131H121.671L121.955 12.9576C123.468 12.0117 125.076 11.1131 126.613 11.1131C127.984 11.1131 128.978 11.586 129.474 13.052C131.059 12.0826 132.737 11.1131 134.345 11.1131C136.355 11.1131 137.561 12.1772 137.561 16.0788V22.2504C137.561 22.5105 137.916 22.7233 138.932 22.9361L139.334 23.0307V24.1658H133.257V23.0307L133.659 22.9361C134.676 22.6997 135.007 22.5105 135.007 22.2504V16.4335C135.007 14.1872 134.132 13.2177 132.288 13.2177C131.389 13.2177 130.467 13.5014 129.71 13.9034C129.828 14.4946 129.876 15.2277 129.876 16.0788V22.2504C129.876 22.5105 130.207 22.7233 131.2 22.9361L131.625 23.0307V24.1658H125.572V23.0307L125.974 22.9361C126.991 22.6997 127.322 22.5105 127.322 22.2504V16.4335C127.322 14.1872 126.447 13.2177 124.579 13.2177C123.751 13.2177 122.876 13.4778 122.143 13.8325V22.2505C122.143 22.5107 122.474 22.6998 123.491 22.9363L123.893 23.0309V24.166H117.816V23.0309L118.242 22.9363C119.258 22.7235 119.589 22.5107 119.589 22.2505V14.5656L119.59 14.5654Z" fill="currentColor"></path></g></svg></a><div class="col-span-6 col-start-5 xl:col-span-5 xl:col-start-4"><div class="text-black pointer-events-auto bg-white px-2 w-fit -mx-3 border border-solid border-gray-neutral !border-transparent"><ul class="h-[48px] flex items-center justify-start gap-3 2xl:gap-4 font-mono text-mono-12"><li><a _key="426608038e76" class="flex gap-half items-center hover:underline" href="../../about.html">About</a></li><li><a _key="ff5f78089e91" class="flex gap-half items-center hover:underline" href="../../team.html">Team</a></li><li><a _key="38b3cd4525de" class="flex gap-half items-center hover:underline" href="../../portfolio.html">Portfolio</a></li><li><a _key="22b86a453ca1" class="flex gap-half items-center hover:underline" href="../../writing.html">Writing</a></li><li><a _key="cd5b2c9fbd5f" class="flex gap-half items-center hover:underline" href="../../oss.html">Open Source</a></li><li><a _key="05b4198b2e14" class="flex gap-half items-center hover:underline" href="../../careers.html">Careers</a></li></ul></div></div></div></div></header><div style="opacity:0"><div style="opacity:0"><div class="md:px-container-desktop pt-header-mobile md:pt-12 lg:pt-18"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-5 xl:col-start-4 px-container-mobile md:px-0 pt-6 md:pt-0 max-w-[900px]"><div class="flex flex-col gap-2"><div class="flex flex-col gap-2"><div class="flex flex-col gap-2"><div class="flex gap-1 md:gap-2 items-center font-mono text-mono-12 md:text-mono-13 text-gray-text"><span><a class="link-gray-black link-underline-hover" href="../../writing%3Ftags=research.html">Research</a></span></div><h1 class="font-mono text-mono-28 md:text-mono-40 tracking-tighter max-w-[1400px]">Uniswap v3: The Universal AMM</h1></div></div><p class="font-mono text-mono-12 gap-1 w-full justify-between"><span>06.07.2021</span><span class="px-1">|</span><span class="content-none before:content-[&#x27;By_&#x27;]"><a class="link-underline-hover" href="../../team/danrobinson/index.html">Dan Robinson</a></span></p></div></div></div></div><div class="my-2 md:my-4 px-container-mobile md:px-container-desktop"><div class="relative"><div class="pointer-events-none lg:pointer-events-auto my-3"><div class="grid grid-cols-12 pointer-events-auto"><div class="col-span-12 md:col-start-2 xl:col-span-5 xl:col-start-4"><div class="flex flex-col gap-1"><p class="font-mono text-mono-12 uppercase font-medium">Outline</p><ul class="flex flex-col gap-1"><li class="font-mono text-mono-12" style="margin-inline-start:0"><a class="link-underline-hover" href="uniswap-v3-the-universal-amm.html#ba6fbcf22533">1. Introduction</a><ul class="flex flex-col mt-1 gap-1 ml-[25px]"><li class="font-mono text-mono-12"><a class="link-underline-hover" href="uniswap-v3-the-universal-amm.html#1445a6f2c950">1. Automated market makers</a></li><li class="font-mono text-mono-12"><a class="link-underline-hover" href="uniswap-v3-the-universal-amm.html#edfbe5436bcb">2. Uniswap v3</a></li></ul></li><li class="font-mono text-mono-12" style="margin-inline-start:0"><a class="link-underline-hover" href="uniswap-v3-the-universal-amm.html#4d322bad6a9a">2. Simulating other curves</a><ul class="flex flex-col mt-1 gap-1 ml-[25px]"><li class="font-mono text-mono-12"><a class="link-underline-hover" href="uniswap-v3-the-universal-amm.html#30d009f9ed8e">1. Uniswap v2</a></li><li class="font-mono text-mono-12"><a class="link-underline-hover" href="uniswap-v3-the-universal-amm.html#cb015e12b2ee">2. Curve (with constant chi)</a></li><li class="font-mono text-mono-12"><a class="link-underline-hover" href="uniswap-v3-the-universal-amm.html#752d4424afd9">3. Balancer</a></li><li class="font-mono text-mono-12"><a class="link-underline-hover" href="uniswap-v3-the-universal-amm.html#d9efe5234233">4. Logarithmic market scoring rule</a></li></ul></li><li class="font-mono text-mono-12"><a class="link-underline-hover" href="uniswap-v3-the-universal-amm.html#e64c7bbf7083">3. Future work</a></li><li class="font-mono text-mono-12" style="margin-inline-start:0"><a class="link-underline-hover" href="uniswap-v3-the-universal-amm.html#094c27a8149e">4. Appendices</a><ul class="flex flex-col mt-1 gap-1 ml-[25px]"><li class="font-mono text-mono-12"><a class="link-underline-hover" href="uniswap-v3-the-universal-amm.html#eddfaf8286e2">1. Appendix A: Definition of liquidity</a></li><li class="font-mono text-mono-12"><a class="link-underline-hover" href="uniswap-v3-the-universal-amm.html#1de89bdf4b91">2. Appendix B: Example derivation</a></li></ul></li></ul></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><h2 id="ba6fbcf22533">Introduction</h2><p>Uniswap v3 (<a class="" href="https://uniswap.org/whitepaper-v3.pdf">paper</a>) allows liquidity providers to provide custom amounts of liquidity in selected price ranges. This unlocks tremendous capital efficiency gains for liquidity providers who can manually adjust their exposure.</p><p>But this feature also greatly expands the design space for <em>automated</em> liquidity provision. Any static AMM can be approximated by a custom liquidity provision strategy involving multiple positions on Uniswap v3.</p><p>We can visualize the liquidity provided by any AMM as a curve in &quot;tick space.&quot; Applying this method to existing AMMs like Curve, Balancer, and the logarithmic market scoring rule (LMSR) shows how those AMMs concentrate their liquidity across different prices, revealing the unique &quot;liquidity fingerprint&quot; corresponding to each of those AMMs.</p><p>Follow-up work will explore how strategies like this can be efficiently and accurately approximated in practice on Uniswap v3.</p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><h4 id="1445a6f2c950">Automated market makers</h4><p>This paper assumes you are familiar with automated market makers between two assets <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span></div></span> and <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span></span></span></span></div></span> that are defined as a trading function (see <a class="" href="https://doi.org/10.1145/3419614.3423251">paper</a>), meaning a relationship between its reserves <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></div></span> and <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span></div></span>. We will only consider two-asset pools.</p><p>For ease of comparison, let&#x27;s define the constants in each of these formulas in terms of <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span></div></span>, where <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span></div></span> is the quantity of <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></div></span> when <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>=</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">x = y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span></div></span>. You can loosely think of <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span></div></span>as the number of ``shares&quot; that liquidity providers have in that pool. For example, the constant product formula used by Uniswap v2 (ignoring fees) can be described with the formula <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>⋅</mo><mi>y</mi><mo>=</mo><msup><mi>s</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">x \cdot y = s^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></div></span>, with <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span></div></span> roughly corresponding to the total supply of liquidity tokens.</p><p>We will use <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span></span></div></span> to refer to the price of asset <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span></div></span> in terms of asset <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span></span></span></span></div></span>. <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span></span></div></span> is equivalent to the negated derivative of the reserves curve, <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mfrac><mrow><mi>d</mi><mi>y</mi></mrow><mrow><mi>d</mi><mi>x</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">-\frac{dy}{dx}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2772em;vertical-align:-0.345em;"></span><span class="mord">−</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9322em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">x</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4461em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></div></span>. (For more background on thinking about AMMs in terms of derivatives, see the <a class="" href="https://yield.is/YieldSpace.pdf">YieldSpace paper</a>).</p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><h4 id="edfbe5436bcb">Uniswap v3</h4><p>In Uniswap v3, anyone can create a position to provide some amount of liquidity—<span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi></mrow><annotation encoding="application/x-tex">L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span></span></span></span></div></span>—within a price range between two ticks. Tick indexes (<span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">t_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7651em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></div></span>) are logarithmic in price, and specify the lower and upper prices at which that position provides liquidity.</p><p>As shown in the <a class="" href="https://uniswap.org/whitepaper-v3.pdf">Uniswap v3 whitepaper</a>, this is the trading function that describes the relationship between the reserves of a single Uniswap v3 position while its liquidity is in range:</p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-math my-0 mx-auto"><div><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><msub><mi>x</mi><mrow><mi>o</mi><mi>f</mi><mi>f</mi><mi>s</mi><mi>e</mi><mi>t</mi></mrow></msub><mo stretchy="false">)</mo><mo>⋅</mo><mo stretchy="false">(</mo><mi>y</mi><mo>+</mo><msub><mi>y</mi><mrow><mi>o</mi><mi>f</mi><mi>f</mi><mi>s</mi><mi>e</mi><mi>t</mi></mrow></msub><mo stretchy="false">)</mo><mo>=</mo><msup><mi>L</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">(x + x_{offset})\cdot (y + y_{offset}) = L^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight" style="margin-right:0.10764em;">ff</span><span class="mord mathnormal mtight">se</span><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight" style="margin-right:0.10764em;">ff</span><span class="mord mathnormal mtight">se</span><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8641em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></div></div><div class="relative hidden xl:block row-start-1 w-[250px] pl-1"></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-math my-0 mx-auto"><div><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>x</mi><mrow><mi>o</mi><mi>f</mi><mi>f</mi><mi>s</mi><mi>e</mi><mi>t</mi></mrow></msub><mo>=</mo><mfrac><mi>L</mi><msqrt><msub><mi>p</mi><mrow><mi>u</mi><mi>p</mi><mi>p</mi><mi>e</mi><mi>r</mi></mrow></msub></msqrt></mfrac></mrow><annotation encoding="application/x-tex">x_{offset} = \frac{L}{\sqrt{p_{upper}}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight" style="margin-right:0.10764em;">ff</span><span class="mord mathnormal mtight">se</span><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.4291em;vertical-align:-1.0688em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6572em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">pp</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">er</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.6172em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3828em;"><span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">L</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.0688em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></div><div class="relative hidden xl:block row-start-1 w-[250px] pl-1"></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-math my-0 mx-auto"><div><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>y</mi><mrow><mi>o</mi><mi>f</mi><mi>f</mi><mi>s</mi><mi>e</mi><mi>t</mi></mrow></msub><mo>=</mo><mi>L</mi><mo>⋅</mo><msqrt><msub><mi>p</mi><mrow><mi>l</mi><mi>o</mi><mi>w</mi><mi>e</mi><mi>r</mi></mrow></msub></msqrt></mrow><annotation encoding="application/x-tex">y_{offset} = L \cdot \sqrt{p_{lower}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight" style="margin-right:0.10764em;">ff</span><span class="mord mathnormal mtight">se</span><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.2881em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">er</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-2.7119em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2881em;"><span></span></span></span></span></span></span></span></span></span></div></div><div class="relative hidden xl:block row-start-1 w-[250px] pl-1"></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><p></p><figure class="py-1 gap-2 flex flex-col"><div class="image overflow-hidden" style="height:0;padding-bottom:91.11328125%"><picture><img class="scale-105 blur-lg" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/ElEQVQ4jY2T627lIAyEz/s/5KpqmgshCSkBbGObrIDT7nZVrfr9ipKMsfHMo5QiIswsqqWU+y9EBBETQEopNlJ7QEQRue/7oaqICACUM4t86osWAHj33jln1nWe56kxz/O+74hYSqliAEgASETMqtrVqppiPE/n3DHN08vLy6/G6+urtRYAqlhUE0AIIQIkotr8x8kIcPnTvztr7ThOb41lWc7zJKIqZhHvvbV22/fT+8z8ObOK5JwzUZ+rNpgSIuacVbXOjIi9sDFmOw4kur+j30X5eqOPEMI8z9u2xRhDSkCkX//4Dw/v/fg2nMdeFyaCOfPH2D8ST2/DuVvlrKUQM7ad/0gMAMdmr3MXrqsTVcwZuS7tnwm/EYtItU7wQulWKUWrnrneKYvUvTe+FWs1CUKKSqkw3sJ3Oz/X+WsJzDkhRoDcLKSlfLb0dBgAKFNhLBmK5KJStLaQRSDn7ThmY3yM1Gp1Iz7F3e5EmAkJYk4XRQ/RQwoAKcRojBnH8d17aC0kAG5eepRSiKglJqaWnxQuf7rNTMs0mGVZG9ba67r6MSklZn4Gg5mbCxvVkDml5Nyxrsau9jiOLnt+JMpEz0iGELz3IYRe9bqu0PDX9d7488b76wNEVNXHuq7DMCzL4lxPz9ijY4zp6e09T9M0DEP/Oo6jc46ZfwPOcxL/gxR0EAAAAABJRU5ErkJggg=="/></picture></div></figure><p>If a strategy involves providing liquidity in multiple positions, these definitions defined in terms of total reserves will no longer apply.</p><p>It would therefore be helpful to find a <em>local</em> definition for liquidity, that describes liquidity in its conventional sense: the pool&#x27;s resistance to price impact when someone is trading with it.</p><p>As shown in Appendix A, it turns out that <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi></mrow><annotation encoding="application/x-tex">L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span></span></span></span></div></span> can also be defined as the rate of change of <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span></div></span>(the reserves of the <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span></span></span></span></div></span> token) for a given change in <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mi>P</mi></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{P}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.1133em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9267em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span><span style="top:-2.8867em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1133em;"><span></span></span></span></span></span></span></span></span></div></span>(the square root of the price of the <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span></span></span></span></div></span> token in terms of the token):</p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-math my-0 mx-auto"><div><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>L</mi><mo>=</mo><mfrac><mrow><mi>d</mi><mi>y</mi></mrow><mrow><mi>d</mi><msqrt><mi>P</mi></msqrt></mrow></mfrac></mrow><annotation encoding="application/x-tex">L = \frac{dy}{d\sqrt{P}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.3014em;vertical-align:-0.93em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.1833em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9267em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span><span style="top:-2.8867em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1133em;"><span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.93em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></div><div class="relative hidden xl:block row-start-1 w-[250px] pl-1"></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><h2 id="4d322bad6a9a">Simulating other curves</h2><p>How can liquidity providers use Uniswap v3 to simulate a custom curve? One intuitive way to do so is to create many different positions, with a custom amount of liquidity in each:</p><p></p><figure class="py-1 gap-2 flex flex-col"><div class="image overflow-hidden" style="height:0;padding-bottom:74.51171875%"><picture><img class="scale-105 blur-lg" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB1ElEQVQokZ2Sa0/bMBSG8/9/xQQUtqkX0NSW7/ChYtOY6JhKg1C7fkgcx7nUiX3O8SVbk1I0CaFtrywd2X4f+8ivg+ZZ1loAICLvffN3CrrivTfG1HWttXbO/RvcNA0RSSn/B3bOSSk553VdH9r2fj/egn3bM+d8s9lUVfV8XKN1I6tGqcbaN2EiYoytVisppfc7d1E24aO7/eYWC5emnuiVFoID3N0spdyRhf9+76aX1B/SeGI+f7GMvcIHXbHWSVmlqShLlQp3/8NOL6l3hic9fP+Bzi/o5sZGkdf6D/4QVYNo0rQKH9VsRuMJnp7BuyM4OobeKRyfwGAIV9cUhrYs/SGNF9gYF0VqNqsnU33xSQ1H6mO/7g+q0ageDNXoXI0n+uoa1j8N4j6Ql5yd89utWa9xucQwxIcl3M23X2/FfF4uHvRyicsQn55QCHP4hPsH62bOeSKP6JEcgC3LKo65EIXShOh26+it7ew7f2CM0a0AABEBQGutlNJaV1VVFPl2WypVQyut97uI6JwLlFJJksRxnGVZnuec8ziOoyhKWsWtGGNpmgohOOeMsc5MRAEACCGSJCmKQkqZ53mSJIwx0SptxTnPsqwoiizLOOed+Tf8C29QVYim1OWLAAAAAElFTkSuQmCC"/></picture></div></figure><p>The more narrow these &quot;slices&quot; are, the more accurately this will simulate the target curve. For this post, we will treat tick space as infinitely divisible, and imagine that a liquidity provider is allowed to provide any arbitrary function <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mo stretchy="false">(</mo><msub><mi>t</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">L(t_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">L</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></div></span> to provide that amount of liquidity at any tick.</p><p>Graphing the <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mo stretchy="false">(</mo><msub><mi>t</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">L(t_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">L</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></div></span> function shows us the &quot;liquidity fingerprint&quot; of these other AMMs. (For convenience in defining functions of ticks, we will define as <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">t_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7651em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></div></span> as <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ln</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>P</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\ln(P)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">ln</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mclose">)</span></span></span></span></div></span>, as if our tick size was <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>e</mi></mrow><annotation encoding="application/x-tex">e</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">e</span></span></span></span></div></span>.) Appendix B shows the steps to derive this <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mo stretchy="false">(</mo><msub><mi>t</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">L(t_i)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">L</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></div></span>function from a given invariant.</p><p><br/></p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><h4 id="30d009f9ed8e">Uniswap v2</h4><p>The behavior of the reserves in <a class="" href="https://uniswap.org/whitepaper.pdf">Uniswap v2</a> can be described with the following equation:</p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-math my-0 mx-auto"><div><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>x</mi><mo>⋅</mo><mi>y</mi><mo>=</mo><msup><mi>s</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">x \cdot y = s^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8641em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></div></div><div class="relative hidden xl:block row-start-1 w-[250px] pl-1"></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><p></p><figure class="py-1 gap-2 flex flex-col"><div class="image overflow-hidden" style="height:0;padding-bottom:87.109375%"><picture><img class="scale-105 blur-lg" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAAsTAAALEwEAmpwYAAABQElEQVQ4jZ2S626DMAyFef8HLapKoYDjS2wnU+KOdZOm0R3xK/jLOXY81FrdnZlZJJuVUuppDaUUM0NEZGZVd38PVlUiIhHO2f4BIyKLsDbr92Bm3raNmbOqqPrptgd33/f9drsRkZq9lXwws3mex3FERHMX1ax6cuZDwNfrlYhKrbmbq1k5GRsAlmURkfbmpYhq8P5XgKGUIiIppZxzFLt7+Iuqmpl7uyVUf3mqA661xuaIGvf5t0GYZTN173nKzw0TEf8uM9PAVLn3wv1rE+n8F5xS6gveRET7vq/rum0bABARMxMzEiUi7jYNjpABRBEzA8A0TZfLZRzHaZoAgIk4Ktoey9M54Jxz6ooIYTvP87Isj8cDAI6/ImKvsd0dEaM0mPv9HtihuWtdVyKK8f90fvZGhIifGZ+NHIf6sn8fp5Ln17r7YmYAAAAASUVORK5CYII="/></picture></div></figure><p>The liquidity fingerprint of this reserves curve is a flat line:</p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-math my-0 mx-auto"><div><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>L</mi><mo>=</mo><mi>s</mi></mrow><annotation encoding="application/x-tex">L = s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span></span></div></div><div class="relative hidden xl:block row-start-1 w-[250px] pl-1"></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><p>To simulate this curve in Uniswap v3, we can simply create a single position with liquidity <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span></div></span>, and set our tick boundaries to <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mrow><mi>m</mi><mi>i</mi><mi>n</mi></mrow></msub></mrow><annotation encoding="application/x-tex">t_{min}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7651em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">min</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></div></span> and <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub></mrow><annotation encoding="application/x-tex">t_{max}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7651em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ma</span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></div></span>.</p><p></p><figure class="py-1 gap-2 flex flex-col"><div class="image overflow-hidden" style="height:0;padding-bottom:69.62890625%"><picture><img class="scale-105 blur-lg" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAABiElEQVQokZWSb2/TMBDG+/2/RhM7IK1/kFglNkiBlxN9szEoLyboItbEbROSOLk7xxfkpiOtGBJ79Ohsn/zzSb4btHsxM+1lrW3/W4NusdbWda21NsYw87NhrXVZls+GmRkAsizL86KDmdt/+VgDZjbG7Ha7+/tos8mqqqmBAdonTdQe/4mDiSiOk9vb7zef06/LZrm0XfziNvbx2Cy/2R8rW5Z9/a4yKbVZLFbns2wyxfEEz0Y4GtPZyHk8odHYJSdT+vDRxDFbe+Ad3DQmy35dXyfTV7mQ4AsYeuD5OBzi0ENfoOe7pAjwzQX9fLA9vP9qBqC7O/36vJQShOxuO9LzUUjHC4nBC7y4/AtmbpuGVyuczcogqGQAvqiFBE+4gjIAIV0MXsLlW3x4Ek4SurrS4VyH8+pd2Duc16GL1fx99WlRb7fNn54dhoS5RbRpSolCpTBRuF7XUVREUbGOIUlQKVIK05QQ+14d4McneiHidi8AOM6fDMkp3NsYUxRFnudEdJQ/gX8DEXwPrAc5V9sAAAAASUVORK5CYII="/></picture></div></figure><h4 id="cb015e12b2ee">Curve (with constant chi)</h4><p>The formula used by Curve is described in the <a class="" href="https://curve.fi/files/stableswap-paper.pdf">StableSwap whitepaper</a>. That paper first describes its invariant in terms of a constant amplification factor, <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></div></span>. Their formula can be written as:</p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-math my-0 mx-auto"><div><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mn>2</mn><mi>χ</mi><mi>s</mi><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><mi>y</mi><mo stretchy="false">)</mo><mo>+</mo><mi>x</mi><mi>y</mi><mo>=</mo><mn>4</mn><mi>χ</mi><msup><mi>s</mi><mn>2</mn></msup><mo>+</mo><msup><mi>s</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">2 \chi s (x + y) + xy = 4 \chi s^2 + s^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">2</span><span class="mord mathnormal">χs</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">x</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0585em;vertical-align:-0.1944em;"></span><span class="mord">4</span><span class="mord mathnormal">χ</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8641em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></div></div><div class="relative hidden xl:block row-start-1 w-[250px] pl-1"></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><p>This reserves curve (with Uniswap v2 shown for comparison) looks like:</p><p></p><figure class="py-1 gap-2 flex flex-col"><div class="image overflow-hidden" style="height:0;padding-bottom:73.4375%"><picture><img class="scale-105 blur-lg" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAABhklEQVQokX2Sy7KbMBBE/f9fmGxcccoVMFj4YiTNe3RLEsFeJD6lHWrRM92n0jAzVXXXUry84e6iSkSAmBsAwMzu9dqp32BmRFAhN30Xq2pMcXksf4bhV+VyvV6XZWHml5iIMmRldOXidohFZHuuIcy/L5cflZ/n83maJiLaxeaGhClnqWIs1fzrz5DT9vwK9/vQmKZpXVcR2cXNW1q3jQhcsLw5d3dVFWFmpgYzi8g+c/e8LEt4PJpzqM4/4k25iwFgHMd7CBkBKQuD22vsD5zcPec8DEMIgZiQECEqY/n7/CdxKQURQwh9DVpTzYzJlP1t7f8Vq2pqtJ64mSijUGYG68lVF/8wcjpyBgDVumcv7YHamkh1hLpCN6kR1mPHQ28lybln0DEzEcbWS8asBMbo0o5x38guRsQYIyLWQBvYyhxT2mLcYowpIdRXGBMTWPP46vbR+y5b13WapnEc53leHl/PLab2FSAjYh+wio8mHYhISimEcLvd5nneto2YaxI71hv2DdCUbe8oTVuUAAAAAElFTkSuQmCC"/></picture></div></figure><p>It turns out that with a constant <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span></div></span>, the liquidity provided by this formula is <em>exactly equivalent</em> to a single Uniswap v3 position, if we set <span class="rich-text__math"><div><span class="katex-error" title="ParseError: KaTeX parse error: Can&#x27;t use function &#x27;$&#x27; in math mode at position 23: …cdot (2\chi + 1$̲)" style="color:#cc0000">L = s \cdot (2\chi + 1$)</span></div></span>), and set the upper and lower prices to <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mrow><mo fence="true">(</mo><mfrac><mrow><mn>2</mn><mi>χ</mi><mo>+</mo><mn>1</mn></mrow><mrow><mn>2</mn><mi>χ</mi></mrow></mfrac><mo fence="true">)</mo></mrow><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">{\left(\frac{2\chi + 1}{2\chi}\right)}^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.004em;vertical-align:-0.65em;"></span><span class="mord"><span class="mord"><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size2">(</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8972em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight">χ</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4461em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight">χ</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4811em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size2">)</span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.354em;"><span style="top:-3.6029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></div></span> and <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mrow><mo fence="true">(</mo><mfrac><mrow><mn>2</mn><mi>χ</mi></mrow><mrow><mn>2</mn><mi>χ</mi><mo>+</mo><mn>1</mn></mrow></mfrac><mo fence="true">)</mo></mrow><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">{\left(\frac{2\chi}{2\chi + 1}\right)}^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.004em;vertical-align:-0.65em;"></span><span class="mord"><span class="mord"><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size2">(</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8972em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight">χ</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4461em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mathnormal mtight">χ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4811em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size2">)</span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.354em;"><span style="top:-3.6029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></div></span>. This means that we can simulate this formula with a single position in Uniswap v3:</p><p></p><figure class="py-1 gap-2 flex flex-col"><div class="image overflow-hidden" style="height:0;padding-bottom:83.05882352941177%"><picture><img class="scale-105 blur-lg" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAABYlAAAWJQFJUiTwAAABdUlEQVQ4jZ3TTW/aQBAGYP7/r0lpemhCpLbkklsObYQhkRBgCbCxd5b9nt2ZymwCPpRI7ntdP/bs7usRMxNRjDGlREQ8JKMstdbW2qF+REQhBABQSsUY/wdLKbXWKaVhY6eUtNaHw0EpNXjsEMJut1sulwBApwzAzrnValUUhRDijInYOQbgtuXjkRE/xbPZrG3bjIk4BN5u+fmZn5745aV7yz8HGnnvy7Kcz+d97By/vfHkgce3/PjIVXUFI2Jd1+v1WkqZDyzj11e+u+ebMf+a8n5/BaeUjDFN05xP+4zvJzz++immXkkQMXZJ1qbFPH2/o5sv9OMnbXfpVN9LLhgRAUAIoZTSWhujAXRR2MmDv/0WplO/2Rjdiz0VucPMnCeXUgKA7AJCQFmqWWF//3GLhdnvj3np/I1c5A5nj4jhI94HY1zTHKtKCqGt9b0lj4i5Du/445IuCSHUdb3ZlE3T5Kf7ed/zterFGKWUVVUDyGt/219FwNxgYMRG/wAAAABJRU5ErkJggg=="/></picture></div></figure><p>Curve in fact uses a non-constant <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span></div></span> which is defined (using our terminology) as <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>A</mi><mi>x</mi><mi>y</mi></mrow><msup><mi>s</mi><mn>2</mn></msup></mfrac></mrow><annotation encoding="application/x-tex">\frac{Axy}{s^2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2694em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9244em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7463em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4461em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="mord mathnormal mtight">x</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></div></span>, where A is a constant amplification factor. This leads to a more complicated equation that is harder to represent with a closed-form liquidity function. In follow-up work, I&#x27;ll show how to approximate this and other curves numerically.</p><p><br/></p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><h4 id="752d4424afd9">Balancer</h4><p>The reserves in a two-asset <a class="" href="https://balancer.fi/whitepaper.pdf">Balancer</a> pool can be described by this invariant, where <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mi>x</mi></msub></mrow><annotation encoding="application/x-tex">w_x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></div></span>is the weight of the <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span></div></span> asset and <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mi>x</mi></msub></mrow><annotation encoding="application/x-tex">w_x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></div></span> is the weight of the <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span></span></span></span></div></span> asset (or <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>−</mo><msub><mi>w</mi><mi>x</mi></msub></mrow><annotation encoding="application/x-tex">1 - w_x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></div></span>):</p><p></p><figure class="py-1 gap-2 flex flex-col"><div class="image overflow-hidden" style="height:0;padding-bottom:93.1640625%"><picture><img class="scale-105 blur-lg" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAAAsTAAALEwEAmpwYAAACCklEQVQ4jYWT23LbIBCG/f5PmE46cS4cNbYsJBDLHlmlSIrjuO30G4ZhYH/2wHJYlsXdzazWurgvf1BrNTO9wzbjZTm4u6pmACZyk8Xb7g13J+Y5Q0ppGIa+70MIKSVErLU2MYuMMZYCrrRUu1fWWjPkMIa+vxyPxx9PTy8vL13XTdOkqrt4SilDroJL1QcxQJ7G4dqfX19ffz4/H4/H0+kUQtjFIhLTPEM2QTe+j3w7RSwFYJ7nFGNKaZ5nItrDRsRhHFOeTegzcn/w3/DPRVs2g0OtNcb46/19SkmVXbfIv5Xd/8ayLAczCyGc3t7GlFi4Ra70UPN/cVDVYRjeui7lTCLMaAxr5v5/sZlN09T3fUEUMxImzIJZha11wx7iHuh39oKllJi5ulutsuqpzIiFmERFzMRMrVqtVt2q1y3nrcNKKSKy3d7Ka2pCQsAIRECExETMJLINNXP3R/FXMdsd6spV0BhtnVVQhVTITL7EAICI992vqiKiwm0wNw2TclECoaLC38Q553LH9hOu12sIIcYIAOs2lJIB8t5h26fb/ayztAfjeZ4vl0vXdefzeRxHItqO1tNmWd3bU2Hr3UIrpRRcAYAYY1iZpgkAqJWMRYSIthwPRLSFN61cr9dhGMZPQgh935/P59tPzjnHGMdxLKW0DoOVm+eb841SSs55yxkRmXmz/O35AwUrUlfHw0HyAAAAAElFTkSuQmCC"/></picture></div></figure><p></p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-math my-0 mx-auto"><div><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mi>x</mi><msub><mi>w</mi><mi>x</mi></msub></msup><mo>⋅</mo><msup><mi>y</mi><msub><mi>w</mi><mi>y</mi></msub></msup><mo>=</mo><mi>s</mi></mrow><annotation encoding="application/x-tex">x^{w_x} \cdot y^{w_y} = s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7144em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1645em;"><span style="top:-2.357em;margin-left:-0.0269em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.9088em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1645em;"><span style="top:-2.357em;margin-left:-0.0269em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2819em;"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span></span></span></span></span></div></div><div class="relative hidden xl:block row-start-1 w-[250px] pl-1"></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><p>In liquidity space, this corresponds to an exponential function:</p></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-math my-0 mx-auto"><div><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>L</mi><mo stretchy="false">(</mo><msub><mi>t</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mi>s</mi><mo>⋅</mo><mo stretchy="false">(</mo><mn>2</mn><msup><msub><mi>w</mi><mi>x</mi></msub><msub><mi>w</mi><mi>y</mi></msub></msup><msup><msub><mi>w</mi><mi>y</mi></msub><msub><mi>w</mi><mi>x</mi></msub></msup><mo stretchy="false">)</mo><mo>⋅</mo><msup><mi>e</mi><mrow><mo stretchy="false">(</mo><msub><mi>w</mi><mi>x</mi></msub><mo>−</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><mo stretchy="false">)</mo><msub><mi>t</mi><mi>i</mi></msub></mrow></msup></mrow><annotation encoding="application/x-tex">L(t_i) = s \cdot (2 {w_x}^{w_y} {w_y}^{w_x}) \cdot e^{(w_x - \frac{1}{2}) t_i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">L</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1645em;"><span style="top:-2.357em;margin-left:-0.0269em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2819em;"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0269em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1645em;"><span style="top:-2.357em;margin-left:-0.0269em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.004em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.004em;"><span style="top:-3.413em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02691em;">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1645em;"><span style="top:-2.357em;margin-left:-0.0269em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mbin mtight">−</span><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8443em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.2255em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span><span class="mclose mtight">)</span><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></div></div><div class="relative hidden xl:block row-start-1 w-[250px] pl-1"></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><p></p><figure class="py-1 gap-2 flex flex-col"><div class="image overflow-hidden" style="height:0;padding-bottom:73.53515625%"><picture><img class="scale-105 blur-lg" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAABvUlEQVQokZWSa2/TMBSG8///Bhq9aFNBLTAuEmyTmNRVakvgw1q2D1OrJvElTnw7iX0cSDuqIkAr7xcfnePnfW3LUXOgEAIiNkcrOiTrugaA4/loXyGiUpZSrbVHDP8Bh9A455JExd/Uw4MHaDvHw8EYs1iQj5+K8dhlWXDuaT7aw2VZxvHq9Rs+HMF05hl7mo8e1xCklPHX9egV6/VhOKonE7fZBGsbxH9aRAfHtoslOT8X3R50e9XgRX155ZdL5HkAaC12T/O35KZxzq9W+v0H1enCSad6dlI971TDUf352t3e+vUaKUUp27v8mdwghiyrLq/02UCfnpn+qen2dK+vBy/N23f24sKOx7D8XkmJ+/zDT9JI6e7u7PyLnc3tdGrGN+X1NbuZFNOZns1NHNv7e5DS/waHX/I+AKDWXmsvpWNMbTaUsVKqWiqvlDfGO/e4uYURsaoqay0AVFvZVsZaq7UqCqGU3E0BYDtqa7f1iOq6zvM8yzLOeVEUnPM0TZMkoZQSQpIkSdOUUsoYp5SmWzHGjDGIGHnvy7KklAohpJRCCELIzosxlmUZIYRzLoTI83znyDm31v5M/gH2YFe3YsqxfwAAAABJRU5ErkJggg=="/></picture></div></figure><p>Intuitively, when asset <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span></div></span> is weighted less heavily, more of the pool&#x27;s liquidity is reserved for lower prices of asset <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span></div></span>. This makes sense, because at any given time, liquidity reserved for lower prices is effectively buy orders for asset <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span></div></span>, so it is currently held in asset <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span></span></span></span></div></span>.</p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><h4 id="d9efe5234233">Logarithmic market scoring rule</h4><p>The <a class="" href="https://mason.gmu.edu/~rhanson/mktscore.pdf">logarithmic market scoring rule</a> (LMSR) is one of the first and most widely studied automated market makers. The two-asset case is best known for its application to a binary prediction market (i.e., between YES and NO shares), where the price of the two assets (in cash) adds up to 1.</p><p>Typically, LMSR is described in terms of the rule for market-making between each asset (YES and NO) and cash. We could instead describe it in terms of the rule for market-making between one asset and the other. If we do that, then as explained <a class="" href="https://docs.gnosis.io/conditionaltokens/docs/introduction3/">here</a>, the reserves can be described by this invariant:</p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-math my-0 mx-auto"><div><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mn>2</mn><mrow><mo>−</mo><mfrac><mi>x</mi><mi>s</mi></mfrac></mrow></msup><mo>+</mo><msup><mn>2</mn><mrow><mo>−</mo><mfrac><mi>y</mi><mi>s</mi></mfrac></mrow></msup><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">2^{-\frac{x}{s}} + 2^{-\frac{y}{s}} = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9804em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8971em;"><span style="top:-3.413em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6915em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span style="top:-3.2255em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.9519em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9519em;"><span style="top:-3.413em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7699em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span style="top:-3.2255em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.4624em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span></div></div><div class="relative hidden xl:block row-start-1 w-[250px] pl-1"></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><p>The reserves curve for this formula looks like:</p><p></p><figure class="py-1 gap-2 flex flex-col"><div class="image overflow-hidden" style="height:0;padding-bottom:96.2890625%"><picture><img class="scale-105 blur-lg" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAAAsTAAALEwEAmpwYAAACFElEQVQ4jZWTyY7bMBBE9f9fOHMy7HEk2VookeyN3aQCUjMTH5IgeTB8EFDF3qrLOaeUJImqlGxHKWbGzAgYAUKsAAA2oIGIRGRmnZkBIiAwQ1YpZkS07X5Z3Y++v1wu1+t1GIb5i2VZ5nle15WIOjONABGAMJpgNkXEbdvcut5ut7e3t/f391M/DMPj8Zim6fxHxE5VAaHWQZAYsiVmDvu2u/Uxjtfr9XK5fHx8DMMwjuPz+ZwazjlmbmIAImImoZgttSlIEq5+AN89V/8GM4tIzrljZuccIkpiwmCJj6McX5TG8Qc6733f9yEE1UQYhaDO/EX/Fzrn3O12897nnEUIwWvio/ynuNQNa3s8ZtN/ebwLIYzjGGM821OVOvNEJWvt9q8ldMy8bRsRnYOpBpayoCW0xLWET/1vXDpVjTEy86+pVr2qIGNgiipklrJpO9786vK5ZxF5XUkpJZu1VUdCTxiEYxLQRFmlGrWKfh2JvZAbZqZaU8NCSDUmWH8eo2eEbNqC0c7o9YYQMYTg9917H0KNVotTDDF47/d9DyEkka6UklL6lp0AwLIsfd/f7/dhGJZ5hhirafWt1kikqt3ZoaryC+fLzrkzffu+n3UhIjOras65lPIpTilt27au69ZYG9u27Y3z47Isj8fDOZdSOqdbxcdxiMg0TX3fT9M0z/PYeD6fZ/RPhmG43+/TNH2v5id7qktq9WWMLgAAAABJRU5ErkJggg=="/></picture></div></figure><p>When transformed into tick space, the liquidity fingerprint of this curve is shaped like—you guessed it—the hyperbolic secant function:</p><p></p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-math my-0 mx-auto"><div><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>L</mi><mo stretchy="false">(</mo><msub><mi>t</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mfrac><mi>s</mi><mrow><mi>ln</mi><mo>⁡</mo><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo></mrow></mfrac><mo>⋅</mo><mi mathvariant="normal">sech</mi><mo>⁡</mo><mrow><mo fence="true">(</mo><mfrac><msub><mi>t</mi><mi>i</mi></msub><mn>2</mn></mfrac><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">L(t_i) = \frac{s}{\ln(2)} \cdot \operatorname{sech}{\left(\frac{t_i}{2}\right)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">L</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.0436em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mop">ln</span><span class="mopen">(</span><span class="mord">2</span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"></span><span class="mop"><span class="mord mathrm">sech</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.2921em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span></span></span></span></span></span></div></div><div class="relative hidden xl:block row-start-1 w-[250px] pl-1"></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><p></p><figure class="py-1 gap-2 flex flex-col"><div class="image overflow-hidden" style="height:0;padding-bottom:86.52343750000001%"><picture><img class="scale-105 blur-lg" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAAsTAAALEwEAmpwYAAABsklEQVQ4jaWSbU/bMBCA8/9/B7AVirbxCSS2aZPKgJYxafCFDUErusSJ47w4fjnbd5masKibqr2wR/fB1vmxfWdH7X8QrU+I6IkyESHiP/nRMAohGGOcc3/vR8OxzrmmaQDgKbIxpqoqABhyRKv4g0xE3nshBGPMGDOYiG0Iv9si6mUAiON4sVgopXpN6zbLKI6xLMn5zX60Ls/nc6UUIknZ3t7iZOLfvPUfLwNj5NwGP1q/dpIkSmkp6eYGj1/78Riej+DlK3d27pOE1rrxc8MQ0RjDebVc2s9X4fDIPxvB9g5sbdutHbv/AiaTcH+PtaQQNnS7BfAPD3o6NYdHMN63o12zN17F7t4qDg7su/fw5avXmjbIzmGawvW1vbiw05k9n+oPp/XJSXV6pqYzM5vZy0/27s5pjb/W3P1NAsCmwVpiLUNRujgpl8ucc1XVoa6DlEFrDGG1+FFGRPiB6wAAa60xpmmklJVSylo7rDEdoSs9AgAhBOe8KIqyg3OepinnPM/zrINzLoQoiqJ/kTRNrbWPMuc8SZI8z/s0YyyO47TjWwdjLMsyIUSe532ql78DeNbRE2ESptsAAAAASUVORK5CYII="/></picture></div></figure><p>As you can see, LMSR concentrates more of its liquidity closer to tick 0 (the price of 1). In prediction markets, when YES and NO shares are equal, that implies a probability of 50%. So LMSR concentrates more liquidity to support probabilities around 50% than to support more extreme probabilities.</p><p>Appendix B shows how this liquidity fingerprint can be computed.</p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><h2 id="e64c7bbf7083">Future work</h2><p>This paper showed how several popular AMMs could be simulated using Uniswap v3, and showed how graphing curves in liquidity space provides insight into their unique ``liquidity fingerprints&quot;. However, there are several limitations that need to be overcome before Uniswap v3 can be used to simulate most of these AMMs:</p><ul><li>Ticks are not infinitely divisible, and liquidity providers have to approximate this curve using the granular ticks available.</li><li>The gas cost of minting and burning is proportional to the number of ticks updated, so providing liquidity at custom levels across all of tick space would be insurmountably inefficient.</li><li>Finally, not every useful AMM can be easily represented as a function in liquidity space.</li></ul><p>Future work will demonstrate some techniques for getting around these problems using numerical approximation, as well as some smart contract tricks to make custom liquidity provision much more gas-efficient.</p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><h2 id="094c27a8149e">Appendices</h2><h4 id="eddfaf8286e2">Appendix A: Definition of liquidity</h4><p>We can show that in Uniswap v3, the derivative <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>d</mi><mi>y</mi></mrow><mrow><mi>d</mi><msqrt><mi>P</mi></msqrt></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{dy}{d\sqrt{P}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.4702em;vertical-align:-0.538em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9322em;"><span style="top:-2.5374em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord sqrt mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9323em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mtight" style="padding-left:0.833em;"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">P</span></span></span><span style="top:-2.8923em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail mtight" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1077em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4461em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.538em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></div></span> is equal to <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi></mrow><annotation encoding="application/x-tex">L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span></span></span></span></div></span>.</p><p>We start with the trading function (while the position is in range):</p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-math my-0 mx-auto"><div><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo>+</mo><msub><mi>x</mi><mrow><mi>o</mi><mi>f</mi><mi>f</mi><mi>s</mi><mi>e</mi><mi>t</mi></mrow></msub><mo stretchy="false">)</mo><mo>⋅</mo><mo stretchy="false">(</mo><mi>y</mi><mo>+</mo><msub><mi>y</mi><mrow><mi>o</mi><mi>f</mi><mi>f</mi><mi>s</mi><mi>e</mi><mi>t</mi></mrow></msub><mo stretchy="false">)</mo><mo>=</mo><msup><mi>L</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">(x + x_{offset})\cdot (y + y_{offset}) = L^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight" style="margin-right:0.10764em;">ff</span><span class="mord mathnormal mtight">se</span><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight" style="margin-right:0.10764em;">ff</span><span class="mord mathnormal mtight">se</span><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8641em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span></div></div><div class="relative hidden xl:block row-start-1 w-[250px] pl-1"></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><p>Solving for <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></div></span>(to use later):</p></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-math my-0 mx-auto"><div><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>x</mi><mo>=</mo><mfrac><msup><mi>L</mi><mn>2</mn></msup><mrow><mi>y</mi><mo>+</mo><msub><mi>y</mi><mrow><mi>o</mi><mi>f</mi><mi>f</mi><mi>s</mi><mi>e</mi><mi>t</mi></mrow></msub></mrow></mfrac><mo>−</mo><msub><mi>x</mi><mrow><mi>o</mi><mi>f</mi><mi>f</mi><mi>s</mi><mi>e</mi><mi>t</mi></mrow></msub></mrow><annotation encoding="application/x-tex">x = \frac{L^2}{y + y_{offset}} - x_{offset}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.4632em;vertical-align:-0.9721em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4911em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight" style="margin-right:0.10764em;">ff</span><span class="mord mathnormal mtight">se</span><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9721em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight" style="margin-right:0.10764em;">ff</span><span class="mord mathnormal mtight">se</span><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span></div></div><div class="relative hidden xl:block row-start-1 w-[250px] pl-1"></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><p>Solving for <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span></div></span>:</p></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-math my-0 mx-auto"><div><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>y</mi><mo>=</mo><mfrac><msup><mi>L</mi><mn>2</mn></msup><mrow><mi>x</mi><mo>+</mo><msub><mi>x</mi><mrow><mi>o</mi><mi>f</mi><mi>f</mi><mi>s</mi><mi>e</mi><mi>t</mi></mrow></msub></mrow></mfrac><mo>−</mo><msub><mi>y</mi><mrow><mi>o</mi><mi>f</mi><mi>f</mi><mi>s</mi><mi>e</mi><mi>t</mi></mrow></msub></mrow><annotation encoding="application/x-tex">y = \frac{L^2}{x + x_{offset}} - y_{offset}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.4632em;vertical-align:-0.9721em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4911em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight" style="margin-right:0.10764em;">ff</span><span class="mord mathnormal mtight">se</span><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9721em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight" style="margin-right:0.10764em;">ff</span><span class="mord mathnormal mtight">se</span><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span></div></div><div class="relative hidden xl:block row-start-1 w-[250px] pl-1"></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><p>Finding <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span></span></div></span> as a function of <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></div></span> by taking <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mfrac><mrow><mi>d</mi><mi>y</mi></mrow><mrow><mi>d</mi><mi>x</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">-\frac{dy}{dx}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2772em;vertical-align:-0.345em;"></span><span class="mord">−</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9322em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">x</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4461em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></div></span>:</p></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-math my-0 mx-auto"><div><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>P</mi><mo>=</mo><mfrac><msup><mi>L</mi><mn>2</mn></msup><msup><mrow><mo fence="true">(</mo><mi>x</mi><mo>+</mo><msub><mi>x</mi><mrow><mi>o</mi><mi>f</mi><mi>f</mi><mi>s</mi><mi>e</mi><mi>t</mi></mrow></msub><mo fence="true">)</mo></mrow><mn>2</mn></msup></mfrac></mrow><annotation encoding="application/x-tex">P = \frac{L^2}{\left(x + x_{offset}\right)^2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.6212em;vertical-align:-1.1301em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4911em;"><span style="top:-2.156em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="minner"><span class="minner"><span class="mopen delimcenter" style="top:0em;">(</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight" style="margin-right:0.10764em;">ff</span><span class="mord mathnormal mtight">se</span><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;">)</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.954em;"><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.1301em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></div><div class="relative hidden xl:block row-start-1 w-[250px] pl-1"></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><p>Solving for <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mi>P</mi></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{P}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.1133em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9267em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span><span style="top:-2.8867em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1133em;"><span></span></span></span></span></span></span></span></span></div></span> instead:</p></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-math my-0 mx-auto"><div><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msqrt><mi>P</mi></msqrt><mo>=</mo><mfrac><mi>L</mi><mrow><mi>x</mi><mo>+</mo><msub><mi>x</mi><mrow><mi>o</mi><mi>f</mi><mi>f</mi><mi>s</mi><mi>e</mi><mi>t</mi></mrow></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">\sqrt{P} = \frac{L}{x + x_{offset}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.0645em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9755em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span><span style="top:-2.9355em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.0645em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.3324em;vertical-align:-0.9721em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3603em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight" style="margin-right:0.10764em;">ff</span><span class="mord mathnormal mtight">se</span><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">L</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9721em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></div><div class="relative hidden xl:block row-start-1 w-[250px] pl-1"></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><p>Substituting for <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></div></span> and simplifying:</p></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-math my-0 mx-auto"><div><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msqrt><mi>P</mi></msqrt><mo>=</mo><mfrac><mrow><mi>y</mi><mo>+</mo><msub><mi>y</mi><mrow><mi>o</mi><mi>f</mi><mi>f</mi><mi>s</mi><mi>e</mi><mi>t</mi></mrow></msub></mrow><mi>L</mi></mfrac></mrow><annotation encoding="application/x-tex">\sqrt{P} = \frac{y + y_{offset}}{L}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.0645em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9755em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span><span style="top:-2.9355em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.0645em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.9463em;vertical-align:-0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.2603em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">L</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight" style="margin-right:0.10764em;">ff</span><span class="mord mathnormal mtight">se</span><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></div><div class="relative hidden xl:block row-start-1 w-[250px] pl-1"></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><p>Solving for <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span></div></span>:</p></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-math my-0 mx-auto"><div><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>y</mi><mo>=</mo><mi>L</mi><mo>∗</mo><msqrt><mi>P</mi></msqrt><mo>−</mo><msub><mi>y</mi><mrow><mi>o</mi><mi>f</mi><mi>f</mi><mi>s</mi><mi>e</mi><mi>t</mi></mrow></msub></mrow><annotation encoding="application/x-tex">y = L * \sqrt{P} - y_{offset}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0589em;vertical-align:-0.0833em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9755em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span><span style="top:-2.9355em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.0645em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7167em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">o</span><span class="mord mathnormal mtight" style="margin-right:0.10764em;">ff</span><span class="mord mathnormal mtight">se</span><span class="mord mathnormal mtight">t</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span></div></div><div class="relative hidden xl:block row-start-1 w-[250px] pl-1"></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><p>Taking the derivative:</p></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-math my-0 mx-auto"><div><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mfrac><mrow><mi>d</mi><mi>y</mi></mrow><mrow><mi>d</mi><msqrt><mi>P</mi></msqrt></mrow></mfrac><mo>=</mo><mi>L</mi></mrow><annotation encoding="application/x-tex">\frac{dy}{d\sqrt{P}} = L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.3014em;vertical-align:-0.93em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.1833em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9267em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span><span style="top:-2.8867em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1133em;"><span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.93em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span></span></span></span></span></div></div><div class="relative hidden xl:block row-start-1 w-[250px] pl-1"></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><h4 id="1de89bdf4b91">Appendix B: Example derivation</h4><p>This appendix shows how to go from an AMM formula defined as a trading function to a liquidity curve in tick space. We&#x27;ll use LMSR as an example.<br/><br/>As shown in Appendix A, liquidity can be defined as the rate of change of <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span></div></span> with respect to <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mi>P</mi></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{P}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.1133em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9267em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span><span style="top:-2.8867em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1133em;"><span></span></span></span></span></span></span></span></span></div></span>. Since <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span></span></div></span> is simply -1 times the derivative of <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span></div></span> with respect to <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></div></span>, we know that liquidity can be computed as:</p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-math my-0 mx-auto"><div><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>L</mi><mo>=</mo><mfrac><mrow><mi>d</mi><mi>y</mi></mrow><mrow><mi>d</mi><msqrt><mrow><mo>−</mo><mfrac><mrow><mi>d</mi><mi>y</mi></mrow><mrow><mi>d</mi><mi>x</mi></mrow></mfrac></mrow></msqrt></mrow></mfrac></mrow><annotation encoding="application/x-tex">L = \frac{dy}{d\sqrt{-\frac{dy}{dx}}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:3.1014em;vertical-align:-1.73em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.11em;"><span class="pstrut" style="height:3.2786em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.2786em;"><span class="svg-align" style="top:-3.8em;"><span class="pstrut" style="height:3.8em;"></span><span class="mord" style="padding-left:1em;"><span class="mord">−</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9322em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight">x</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4461em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">d</span><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.2386em;"><span class="pstrut" style="height:3.8em;"></span><span class="hide-tail" style="min-width:1.02em;height:1.88em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.88em' viewBox='0 0 400000 1944' preserveAspectRatio='xMinYMin slice'><path d='M983 90
l0 -0
c4,-6.7,10,-10,18,-10 H400000v40
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M1001 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.5614em;"><span></span></span></span></span></span></span></span><span style="top:-3.5086em;"><span class="pstrut" style="height:3.2786em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.9556em;"><span class="pstrut" style="height:3.2786em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.73em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></div><div class="relative hidden xl:block row-start-1 w-[250px] pl-1"></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><p>We start with the AMM defined as an invariant:</p></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-math my-0 mx-auto"><div><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mn>2</mn><mrow><mo>−</mo><mfrac><mi>x</mi><mi>s</mi></mfrac></mrow></msup><mo>+</mo><msup><mn>2</mn><mrow><mo>−</mo><mfrac><mi>y</mi><mi>s</mi></mfrac></mrow></msup><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">2^{-\frac{x}{s}} + 2^{-\frac{y}{s}} = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9804em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8971em;"><span style="top:-3.413em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6915em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span style="top:-3.2255em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.9519em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9519em;"><span style="top:-3.413em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7699em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span style="top:-3.2255em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.4624em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span></div></div><div class="relative hidden xl:block row-start-1 w-[250px] pl-1"></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><p>Solving for <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span></div></span>:</p></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-math my-0 mx-auto"><div><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>y</mi><mo>=</mo><mo>−</mo><mi>s</mi><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>2</mn></msub><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><msup><mn>2</mn><mrow><mo>−</mo><mfrac><mi>x</mi><mi>s</mi></mfrac></mrow></msup><mo stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex">y = -s \log_2{(1-2^{-\frac{x}{s}})}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1471em;vertical-align:-0.25em;"></span><span class="mord">−</span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8971em;"><span style="top:-3.413em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6915em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span style="top:-3.2255em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></span></div></div><div class="relative hidden xl:block row-start-1 w-[250px] pl-1"></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><p>Taking the derivative and negating it to get the price (of asset <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi></mrow><annotation encoding="application/x-tex">X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span></div></span> in terms of asset <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi></mrow><annotation encoding="application/x-tex">Y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.22222em;">Y</span></span></span></span></div></span>) as a function of <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></div></span>:</p></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-math my-0 mx-auto"><div><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>P</mi><mi>x</mi></msub><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mo>−</mo><mfrac><mrow><mi>d</mi><mi>y</mi></mrow><mrow><mi>d</mi><mi>x</mi></mrow></mfrac><mo>=</mo><mfrac><mn>1</mn><mrow><msup><mn>2</mn><mfrac><mi>x</mi><mi>s</mi></mfrac></msup><mo>−</mo><mn>1</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">P_x(x) = -\frac{dy}{dx} = \frac{1}{2^{\frac{x}{s}}-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.0574em;vertical-align:-0.686em;"></span><span class="mord">−</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="mord mathnormal">x</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.1274em;vertical-align:-0.806em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.2774em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8326em;"><span style="top:-3.3486em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6915em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span style="top:-3.2255em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.806em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></div><div class="relative hidden xl:block row-start-1 w-[250px] pl-1"></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><p>We then need to find the formula for that same price, but as a function of <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span></div></span> rather than <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></div></span>. Since this curve (like the others described in this post) is symmetrical between <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></div></span> and <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span></div></span>, we can easily get the price as a function of <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span></div></span> by replacing <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></div></span> with <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span></div></span> and taking the reciprocal:<br/></p><p><br/></p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-math my-0 mx-auto"><div><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>P</mi><mi>y</mi></msub><mo stretchy="false">(</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><msup><mn>2</mn><mfrac><mi>y</mi><mi>s</mi></mfrac></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">P_y(y) = 2^{\frac{y}{s}} - 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0353em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9519em;"><span style="top:-3.413em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7699em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span style="top:-3.2255em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.4624em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></span></div></div><div class="relative hidden xl:block row-start-1 w-[250px] pl-1"></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><p>Next, we invert this to find <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span></div></span> as a function of <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span></span></div></span>, and then rewrite it as a function of <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mi>P</mi></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{P}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.1133em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9267em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span><span style="top:-2.8867em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1133em;"><span></span></span></span></span></span></span></span></span></div></span>.</p></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-math my-0 mx-auto"><div><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>y</mi><msqrt><mi>P</mi></msqrt></msub><mo stretchy="false">(</mo><msqrt><mi>P</mi></msqrt><mo stretchy="false">)</mo><mo>=</mo><mi>s</mi><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>2</mn></msub><mrow><mo stretchy="false">(</mo><msup><msqrt><mi>P</mi></msqrt><mn>2</mn></msup><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex">y_{\sqrt{P}}(\sqrt{P}) = s \log_2{(\sqrt{P}^2+1)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.3587em;vertical-align:-0.3832em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3922em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord sqrt mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9323em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mtight" style="padding-left:0.833em;"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">P</span></span></span><span style="top:-2.8923em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail mtight" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1077em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3832em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9755em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span><span style="top:-2.9355em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.0645em;"><span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.4295em;vertical-align:-0.25em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen">(</span><span class="mord"><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9755em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span><span style="top:-2.9355em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.0645em;"><span></span></span></span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.1795em;"><span style="top:-3.4284em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span></span></div></div><div class="relative hidden xl:block row-start-1 w-[250px] pl-1"></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><p>Then we take the derivative with respect to <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><mi>P</mi></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{P}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.1133em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9267em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span><span style="top:-2.8867em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1133em;"><span></span></span></span></span></span></span></span></span></div></span>:</p></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-math my-0 mx-auto"><div><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>L</mi><mo stretchy="false">(</mo><msqrt><mi>P</mi></msqrt><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><mi>d</mi><mi>y</mi></mrow><mrow><mi>d</mi><msqrt><mi>P</mi></msqrt></mrow></mfrac><mo>=</mo><mfrac><mrow><mn>2</mn><mi>s</mi></mrow><mrow><mi>ln</mi><mo>⁡</mo><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo></mrow></mfrac><mo>⋅</mo><mfrac><mn>1</mn><mrow><msqrt><mi>P</mi></msqrt><mo>+</mo><mfrac><mn>1</mn><msqrt><mi>P</mi></msqrt></mfrac></mrow></mfrac></mrow><annotation encoding="application/x-tex">L(\sqrt{P}) = \frac{dy}{d\sqrt{P}} = \frac{2s}{\ln(2)} \cdot \frac{1}{\sqrt{P}+\frac{1}{\sqrt{P}}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2255em;vertical-align:-0.25em;"></span><span class="mord mathnormal">L</span><span class="mopen">(</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9755em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span><span style="top:-2.9355em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.0645em;"><span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.3014em;vertical-align:-0.93em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.1833em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9267em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span><span style="top:-2.8867em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1133em;"><span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.93em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.2574em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mop">ln</span><span class="mopen">(</span><span class="mord">2</span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span><span class="mord mathnormal">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:2.6761em;vertical-align:-1.3547em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.1833em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9267em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span></span></span><span style="top:-2.8867em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1133em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.5374em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord sqrt mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9323em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mtight" style="padding-left:0.833em;"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">P</span></span></span><span style="top:-2.8923em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail mtight" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1077em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.538em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.3547em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div></div><div class="relative hidden xl:block row-start-1 w-[250px] pl-1"></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><p>Finally, we convert to tick space by rewriting this as a function of tick index <span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>t</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">t_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7651em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></div></span> (<span class="rich-text__math"><div><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>n</mi><mo stretchy="false">(</mo><mi>P</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">ln(P)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mclose">)</span></span></span></span></div></span>):</p></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-math my-0 mx-auto"><div><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>L</mi><mo stretchy="false">(</mo><msub><mi>t</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mfrac><mn>1</mn><mrow><mi>ln</mi><mo>⁡</mo><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo></mrow></mfrac><mo>⋅</mo><mfrac><mn>2</mn><mrow><msup><mi>e</mi><mfrac><msub><mi>t</mi><mi>i</mi></msub><mn>2</mn></mfrac></msup><mo>+</mo><msup><mi>e</mi><mrow><mo>−</mo><mfrac><msub><mi>t</mi><mi>i</mi></msub><mn>2</mn></mfrac></mrow></msup></mrow></mfrac><mo>=</mo><mfrac><mi>s</mi><mrow><mi>ln</mi><mo>⁡</mo><mo stretchy="false">(</mo><mn>2</mn><mo stretchy="false">)</mo></mrow></mfrac><mo>⋅</mo><mi mathvariant="normal">sech</mi><mo>⁡</mo><mrow><mo fence="true">(</mo><mfrac><msub><mi>t</mi><mi>i</mi></msub><mn>2</mn></mfrac><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">L(t_i) = \frac{1}{\ln(2)} \cdot \frac{2}{e^{\frac{t_i}{2}}+e^{-\frac{t_i}{2}}} = \frac{s}{\ln(2)} \cdot \operatorname{sech}{\left(\frac{t_i}{2}\right)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">L</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.2574em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mop">ln</span><span class="mopen">(</span><span class="mord">2</span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:2.3347em;vertical-align:-1.0132em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3214em;"><span style="top:-2.11em;"><span class="pstrut" style="height:3.0399em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.0399em;"><span style="top:-3.3486em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9876em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.2255em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.5483em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-left:0em;margin-right:0.1em;"><span class="pstrut" style="height:2.6595em;"></span><span class="mord mathnormal mtight">i</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3147em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.0399em;"><span style="top:-3.3486em;margin-right:0.05em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9876em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.2255em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.5483em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-left:0em;margin-right:0.1em;"><span class="pstrut" style="height:2.6595em;"></span><span class="mord mathnormal mtight">i</span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3147em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.2699em;"><span class="pstrut" style="height:3.0399em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.7169em;"><span class="pstrut" style="height:3.0399em;"></span><span class="mord"><span class="mord">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.0132em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.0436em;vertical-align:-0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.1076em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mop">ln</span><span class="mopen">(</span><span class="mord">2</span><span class="mclose">)</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.936em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"></span><span class="mop"><span class="mord mathrm">sech</span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.2921em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span></span></span></span></span></span></div></div><div class="relative hidden xl:block row-start-1 w-[250px] pl-1"></div></div></div></div></div></div><footer class="px-container-mobile md:px-container-desktop py-7 md:py-8 md:pb-7"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-5 xl:col-start-4 flex flex-row gap-10 max-w-[900px]"><div class="flex flex-col gap-6 max-w-[900px]"><div class="flex flex-col gap-2"><h3 class="font-mono text-mono-12 font-medium">Written by</h3><div class="flex flex-col gap-2"><div class="md:p-2 md:border md:border-solid md:border-gray-border"><div class="grid md:grid-cols-5 gap-2"><div class="md:col-span-2"><a class="block w-full" href="../../team/danrobinson/index.html"><div class="image overflow-hidden block w-full aspect-square"><picture><img class="scale-105 blur-lg" src="data:image/jpeg;base64,/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAUHCAL/xAAkEAABBAEEAgIDAAAAAAAAAAABAAIDBAUGERITBzEhYVFyof/EABcBAAMBAAAAAAAAAAAAAAAAAAACAwH/xAAZEQEBAAMBAAAAAAAAAAAAAAABAAISMVH/2gAMAwEAAhEDEQA/ALBrUhHj5pNw14YSCT8A7KA0NWdZys8gyTrMMkXJ8L38uL9/Y+lUXm3Wt859uHpW5IaUTB2tjdtzJ97qCz+dt4Ovi7GItyV5mjkCw7bj7/KEVGvuAiWm7WODZnABFH6M1IzP6Yx+Rlc3uliHZ+w9ontGyd5De6TWGSe87u7QFxquRzq+PBPqJES0fa2PElydmjIGteeIkeB/ERExVx5f/9k="/></picture></div></a></div><div class="md:col-span-3 font-mono text-mono-12"><div class="flex flex-col gap-2"><div class="flex flex-col gap-1 md:gap-2"><div class="flex flex-col gap-half"><p class="font-medium"><a class="link-underline-hover" href="../../team/danrobinson/index.html">Dan Robinson</a></p><p>General Partner</p></div><div class="flex gap-1 flex-wrap"><a _key="6738ffc28bba" class="block button button-tag" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/danielprobinson/">LinkedIn</a><a _key="44c9b840cad2" class="block button button-tag" target="_blank" rel="noopener noreferrer" href="https://twitter.com/danrobinson">Twitter</a><a _key="8ad39bdaa28b" class="block button button-tag" target="_blank" rel="noopener noreferrer" href="https://warpcast.com/danrobinson">Warpcast</a></div></div><div class="flex flex-col gap-1"><h4 class="md:hidden font-medium">Biography</h4><div class="lg:line-clamp-[10] rich-text-inline"><p>Dan Robinson is a General Partner at Paradigm, focused on crypto investments and research into open-source protocols. Previously, Dan was a protocol researcher at Interstellar. Before Interstellar, Dan practiced as a litigation attorney at Paul, Weiss, Rifkind, Wharton &amp; Garrison LLP. He earned a J.D. from Harvard Law School and an A.B. from Harvard University.</p> <a class="button button-tag-inline relative top-[2px]" href="../../team/danrobinson/index.html"><svg width="12" height="6" viewBox="0 0 12 6" class="mx-auto mt-[4px] rotate-180"><path d="M0 3L5 5.88675L5 0.113248L0 3ZM12 2.5L4.5 2.5L4.5 3.5L12 3.5L12 2.5Z" fill="currentColor"></path></svg></a></div></div></div></div></div></div></div></div><div class="rich-text line-break font-mono text-mono-12"><p>Disclaimer: This post is for general information purposes only. It does not constitute investment advice or a recommendation or solicitation to buy or sell any investment and should not be used in the evaluation of the merits of making any investment decision. It should not be relied upon for accounting, legal or tax advice or investment recommendations. This post reflects the current opinions of the authors and is not made on behalf of Paradigm or its affiliates and does not necessarily reflect the opinions of Paradigm, its affiliates or individuals associated with Paradigm. The opinions reflected herein are subject to change without being updated.</p></div></div></div></div></footer><div class="p-3 md:pt-6 bg-black text-white font-mono text-mono-12"><div class="flex flex-col gap-6"><div class="grid grid-cols-12 gap-y-6"><div class="col-span-12 md:col-span-3"><div class="flex"><svg width="94" height="108" viewBox="0 0 94 108" class="text-green block w-[53px] h-[60px] md:w-[94px] md:h-[108px]"><path d="M94 33.2314L36.1538 0L28.9231 4.15692V12.4628L21.6923 8.30585L14.4615 12.4628V20.7686L7.23077 16.6117L0 20.7686V87.2314L7.23077 91.3883L14.4615 87.2314V95.5372L21.6923 99.6942L28.9231 95.5372V103.843L36.1538 108L94 74.7686V66.4628L86.7692 62.3059L94 58.1489V49.8431L86.7692 45.6862L94 41.5292V33.2314ZM14.4615 78.9255L7.23077 83.0825V24.9255L14.4615 29.0825V78.9255ZM36.1538 83.0745V74.7686L65.0769 58.1569L72.3077 62.3138L36.1538 83.0745ZM57.8462 54L36.1538 66.4628V41.5372L57.8462 54ZM65.0769 49.8431L36.1538 33.2314V24.9255L72.3077 45.6942L65.0769 49.8431ZM21.6923 16.6117L28.9231 20.7686V29.0745L21.6923 24.9175V16.6117ZM21.6923 33.2314L28.9231 37.3883V70.6197L21.6923 74.7766V33.2314ZM21.6923 83.0745L28.9231 78.9175V87.2234L21.6923 91.3803V83.0745ZM86.7692 70.6117L36.1538 99.6862V91.3803L79.5385 66.4548L86.7692 70.6117ZM86.7692 54L79.5385 58.1569L72.3077 54L79.5385 49.8431L86.7692 54ZM79.5385 41.5372L36.1538 16.6117V8.30585L86.7692 37.3803L79.5385 41.5372Z" fill="currentColor"></path></svg></div></div><div class="col-span-12 md:col-span-6 flex flex-col gap-6"><div class="grid md:grid-cols-3 gap-y-1"><div><ul class="flex flex-col gap-1"><li><a _key="c617717bef10" class="link-underline-hover uppercase font-medium" href="../../about.html">About</a></li><li><a _key="445b500c20cd" class="link-underline-hover uppercase font-medium" href="../../team.html">Team</a></li><li><a _key="ae321ba66fad" class="link-underline-hover uppercase font-medium" href="../../portfolio.html">Portfolio</a></li></ul></div><div><ul class="flex flex-col gap-1"><li><a _key="6862d607fb16" class="link-underline-hover uppercase font-medium" href="../../writing.html">Writing</a></li><li><a _key="ce7b888d0e75" class="link-underline-hover uppercase font-medium" href="../../oss.html">Open Source</a></li><li><a _key="927788bfed4f" class="link-underline-hover uppercase font-medium" href="../../careers.html">Careers</a></li></ul></div><div><ul class="flex flex-col gap-1"><li><a _key="02f85bf11b4a" class="link-underline-hover uppercase font-medium" target="_blank" rel="noopener noreferrer" href="https://app.junipersquare.com/i/paradigm">LP Login</a></li></ul></div></div><div class="grid md:grid-cols-3 gap-y-1"><div><a _key="f325e52a9ec5" class="link-underline-hover" target="_blank" rel="noopener noreferrer" href="https://twitter.com/paradigm">Twitter</a></div><div><a _key="f231f3484f95" class="link-underline-hover" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/company/paradigm-xyz/">LinkedIn</a></div><div><a _key="1c198033e797" class="link-underline-hover" target="_blank" rel="noopener noreferrer" href="https://warpcast.com/paradigm">Warpcast</a></div><div><a _key="d8394a8a29cb" class="link-underline-hover" href="../../contact.html">Contact</a></div></div></div></div><div class="grid grid-cols-12 items-end gap-y-6"><div class="col-span-12 md:col-span-3"><ul class="flex flex-col gap-1"><li><a _key="d6e347271e47" class="link-underline-hover" href="../../website-terms-of-use.html">Terms</a></li><li><a _key="29e55cad5ff7" class="link-underline-hover" href="../../important-disclosures.html">Disclosures</a></li><li><a _key="02e810af4cf8" class="link-underline-hover" href="../../privacy-policy.html">Privacy</a></li><li><a _key="520d04d2ff65" class="link-underline-hover" href="../../privacy-policy.html#83a48e65d92d">CA Privacy</a></li></ul></div><div class="col-span-12 md:col-span-6"><p>Copyright © 2025 Paradigm Operations LP All rights reserved. “Paradigm” is a trademark, and the triangular mobius symbol is a registered trademark of Paradigm Operations LP</p></div><div class="col-span-12 md:col-span-3"><div class="flex justify-between md:justify-end"><div class="tag block md:hidden"></div><div class="tag"></div></div></div></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"layout":{"header":{"mobileLinks":[{"_type":"pageLink","page":{"_ref":"8a0be9a1-8ab7-4a76-9d11-5b0d2636b14e","_type":"reference"},"_key":"ad3cf4299bd8","openInNewWindow":null,"title":null,"pageName":"About","slug":"about"},{"openInNewWindow":null,"_type":"link","_key":"cdc21cfec068","title":"Team","url":"/team"},{"title":null,"pageName":"Portfolio","_key":"56f654c719a3","_type":"pageLink","page":{"_ref":"5413381f-bafa-4f3e-bba8-91d912b8db45","_type":"reference"},"slug":"portfolio","openInNewWindow":null},{"openInNewWindow":null,"_type":"link","_key":"f8ada95cbc04","title":"Writing","url":"/writing"},{"_key":"8e6834f3c151","openInNewWindow":null,"title":null,"pageName":"Open Source","slug":"oss","_type":"pageLink","page":{"_type":"reference","_ref":"cd2cf7f4-c943-4bfe-928b-ee045fba8a9f"}},{"openInNewWindow":null,"_type":"link","_key":"027927bd5b1f","title":"Careers","url":"/careers"}],"mobileSmallLinks":[{"_key":"8fb4f75b65fa","title":"LP Login","url":"https://app.junipersquare.com/i/paradigm","openInNewWindow":true,"_type":"link"}],"socialLinks":[{"openInNewWindow":true,"_type":"link","_key":"389a7a5bd2b7","title":"Twitter","url":"https://twitter.com/paradigm"},{"openInNewWindow":true,"_type":"link","_key":"309ee4c0c92b","title":"LinkedIn","url":"https://www.linkedin.com/company/paradigm-xyz/"},{"openInNewWindow":true,"_type":"link","_key":"caa5dd28bb8e","title":"Warpcast","url":"https://warpcast.com/paradigm"},{"title":null,"_type":"pageLink","page":{"_type":"reference","_ref":"57df6e24-c479-4932-861a-f7b349880f5f"},"_key":"c747bb27efab","pageName":"Contact","slug":"contact","openInNewWindow":null}],"legalLinks":[{"_type":"pageLink","page":{"_ref":"d33b5b91-90eb-4b9f-9eba-d894012bcc53","_type":"reference"},"_key":"798f6ddf0d55","title":"Terms","slug":"website-terms-of-use","openInNewWindow":null,"pageName":"Website Terms of Use"},{"_key":"a5c485dc29ed","title":"Disclosures","openInNewWindow":null,"pageName":"Important Disclosures","slug":"important-disclosures","_type":"pageLink","page":{"_ref":"c7027d0e-71a0-4bc4-b4ad-61cd2c3685a7","_type":"reference"}},{"_type":"pageLink","page":{"_ref":"081c96bd-e746-495c-998f-dc5e1421b55e","_type":"reference"},"_key":"d66378d18c1a","title":"Privacy","pageName":"Privacy Policy","slug":"privacy-policy","openInNewWindow":null},{"_key":"e8f366883ed3","title":"CA Privacy","url":"/privacy-policy#83a48e65d92d","openInNewWindow":false,"_type":"link"}],"desktopLinks":[{"slug":"about","openInNewWindow":null,"title":null,"_type":"pageLink","page":{"_ref":"8a0be9a1-8ab7-4a76-9d11-5b0d2636b14e","_type":"reference"},"_key":"426608038e76","pageName":"About"},{"url":"/team","_type":"link","_key":"ff5f78089e91","title":"Team","openInNewWindow":null},{"openInNewWindow":null,"title":null,"_type":"pageLink","page":{"_ref":"5413381f-bafa-4f3e-bba8-91d912b8db45","_type":"reference"},"_key":"38b3cd4525de","pageName":"Portfolio","slug":"portfolio"},{"_type":"link","_key":"22b86a453ca1","title":"Writing","url":"/writing","openInNewWindow":null},{"page":{"_ref":"cd2cf7f4-c943-4bfe-928b-ee045fba8a9f","_type":"reference"},"_key":"cd5b2c9fbd5f","openInNewWindow":null,"title":null,"pageName":"Open Source","slug":"oss","_type":"pageLink"},{"_type":"link","_key":"05b4198b2e14","title":"Careers","url":"/careers","openInNewWindow":null}]},"footer":{"linkColumns":[{"_key":"520a97f1c3b3","links":[{"pageName":"About","slug":"about","openInNewWindow":null,"_key":"c617717bef10","_type":"pageLink","page":{"_ref":"8a0be9a1-8ab7-4a76-9d11-5b0d2636b14e","_type":"reference"},"title":null},{"openInNewWindow":null,"_type":"pageLink","page":{"_ref":"c0cc1f2f-202f-4d37-b5bb-dc9edb7edf62","_type":"reference"},"_key":"445b500c20cd","title":null,"pageName":"Team","slug":"team"},{"_type":"pageLink","page":{"_ref":"5413381f-bafa-4f3e-bba8-91d912b8db45","_type":"reference"},"_key":"ae321ba66fad","openInNewWindow":null,"title":null,"pageName":"Portfolio","slug":"portfolio"}]},{"_key":"0d51d5f77b26","links":[{"pageName":"Writing","slug":"writing","_type":"pageLink","page":{"_ref":"c4ba5025-72c6-4c4d-a5a1-c46dfcce2cea","_type":"reference"},"_key":"6862d607fb16","openInNewWindow":null,"title":null},{"pageName":"Open Source","slug":"oss","_type":"pageLink","page":{"_ref":"cd2cf7f4-c943-4bfe-928b-ee045fba8a9f","_type":"reference"},"_key":"ce7b888d0e75","openInNewWindow":null,"title":null},{"title":"Careers","url":"/careers","_type":"link","_key":"927788bfed4f","openInNewWindow":null}]},{"_key":"efc2b524a0f6","links":[{"_type":"link","_key":"02f85bf11b4a","title":"LP Login","url":"https://app.junipersquare.com/i/paradigm","openInNewWindow":true}]}],"socialLinks":[{"_type":"link","_key":"f325e52a9ec5","title":"Twitter","url":"https://twitter.com/paradigm","openInNewWindow":true},{"_type":"link","_key":"f231f3484f95","title":"LinkedIn","url":"https://www.linkedin.com/company/paradigm-xyz/","openInNewWindow":true},{"_key":"1c198033e797","title":"Warpcast","url":"https://warpcast.com/paradigm","openInNewWindow":true,"_type":"link"},{"pageName":"Contact","slug":"contact","openInNewWindow":null,"_key":"d8394a8a29cb","_type":"pageLink","page":{"_ref":"57df6e24-c479-4932-861a-f7b349880f5f","_type":"reference"},"title":null}],"legalLinks":[{"pageName":"Website Terms of Use","slug":"website-terms-of-use","title":"Terms","_type":"pageLink","page":{"_ref":"d33b5b91-90eb-4b9f-9eba-d894012bcc53","_type":"reference"},"_key":"d6e347271e47","openInNewWindow":null},{"title":"Disclosures","_type":"pageLink","page":{"_ref":"c7027d0e-71a0-4bc4-b4ad-61cd2c3685a7","_type":"reference"},"_key":"29e55cad5ff7","openInNewWindow":null,"pageName":"Important Disclosures","slug":"important-disclosures"},{"_key":"02e810af4cf8","title":"Privacy","openInNewWindow":null,"pageName":"Privacy Policy","slug":"privacy-policy","_type":"pageLink","page":{"_ref":"081c96bd-e746-495c-998f-dc5e1421b55e","_type":"reference"}},{"title":"CA Privacy","url":"/privacy-policy#83a48e65d92d","openInNewWindow":false,"_type":"link","_key":"520d04d2ff65"}],"legalStatement":"Copyright © [YEAR] Paradigm Operations LP All rights reserved. “Paradigm” is a trademark, and the triangular mobius symbol is a registered trademark of Paradigm Operations LP"},"postDisclaimer":{"disclaimer":[{"style":"normal","asset":null,"_key":"45dda89c171b","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Disclaimer: This post is for general information purposes only. It does not constitute investment advice or a recommendation or solicitation to buy or sell any investment and should not be used in the evaluation of the merits of making any investment decision. It should not be relied upon for accounting, legal or tax advice or investment recommendations. This post reflects the current opinions of the authors and is not made on behalf of Paradigm or its affiliates and does not necessarily reflect the opinions of Paradigm, its affiliates or individuals associated with Paradigm. The opinions reflected herein are subject to change without being updated.","_key":"da9bfb35a7960"}],"_type":"block"}]},"careersIndex":{"indexTitle":"Opportunities","description":[{"asset":null,"style":"normal","_key":"6663134c09b3","markDefs":[],"children":[{"_key":"fdbf7aeff6590","_type":"span","marks":[],"text":"Browse through careers and opportunities in the Paradigm universe."}],"_type":"block"}]}},"config":{"seo":{"disallowRobots":null,"metaTitle":"Paradigm","metaDescription":"Paradigm is a research-driven crypto investment firm that funds companies and protocols from their earliest stages.","metaKeywords":null,"openGraphDescription":"Paradigm is a research-driven crypto investment firm that funds companies and protocols from their earliest stages.","openGraphImage":{"url":"https://cdn.sanity.io/images/dgybcd83/production/fd732ebeb1c4d286fd7e3b5b25395d72452edeb6-2400x1260.png","_type":"image","_key":null,"alt":null,"lqip":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABa0lEQVQokX1Su47CMBD0T9PQU/ML/MBVFCBRUlAgJIQUBQVOPAyBEMgLbOJc7DnZRyAEuI1W2qzXs7OzJqiY0p9Sf7FSb704E0IgCAJ4nmfcdV2QKuAd+HaxGkM9cmmawvd9bDYbrNdrzGYzkGrX8r9UErGMQX8o/NyHUOKpRgPu93vM53NMp1OMx+MHYBVUG1ccw3SI1rmFL/YFJ3MMaFGX5zmSJDEMNeBoNHqM/E4nza7N26gFNdTDOjq8g0QmT/VSSlyvVxyPRyyXSxDd5ZPwZ3lGj/fQiBpoxk0M0gGYZK+6AoatloBcLhcTFMDlTTPBYIUWul4Xfa8PGlOI7KYjXgloI3rdYRiCMWaegR6hKNI56lLY3zZsxwal1OTKeqMiF9lut2ZTu90Oh8MBnPP7YZZl0BNEYYTT6YQoiu4My0DlmKxWKywWC7Mlx3EMW82y2vm/11A2YlkWJpOJcdu2DZMy4Dv7lNeAv2hnUK/yFW33AAAAAElFTkSuQmCC","dimensions":{"_type":"sanity.imageDimensions","width":2400,"aspectRatio":1.9047619047619047,"height":1260}},"twitterTitle":"Paradigm","twitterDescription":"Paradigm is a research-driven crypto investment firm that funds companies and protocols from their earliest stages.","hideFromSitemap":null,"openGraphTitle":"Paradigm","twitterImage":{"_type":"image","_key":null,"alt":null,"lqip":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABa0lEQVQokX1Su47CMBD0T9PQU/ML/MBVFCBRUlAgJIQUBQVOPAyBEMgLbOJc7DnZRyAEuI1W2qzXs7OzJqiY0p9Sf7FSb704E0IgCAJ4nmfcdV2QKuAd+HaxGkM9cmmawvd9bDYbrNdrzGYzkGrX8r9UErGMQX8o/NyHUOKpRgPu93vM53NMp1OMx+MHYBVUG1ccw3SI1rmFL/YFJ3MMaFGX5zmSJDEMNeBoNHqM/E4nza7N26gFNdTDOjq8g0QmT/VSSlyvVxyPRyyXSxDd5ZPwZ3lGj/fQiBpoxk0M0gGYZK+6AoatloBcLhcTFMDlTTPBYIUWul4Xfa8PGlOI7KYjXgloI3rdYRiCMWaegR6hKNI56lLY3zZsxwal1OTKeqMiF9lut2ZTu90Oh8MBnPP7YZZl0BNEYYTT6YQoiu4My0DlmKxWKywWC7Mlx3EMW82y2vm/11A2YlkWJpOJcdu2DZMy4Dv7lNeAv2hnUK/yFW33AAAAAElFTkSuQmCC","dimensions":{"_type":"sanity.imageDimensions","width":2400,"aspectRatio":1.9047619047619047,"height":1260},"url":"https://cdn.sanity.io/images/dgybcd83/production/fd732ebeb1c4d286fd7e3b5b25395d72452edeb6-2400x1260.png"}}},"passwordProtection":{"enablePassword":false,"password":"paradigm"},"_id":"cf5443d8-aa95-4991-910f-5be80a136b45","title":"Uniswap v3: The Universal AMM","slug":"uniswap-v3-the-universal-amm","publishDate":"2021-06-07","featuredImageCaption":null,"_type":"post","authors":[{"_key":"2c15af01c326","tags":[{"_id":"e7cc8e78-9951-4bd0-9359-2de52c2c71e0","slug":"leadership","title":"Leadership","subTags":null},{"_id":"5f451f5f-7e63-41bf-94e2-e9086936db67","slug":"investing-and-research","title":"Investing \u0026 Research","subTags":null},{"_id":"d653d2da-dd5c-436c-96f1-3468da8fc86a","slug":"sort-priority-5","title":"(Sort Priority) 5","subTags":null}],"_id":"8a786bd2-8bdc-4935-b8c3-85b32d9a5980","hideOnAll":null,"name":"Dan Robinson","biography":[{"_type":"block","style":"normal","_key":"ca41d7fa7bd6","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Dan Robinson is a General Partner at Paradigm, focused on crypto investments and research into open-source protocols. Previously, Dan was a protocol researcher at Interstellar. Before Interstellar, Dan practiced as a litigation attorney at Paul, Weiss, Rifkind, Wharton \u0026 Garrison LLP. He earned a J.D. from Harvard Law School and an A.B. from Harvard University.","_key":"0bff70e7fa0f0"}],"asset":null}],"title":"General Partner","_type":"teamMember","portrait":{"_type":"imageAlt","_key":null,"alt":null,"lqip":"data:image/jpeg;base64,/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAUHCAL/xAAkEAABBAEEAgIDAAAAAAAAAAABAAIDBAUGERITBzEhYVFyof/EABcBAAMBAAAAAAAAAAAAAAAAAAACAwH/xAAZEQEBAAMBAAAAAAAAAAAAAAABAAISMVH/2gAMAwEAAhEDEQA/ALBrUhHj5pNw14YSCT8A7KA0NWdZys8gyTrMMkXJ8L38uL9/Y+lUXm3Wt859uHpW5IaUTB2tjdtzJ97qCz+dt4Ovi7GItyV5mjkCw7bj7/KEVGvuAiWm7WODZnABFH6M1IzP6Yx+Rlc3uliHZ+w9ontGyd5De6TWGSe87u7QFxquRzq+PBPqJES0fa2PElydmjIGteeIkeB/ERExVx5f/9k=","dimensions":{"_type":"sanity.imageDimensions","width":4991,"aspectRatio":1,"height":4991},"url":"https://cdn.sanity.io/images/dgybcd83/production/d8aee6ceefc3025593928dc9142f25903563fb7c-4991x4991.jpg"},"links":[{"_key":"6738ffc28bba","title":"LinkedIn","url":"https://www.linkedin.com/in/danielprobinson/","openInNewWindow":true,"_type":"link"},{"title":"Twitter","url":"https://twitter.com/danrobinson","openInNewWindow":true,"_type":"link","_key":"44c9b840cad2"},{"_type":"link","_key":"8ad39bdaa28b","title":"Warpcast","url":"https://warpcast.com/danrobinson","openInNewWindow":true}],"slug":"dan-robinson"}],"tags":[{"_id":"493e238e-72b6-4c77-9dcf-35f015c39025","slug":"research","title":"Research"}],"summary":"Uniswap v3 allows liquidity providers to provide custom amounts of liquidity in selected price ranges. This unlocks tremendous capital efficiency gains for liquidity providers who can manually adjust their exposure.","featuredImage":{"alt":null,"lqip":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABZ0lEQVQokY1S2Y6CQBCcNw8UbxEl3ooagwoqiUc0+uD/f1FtqhI2Kx7Zh4Lp6aqenuoxuVwOn5DNZp/W1WoVQRDgcDhgPB6jUCg8cQjDjTQ+HVCr1bBarXA6neD7PmzbftEZy7JQLBaVJBgnHf1FJpNBqVTCfD5XwfV6jVarJS011DYaDRh+2u02er0e+v0+PM9Tolwui0QBr0aw4HA4xPF4xPl8xnK5lI6a0Wik7s1gMJAf0+kUi8VCJ4dhqCRjXm0ymYjDP/fY4f1+l5fb7RZRFGG/3ys2JJDIwgRPvVwueDwe6oQHcBD8bzYb5YkkjqJIRdkEeYZXcF1XhnOKnU5HBHZAAXP1eh3NZlOecV2pVMR1HEfX7Xa70jE29CUZRD6fl3ez2UxdsiCF715CMlXLsn5B/cuzofn063q9Io5jdfbtnaZh0gROlh3ebjfsdjtNPP3Iv+GlIP3hhFmQxtPb/xRKCv4AGPcZVkVSNAMAAAAASUVORK5CYII=","dimensions":{"_type":"sanity.imageDimensions","width":2400,"aspectRatio":1.7777777777777777,"height":1350},"url":"https://cdn.sanity.io/images/dgybcd83/production/b0682e41b7920026096735694ef3de5f45072d4c-2400x1350.png","_type":"imageAlt","_key":null},"tableOfContents":true,"content":[{"_type":"richTextBlock","_key":"c970c85eced9","content":[{"markDefs":[],"children":[{"_type":"span","marks":[],"text":"Introduction","_key":"1fbcf4a0ab140"}],"_type":"block","style":"h2","_key":"ba6fbcf22533","asset":null},{"_type":"block","style":"normal","_key":"406d20cb9553","asset":null,"markDefs":[{"_type":"link","href":"https://uniswap.org/whitepaper-v3.pdf","_key":"f22a1f79d791"}],"children":[{"_type":"span","marks":[],"text":"Uniswap v3 (","_key":"4e943140ee300"},{"_type":"span","marks":["f22a1f79d791"],"text":"paper","_key":"4e943140ee301"},{"text":") allows liquidity providers to provide custom amounts of liquidity in selected price ranges. This unlocks tremendous capital efficiency gains for liquidity providers who can manually adjust their exposure.","_key":"4e943140ee302","_type":"span","marks":[]}]},{"children":[{"_type":"span","marks":[],"text":"But this feature also greatly expands the design space for ","_key":"c80faf131cf10"},{"marks":["em"],"text":"automated","_key":"c80faf131cf11","_type":"span"},{"text":" liquidity provision. Any static AMM can be approximated by a custom liquidity provision strategy involving multiple positions on Uniswap v3.","_key":"c80faf131cf12","_type":"span","marks":[]}],"_type":"block","style":"normal","_key":"274bee3e98df","asset":null,"markDefs":[]},{"style":"normal","_key":"01c0cbfea3f7","markDefs":[],"children":[{"_type":"span","marks":[],"text":"We can visualize the liquidity provided by any AMM as a curve in \"tick space.\" Applying this method to existing AMMs like Curve, Balancer, and the logarithmic market scoring rule (LMSR) shows how those AMMs concentrate their liquidity across different prices, revealing the unique \"liquidity fingerprint\" corresponding to each of those AMMs.","_key":"40ae1eade0d30"}],"_type":"block","asset":null},{"markDefs":[],"asset":null,"children":[{"_type":"span","marks":[],"text":"Follow-up work will explore how strategies like this can be efficiently and accurately approximated in practice on Uniswap v3.","_key":"93fc7e93cb4e0"}],"_type":"block","style":"normal","_key":"1a597200e6ea"}]},{"_type":"richTextBlock","_key":"9a49f7c279a4","content":[{"style":"h4","_key":"1445a6f2c950","asset":null,"markDefs":[],"children":[{"_type":"span","marks":[],"text":"Automated market makers","_key":"8e1e0435e8190"}],"_type":"block"},{"markDefs":[{"_type":"link","href":"https://doi.org/10.1145/3419614.3423251","_key":"27c38fc96f06"},{"_type":"math","math":{"_type":"latex","body":"X"},"_key":"476078295f3f"},{"_type":"math","math":{"_type":"latex","body":"Y"},"_key":"aec3c4f76c6a"},{"_type":"math","math":{"_type":"latex","body":"x"},"_key":"2f668b15b67d"},{"_type":"math","math":{"_type":"latex","body":"y"},"_key":"223677fe3afd"}],"children":[{"_type":"span","marks":[],"text":"This paper assumes you are familiar with automated market makers between two assets ","_key":"db8a3760ae830"},{"_key":"ad1152bda421","_type":"span","marks":["476078295f3f"],"text":"$_$"},{"text":" and ","_key":"8fcf16b449f8","_type":"span","marks":[]},{"_type":"span","marks":["aec3c4f76c6a"],"text":"$_$","_key":"5aa343d350f1"},{"_type":"span","marks":[],"text":" that are defined as a trading function (see ","_key":"3690dc77e1eb"},{"_type":"span","marks":["27c38fc96f06"],"text":"paper","_key":"db8a3760ae831"},{"_type":"span","marks":[],"text":"), meaning a relationship between its reserves ","_key":"db8a3760ae832"},{"marks":["2f668b15b67d"],"text":"$_$","_key":"a66d76edb764","_type":"span"},{"_type":"span","marks":[],"text":" and ","_key":"251ac6d757fd"},{"_type":"span","marks":["223677fe3afd"],"text":"$_$","_key":"9e83b60bb2a3"},{"_type":"span","marks":[],"text":". We will only consider two-asset pools.","_key":"52671c44dee6"}],"_type":"block","style":"normal","_key":"8cad75b016aa","asset":null},{"markDefs":[{"_type":"math","math":{"_type":"latex","body":"s"},"_key":"dff5fb0d3868"},{"_key":"4ed243ef6440","_type":"math","math":{"_type":"latex","body":"s"}},{"_key":"b24648ef6c81","_type":"math","math":{"_type":"latex","body":"x"}},{"_type":"math","math":{"_type":"latex","body":"x = y"},"_key":"2c06ce76898b"},{"_type":"math","math":{"_type":"latex","body":"s"},"_key":"3ab94e5064ff"},{"_type":"math","math":{"body":"x \\cdot y = s^2","_type":"latex"},"_key":"004d27d12f55"},{"_key":"a2a56935d41d","_type":"math","math":{"_type":"latex","body":"s"}}],"asset":null,"children":[{"_type":"span","marks":[],"text":"For ease of comparison, let's define the constants in each of these formulas in terms of ","_key":"20ffcea4d2d70"},{"marks":["dff5fb0d3868"],"text":"$_$","_key":"b285ef49f58d","_type":"span"},{"_type":"span","marks":[],"text":", where ","_key":"a86c8cd4c54d"},{"_key":"709b7ea36b96","_type":"span","marks":["4ed243ef6440"],"text":"$_$"},{"_type":"span","marks":[],"text":" is the quantity of ","_key":"24a7a7166292"},{"marks":["b24648ef6c81"],"text":"$_$","_key":"383d487b9fdb","_type":"span"},{"text":" when ","_key":"5763415671ca","_type":"span","marks":[]},{"_type":"span","marks":["2c06ce76898b"],"text":"$_$","_key":"426cc701cf2d"},{"_type":"span","marks":[],"text":". You can loosely think of ","_key":"474d3db1ab75"},{"_type":"span","marks":["3ab94e5064ff"],"text":"$_$ ","_key":"55697ccb81d2"},{"_type":"span","marks":[],"text":"as the number of ``shares\" that liquidity providers have in that pool. For example, the constant product formula used by Uniswap v2 (ignoring fees) can be described with the formula ","_key":"54e4fdf83a65"},{"_type":"span","marks":["004d27d12f55"],"text":"$_$","_key":"0f87f14cfe64"},{"marks":[],"text":", with ","_key":"16e767f9b974","_type":"span"},{"marks":["a2a56935d41d"],"text":"$_$","_key":"c3518d392a2a","_type":"span"},{"_key":"5fc72eb5220f","_type":"span","marks":[],"text":" roughly corresponding to the total supply of liquidity tokens."}],"_type":"block","style":"normal","_key":"57aa48b79105"},{"style":"normal","_key":"9c2f0c033fe8","markDefs":[{"_type":"link","href":"https://yield.is/YieldSpace.pdf","_key":"17595731e3f8"},{"math":{"_type":"latex","body":"P"},"_key":"c79e941a5a2a","_type":"math"},{"_type":"math","math":{"body":"X","_type":"latex"},"_key":"a809a4d56a42"},{"_key":"52253a0d007e","_type":"math","math":{"_type":"latex","body":"Y"}},{"_key":"63d5ca3696c3","_type":"math","math":{"_type":"latex","body":"P"}},{"_type":"math","math":{"body":"-\\frac{dy}{dx}","_type":"latex"},"_key":"5a3c35f242c3"}],"children":[{"text":"We will use ","_key":"8abe261ece320","_type":"span","marks":[]},{"marks":["c79e941a5a2a"],"text":"$_$","_key":"25f5c3ebf143","_type":"span"},{"_type":"span","marks":[],"text":" to refer to the price of asset ","_key":"7e0276818b73"},{"_type":"span","marks":["a809a4d56a42"],"text":"$_$","_key":"e30446e261ab"},{"_type":"span","marks":[],"text":" in terms of asset ","_key":"636664097e16"},{"_type":"span","marks":["52253a0d007e"],"text":"$_$","_key":"e9be82ce002c"},{"text":". ","_key":"2237007f9a8e","_type":"span","marks":[]},{"_key":"35255958f76b","_type":"span","marks":["63d5ca3696c3"],"text":"$_$"},{"_type":"span","marks":[],"text":" is equivalent to the negated derivative of the reserves curve, ","_key":"1de725691306"},{"_type":"span","marks":["5a3c35f242c3"],"text":"$_$","_key":"62046b3496da"},{"_type":"span","marks":[],"text":". (For more background on thinking about AMMs in terms of derivatives, see the ","_key":"416fc5300153"},{"_type":"span","marks":["17595731e3f8"],"text":"YieldSpace paper","_key":"8abe261ece321"},{"_type":"span","marks":[],"text":").","_key":"8abe261ece322"}],"_type":"block","asset":null}]},{"_type":"richTextBlock","_key":"ea43c35ae51c","content":[{"style":"h4","_key":"edfbe5436bcb","markDefs":[],"asset":null,"children":[{"_key":"f10432a6f9c60","_type":"span","marks":[],"text":"Uniswap v3"}],"_type":"block"},{"markDefs":[{"_type":"math","math":{"_type":"latex","body":"L"},"_key":"1d0216b2e603"},{"_type":"math","math":{"_type":"latex","body":"t_i"},"_key":"3791a2fc9ade"}],"asset":null,"children":[{"_key":"b6db2842c1c00","_type":"span","marks":[],"text":"In Uniswap v3, anyone can create a position to provide some amount of liquidity—"},{"marks":["1d0216b2e603"],"text":"$_$","_key":"bc015390a5fe","_type":"span"},{"_type":"span","marks":[],"text":"—within a price range between two ticks. Tick indexes (","_key":"99ceaaca6363"},{"_type":"span","marks":["3791a2fc9ade"],"text":"$_$","_key":"9a4e48468e35"},{"_type":"span","marks":[],"text":") are logarithmic in price, and specify the lower and upper prices at which that position provides liquidity.","_key":"cfcf5b4eb159"}],"_type":"block","style":"normal","_key":"40a7a1393518"},{"_key":"f68b78856b27","markDefs":[{"_type":"link","href":"https://uniswap.org/whitepaper-v3.pdf","_key":"f36cb74f8c34"}],"children":[{"_key":"88cc863e9a910","_type":"span","marks":[],"text":"As shown in the "},{"_type":"span","marks":["f36cb74f8c34"],"text":"Uniswap v3 whitepaper","_key":"88cc863e9a911"},{"marks":[],"text":", this is the trading function that describes the relationship between the reserves of a single Uniswap v3 position while its liquidity is in range:","_key":"88cc863e9a912","_type":"span"}],"_type":"block","style":"normal","asset":null}]},{"_type":"mathBlock","_key":"63797f052f93","content":"(x + x_{offset})\\cdot (y + y_{offset}) = L^2"},{"_type":"mathBlock","_key":"594bfde40341","content":"x_{offset} = \\frac{L}{\\sqrt{p_{upper}}}"},{"_type":"mathBlock","_key":"fdd759649237","content":"y_{offset} = L \\cdot \\sqrt{p_{lower}}"},{"_type":"richTextBlock","_key":"837685e58e98","content":[{"style":"normal","_key":"89c227824129","markDefs":[],"children":[{"_type":"span","marks":[],"text":"","_key":"ab683452fb38"}],"_type":"block","asset":null},{"_type":"imageAlt","_key":"80b9ecc22ce9","asset":{"_updatedAt":"2024-03-27T22:04:05Z","extension":"png","uploadId":"9ar6xRl2NhvIw2PKFxRIu7OHnLOs6xpC","_rev":"fJ5kTC1ce5tfqRqKTRAZYm","url":"https://cdn.sanity.io/images/dgybcd83/production/56ea79bd7596b069109047134e28fec3b15efc24-1024x933.png","_id":"image-56ea79bd7596b069109047134e28fec3b15efc24-1024x933-png","metadata":{"_type":"sanity.imageMetadata","palette":{"muted":{"foreground":"#fff","title":"#fff","population":0,"background":"#947058","_type":"sanity.imagePaletteSwatch"},"lightVibrant":{"background":"#d5bba2","_type":"sanity.imagePaletteSwatch","foreground":"#000","title":"#fff","population":0.18},"darkVibrant":{"background":"#5b4129","_type":"sanity.imagePaletteSwatch","foreground":"#fff","title":"#fff","population":0},"lightMuted":{"title":"#fff","population":0.01,"background":"#acccc5","_type":"sanity.imagePaletteSwatch","foreground":"#000"},"vibrant":{"background":"#af7e4f","_type":"sanity.imagePaletteSwatch","foreground":"#fff","title":"#fff","population":0},"dominant":{"foreground":"#000","title":"#fff","population":0.18,"background":"#d5bba2","_type":"sanity.imagePaletteSwatch"},"_type":"sanity.imagePalette","darkMuted":{"title":"#fff","population":0.01,"background":"#573f2d","_type":"sanity.imagePaletteSwatch","foreground":"#fff"}},"hasAlpha":false,"lqip":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/ElEQVQ4jY2T627lIAyEz/s/5KpqmgshCSkBbGObrIDT7nZVrfr9ipKMsfHMo5QiIswsqqWU+y9EBBETQEopNlJ7QEQRue/7oaqICACUM4t86osWAHj33jln1nWe56kxz/O+74hYSqliAEgASETMqtrVqppiPE/n3DHN08vLy6/G6+urtRYAqlhUE0AIIQIkotr8x8kIcPnTvztr7ThOb41lWc7zJKIqZhHvvbV22/fT+8z8ObOK5JwzUZ+rNpgSIuacVbXOjIi9sDFmOw4kur+j30X5eqOPEMI8z9u2xRhDSkCkX//4Dw/v/fg2nMdeFyaCOfPH2D8ST2/DuVvlrKUQM7ad/0gMAMdmr3MXrqsTVcwZuS7tnwm/EYtItU7wQulWKUWrnrneKYvUvTe+FWs1CUKKSqkw3sJ3Oz/X+WsJzDkhRoDcLKSlfLb0dBgAKFNhLBmK5KJStLaQRSDn7ThmY3yM1Gp1Iz7F3e5EmAkJYk4XRQ/RQwoAKcRojBnH8d17aC0kAG5eepRSiKglJqaWnxQuf7rNTMs0mGVZG9ba67r6MSklZn4Gg5mbCxvVkDml5Nyxrsau9jiOLnt+JMpEz0iGELz3IYRe9bqu0PDX9d7488b76wNEVNXHuq7DMCzL4lxPz9ijY4zp6e09T9M0DEP/Oo6jc46ZfwPOcxL/gxR0EAAAAABJRU5ErkJggg==","dimensions":{"_type":"sanity.imageDimensions","width":1024,"aspectRatio":1.097534833869239,"height":933},"isOpaque":true,"blurHash":"e5Ss50-pt7IVxu_NtRIUMxxt00.8%gM{xu_2-;%MNGkDxuR*RPs:Rj"},"mimeType":"image/png","path":"images/dgybcd83/production/56ea79bd7596b069109047134e28fec3b15efc24-1024x933.png","_createdAt":"2024-03-27T22:04:05Z","_type":"sanity.imageAsset","originalFilename":"Screen-Shot-2021-06-01-at-11.31.25-AM-1024x933.png","sha1hash":"56ea79bd7596b069109047134e28fec3b15efc24","size":85591,"assetId":"56ea79bd7596b069109047134e28fec3b15efc24"}},{"_type":"block","style":"normal","_key":"3389e2b6d72f","markDefs":[],"asset":null,"children":[{"_type":"span","marks":[],"text":"If a strategy involves providing liquidity in multiple positions, these definitions defined in terms of total reserves will no longer apply.","_key":"7144233361b30"}]},{"markDefs":[],"children":[{"_type":"span","marks":[],"text":"It would therefore be helpful to find a ","_key":"b979be533ff60"},{"_type":"span","marks":["em"],"text":"local","_key":"b979be533ff61"},{"_key":"b979be533ff62","_type":"span","marks":[],"text":" definition for liquidity, that describes liquidity in its conventional sense: the pool's resistance to price impact when someone is trading with it."}],"_type":"block","style":"normal","_key":"b573635200e5","asset":null},{"markDefs":[{"_type":"math","math":{"_type":"latex","body":"L"},"_key":"d4d642f03310"},{"_type":"math","math":{"_type":"latex","body":"y"},"_key":"3a241827c284"},{"_type":"math","math":{"body":"Y","_type":"latex"},"_key":"7cbaedf0d1f4"},{"_type":"math","math":{"_type":"latex","body":"\\sqrt{P}"},"_key":"0e6015c14c05"},{"_type":"math","math":{"_type":"latex","body":"Y"},"_key":"09fac37c6da8"}],"children":[{"text":"As shown in Appendix A, it turns out that ","_key":"335bc42af1570","_type":"span","marks":[]},{"marks":["d4d642f03310"],"text":"$_$","_key":"b845c33e32ce","_type":"span"},{"marks":[],"text":" can also be defined as the rate of change of ","_key":"82c7d46dfaaf","_type":"span"},{"_type":"span","marks":["3a241827c284"],"text":"$_$","_key":"08cd8741d9c2"},{"text":"(the reserves of the ","_key":"bb1cf64e4af1","_type":"span","marks":[]},{"_type":"span","marks":["7cbaedf0d1f4"],"text":"$_$","_key":"9369571acc9b"},{"_type":"span","marks":[],"text":" token) for a given change in ","_key":"0ca2b4aa945f"},{"text":"$_$ ","_key":"53e7ada8b1fe","_type":"span","marks":["0e6015c14c05"]},{"_key":"de59724adfcf","_type":"span","marks":[],"text":"(the square root of the price of the "},{"_key":"bfd56145c271","_type":"span","marks":["09fac37c6da8"],"text":"$_$"},{"_type":"span","marks":[],"text":" token in terms of the token):","_key":"93ec8d871daa"}],"_type":"block","style":"normal","_key":"acc2ab455d47","asset":null}]},{"_type":"mathBlock","_key":"9195971d3172","content":"L = \\frac{dy}{d\\sqrt{P}}"},{"_type":"richTextBlock","_key":"5bebefddb2ac","content":[{"markDefs":[],"children":[{"_type":"span","marks":[],"text":"Simulating other curves","_key":"9486c1d8b8500"}],"_type":"block","asset":null,"style":"h2","_key":"4d322bad6a9a"},{"_type":"block","style":"normal","_key":"8e0e44d71ddb","markDefs":[],"children":[{"_type":"span","marks":[],"text":"How can liquidity providers use Uniswap v3 to simulate a custom curve? One intuitive way to do so is to create many different positions, with a custom amount of liquidity in each:","_key":"6b47b1888ed90"}],"asset":null},{"children":[{"_type":"span","marks":[],"text":"","_key":"631646c04182"}],"_type":"block","style":"normal","_key":"05a22c6619d4","asset":null,"markDefs":[]},{"_type":"imageAlt","_key":"53cc75282850","asset":{"_type":"sanity.imageAsset","sha1hash":"ed1c3051afc3bc3dd65b937813d99a2be3300d27","size":36828,"assetId":"ed1c3051afc3bc3dd65b937813d99a2be3300d27","_updatedAt":"2024-03-27T22:07:35Z","url":"https://cdn.sanity.io/images/dgybcd83/production/ed1c3051afc3bc3dd65b937813d99a2be3300d27-1024x763.png","extension":"png","_rev":"UG56EofSoBsGE3eKtgt6ub","_id":"image-ed1c3051afc3bc3dd65b937813d99a2be3300d27-1024x763-png","originalFilename":"Screen-Shot-2021-06-01-at-11.31.36-AM-1-1024x763.png","metadata":{"blurHash":"VGR{#}xs~lt8Rp_2WBM|ofj]^[WF4tt3xoWJt6%KWCoa","_type":"sanity.imageMetadata","palette":{"darkMuted":{"background":"#676767","_type":"sanity.imagePaletteSwatch","foreground":"#fff","title":"#fff","population":0.58},"muted":{"background":"#989898","_type":"sanity.imagePaletteSwatch","foreground":"#000","title":"#fff","population":1.1},"lightVibrant":{"population":0.04,"background":"#847bf9","_type":"sanity.imagePaletteSwatch","foreground":"#fff","title":"#fff"},"darkVibrant":{"_type":"sanity.imagePaletteSwatch","foreground":"#fff","title":"#fff","population":2.02,"background":"#35337f"},"lightMuted":{"foreground":"#000","title":"#000","population":0.53,"background":"#c9c9c9","_type":"sanity.imagePaletteSwatch"},"vibrant":{"population":0.06,"background":"#5e52db","_type":"sanity.imagePaletteSwatch","foreground":"#fff","title":"#fff"},"dominant":{"_type":"sanity.imagePaletteSwatch","foreground":"#fff","title":"#fff","population":2.02,"background":"#35337f"},"_type":"sanity.imagePalette"},"hasAlpha":false,"lqip":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB1ElEQVQokZ2Sa0/bMBSG8/9/xQQUtqkX0NSW7/ChYtOY6JhKg1C7fkgcx7nUiX3O8SVbk1I0CaFtrywd2X4f+8ivg+ZZ1loAICLvffN3CrrivTfG1HWttXbO/RvcNA0RSSn/B3bOSSk553VdH9r2fj/egn3bM+d8s9lUVfV8XKN1I6tGqcbaN2EiYoytVisppfc7d1E24aO7/eYWC5emnuiVFoID3N0spdyRhf9+76aX1B/SeGI+f7GMvcIHXbHWSVmlqShLlQp3/8NOL6l3hic9fP+Bzi/o5sZGkdf6D/4QVYNo0rQKH9VsRuMJnp7BuyM4OobeKRyfwGAIV9cUhrYs/SGNF9gYF0VqNqsnU33xSQ1H6mO/7g+q0ageDNXoXI0n+uoa1j8N4j6Ql5yd89utWa9xucQwxIcl3M23X2/FfF4uHvRyicsQn55QCHP4hPsH62bOeSKP6JEcgC3LKo65EIXShOh26+it7ew7f2CM0a0AABEBQGutlNJaV1VVFPl2WypVQyut97uI6JwLlFJJksRxnGVZnuec8ziOoyhKWsWtGGNpmgohOOeMsc5MRAEACCGSJCmKQkqZ53mSJIwx0SptxTnPsqwoiizLOOed+Tf8C29QVYim1OWLAAAAAElFTkSuQmCC","dimensions":{"_type":"sanity.imageDimensions","width":1024,"aspectRatio":1.3420707732634338,"height":763},"isOpaque":true},"uploadId":"nAlWypaZHPDSbxZDwucmg1CqJC0z6zv4","mimeType":"image/png","path":"images/dgybcd83/production/ed1c3051afc3bc3dd65b937813d99a2be3300d27-1024x763.png","_createdAt":"2024-03-27T22:07:35Z"}},{"_key":"27f258e4734d","markDefs":[{"_key":"7f57f70ae358","_type":"math","math":{"body":"L(t_i)","_type":"latex"}}],"asset":null,"children":[{"_type":"span","marks":[],"text":"The more narrow these \"slices\" are, the more accurately this will simulate the target curve. For this post, we will treat tick space as infinitely divisible, and imagine that a liquidity provider is allowed to provide any arbitrary function ","_key":"cc417e1acb6b0"},{"text":"$_$","_key":"d36af72e67f3","_type":"span","marks":["7f57f70ae358"]},{"_type":"span","marks":[],"text":" to provide that amount of liquidity at any tick.","_key":"dab56e0b08d5"}],"_type":"block","style":"normal"},{"style":"normal","_key":"e240128e7b92","asset":null,"markDefs":[{"_type":"math","math":{"_type":"latex","body":"L(t_i)"},"_key":"a02fda94c2d9"},{"_type":"math","math":{"_type":"latex","body":"t_i"},"_key":"3b79c1ea88b2"},{"_type":"math","math":{"_type":"latex","body":"\\ln(P)"},"_key":"fbc2aa846bfb"},{"_type":"math","math":{"_type":"latex","body":"e"},"_key":"d2fcb8e527d1"},{"math":{"_type":"latex","body":"L(t_i)"},"_key":"040f82f1374f","_type":"math"}],"children":[{"_type":"span","marks":[],"text":"Graphing the ","_key":"bd00ffeefa570"},{"_type":"span","marks":["a02fda94c2d9"],"text":"$_$","_key":"9ecee2c58de9"},{"_type":"span","marks":[],"text":" function shows us the \"liquidity fingerprint\" of these other AMMs. (For convenience in defining functions of ticks, we will define as ","_key":"759b4875cddd"},{"_type":"span","marks":["3b79c1ea88b2"],"text":"$_$","_key":"bd771a20e8b5"},{"_type":"span","marks":[],"text":" as ","_key":"140ffc65c6eb"},{"_type":"span","marks":["fbc2aa846bfb"],"text":"$_$","_key":"54bec59546bd"},{"_type":"span","marks":[],"text":", as if our tick size was ","_key":"e46d0ee8a554"},{"_type":"span","marks":["d2fcb8e527d1"],"text":"$_$","_key":"f55224fdf663"},{"_type":"span","marks":[],"text":".) Appendix B shows the steps to derive this ","_key":"411b69e5e8d0"},{"_type":"span","marks":["040f82f1374f"],"text":"$_$ ","_key":"29dcd115bddd"},{"_type":"span","marks":[],"text":"function from a given invariant.","_key":"c296c35a69b5"}],"_type":"block"},{"style":"normal","_key":"e0ca94ecddca","markDefs":[],"asset":null,"children":[{"_type":"span","marks":[],"text":"\n","_key":"dc7bb983d1f50"}],"_type":"block"}]},{"_type":"richTextBlock","_key":"8c85485a76aa","content":[{"markDefs":[],"children":[{"_type":"span","marks":[],"text":"Uniswap v2","_key":"ada080fd2ed50"}],"_type":"block","style":"h4","_key":"30d009f9ed8e","asset":null},{"children":[{"_type":"span","marks":[],"text":"The behavior of the reserves in ","_key":"9f2fc2f268800"},{"text":"Uniswap v2","_key":"9f2fc2f268801","_type":"span","marks":["de19d53365e9"]},{"_type":"span","marks":[],"text":" can be described with the following equation:","_key":"9f2fc2f268802"}],"_type":"block","style":"normal","asset":null,"_key":"247270c2016e","markDefs":[{"_type":"link","href":"https://uniswap.org/whitepaper.pdf","_key":"de19d53365e9"}]}]},{"_type":"mathBlock","_key":"572ed4e28b7c","content":"x \\cdot y = s^2"},{"_type":"richTextBlock","_key":"bb28908dd811","content":[{"_key":"9a2981072deb","markDefs":[],"asset":null,"children":[{"_key":"46ccc79ce4b6","_type":"span","marks":[],"text":""}],"_type":"block","style":"normal"},{"_type":"imageAlt","_key":"a24f62ccff78","asset":{"extension":"png","metadata":{"hasAlpha":false,"lqip":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAAsTAAALEwEAmpwYAAABQElEQVQ4jZ2S626DMAyFef8HLapKoYDjS2wnU+KOdZOm0R3xK/jLOXY81FrdnZlZJJuVUuppDaUUM0NEZGZVd38PVlUiIhHO2f4BIyKLsDbr92Bm3raNmbOqqPrptgd33/f9drsRkZq9lXwws3mex3FERHMX1ax6cuZDwNfrlYhKrbmbq1k5GRsAlmURkfbmpYhq8P5XgKGUIiIppZxzFLt7+Iuqmpl7uyVUf3mqA661xuaIGvf5t0GYZTN173nKzw0TEf8uM9PAVLn3wv1rE+n8F5xS6gveRET7vq/rum0bABARMxMzEiUi7jYNjpABRBEzA8A0TZfLZRzHaZoAgIk4Ktoey9M54Jxz6ooIYTvP87Isj8cDAI6/ImKvsd0dEaM0mPv9HtihuWtdVyKK8f90fvZGhIifGZ+NHIf6sn8fp5Ln17r7YmYAAAAASUVORK5CYII=","dimensions":{"_type":"sanity.imageDimensions","width":1024,"aspectRatio":1.147982062780269,"height":892},"isOpaque":true,"blurHash":"e8S~x5oft7%Ms:~qR*IUoLayM{t7xuofof?bt7j[WVWBofWBWBj[fk","_type":"sanity.imageMetadata","palette":{"lightVibrant":{"_type":"sanity.imagePaletteSwatch","foreground":"#000","title":"#000","population":0,"background":"#fcecf4"},"darkVibrant":{"background":"#721242","_type":"sanity.imagePaletteSwatch","foreground":"#fff","title":"#fff","population":0},"lightMuted":{"foreground":"#000","title":"#fff","population":0.01,"background":"#a9c4bd","_type":"sanity.imagePaletteSwatch"},"vibrant":{"_type":"sanity.imagePaletteSwatch","foreground":"#fff","title":"#fff","population":0,"background":"#dc227f"},"dominant":{"background":"#4a4a4a","_type":"sanity.imagePaletteSwatch","foreground":"#fff","title":"#fff","population":0.45},"_type":"sanity.imagePalette","darkMuted":{"background":"#4a4a4a","_type":"sanity.imagePaletteSwatch","foreground":"#fff","title":"#fff","population":0.45},"muted":{"population":0.08,"background":"#7c7c7c","_type":"sanity.imagePaletteSwatch","foreground":"#fff","title":"#fff"}}},"size":48114,"_updatedAt":"2024-03-27T22:13:16Z","assetId":"402e3686af48f5db5ae69ebec7e3af270baca8ed","_createdAt":"2024-03-27T22:13:16Z","uploadId":"dBakzrQdx0WktwEMKpTsok4r9DtUEoF9","_rev":"UG56EofSoBsGE3eKtgupBi","_type":"sanity.imageAsset","url":"https://cdn.sanity.io/images/dgybcd83/production/402e3686af48f5db5ae69ebec7e3af270baca8ed-1024x892.png","originalFilename":"Screen-Shot-2021-06-01-at-11.31.45-AM-1024x892.png","mimeType":"image/png","sha1hash":"402e3686af48f5db5ae69ebec7e3af270baca8ed","path":"images/dgybcd83/production/402e3686af48f5db5ae69ebec7e3af270baca8ed-1024x892.png","_id":"image-402e3686af48f5db5ae69ebec7e3af270baca8ed-1024x892-png"}},{"_type":"block","style":"normal","_key":"6fa57e06d379","markDefs":[],"children":[{"_type":"span","marks":[],"text":"The liquidity fingerprint of this reserves curve is a flat line:","_key":"434dd9a1bf170"}],"asset":null}]},{"_type":"mathBlock","_key":"d8e52aa1ecab","content":"L = s"},{"_type":"richTextBlock","_key":"57f07e49e9d5","content":[{"markDefs":[{"math":{"_type":"latex","body":"s"},"_key":"d7f59601debf","_type":"math"},{"_type":"math","math":{"_type":"latex","body":"t_{min}"},"_key":"0317c3cda561"},{"_type":"math","math":{"_type":"latex","body":"t_{max}"},"_key":"df227e82405a"}],"children":[{"text":"To simulate this curve in Uniswap v3, we can simply create a single position with liquidity ","_key":"5d96dcaa0e2c0","_type":"span","marks":[]},{"_type":"span","marks":["d7f59601debf"],"text":"$_$","_key":"b04e1cc987ee"},{"_key":"0e6fff23c9d5","_type":"span","marks":[],"text":", and set our tick boundaries to "},{"marks":["0317c3cda561"],"text":"$_$","_key":"0057f10b71da","_type":"span"},{"marks":[],"text":" and ","_key":"0eb1fd5add51","_type":"span"},{"_type":"span","marks":["df227e82405a"],"text":"$_$","_key":"7d48cba4af21"},{"_type":"span","marks":[],"text":".","_key":"c786d7fc2d19"}],"_type":"block","style":"normal","_key":"42f138e1d424","asset":null},{"_type":"block","style":"normal","asset":null,"_key":"b49c49ff8564","markDefs":[],"children":[{"_key":"7bfe19a1f314","_type":"span","marks":[],"text":""}]},{"_type":"imageAlt","_key":"345a57b09b50","asset":{"extension":"png","uploadId":"JXh5475q9Gw7FDlo1mUl4z4nmEgngrTr","_rev":"UG56EofSoBsGE3eKtgwAT1","mimeType":"image/png","url":"https://cdn.sanity.io/images/dgybcd83/production/fe8a436a9e9eb8a1dfb84094bc16f4509bdf3072-1024x713.png","_createdAt":"2024-03-27T22:15:51Z","path":"images/dgybcd83/production/fe8a436a9e9eb8a1dfb84094bc16f4509bdf3072-1024x713.png","_id":"image-fe8a436a9e9eb8a1dfb84094bc16f4509bdf3072-1024x713-png","_updatedAt":"2024-03-27T22:15:51Z","metadata":{"dimensions":{"_type":"sanity.imageDimensions","width":1024,"aspectRatio":1.4361851332398317,"height":713},"isOpaque":true,"blurHash":"VVRMf2a#^zt7%J?YayM}fRa$~kofD;fRM}D?j]%Jj[t5","_type":"sanity.imageMetadata","palette":{"_type":"sanity.imagePalette","darkMuted":{"background":"#2c2e36","_type":"sanity.imagePaletteSwatch","foreground":"#fff","title":"#fff","population":0.5},"muted":{"title":"#fff","population":0.02,"background":"#545ca9","_type":"sanity.imagePaletteSwatch","foreground":"#fff"},"lightVibrant":{"background":"#847bfb","_type":"sanity.imagePaletteSwatch","foreground":"#fff","title":"#fff","population":0.25},"darkVibrant":{"population":0.01,"background":"#140c96","_type":"sanity.imagePaletteSwatch","foreground":"#fff","title":"#fff"},"lightMuted":{"title":"#000","population":0.34,"background":"#cbcbcd","_type":"sanity.imagePaletteSwatch","foreground":"#000"},"vibrant":{"title":"#fff","population":0.52,"background":"#453ff3","_type":"sanity.imagePaletteSwatch","foreground":"#fff"},"dominant":{"title":"#fff","population":0.52,"background":"#453ff3","_type":"sanity.imagePaletteSwatch","foreground":"#fff"}},"hasAlpha":false,"lqip":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAABiElEQVQokZWSb2/TMBDG+/2/RhM7IK1/kFglNkiBlxN9szEoLyboItbEbROSOLk7xxfkpiOtGBJ79Ohsn/zzSb4btHsxM+1lrW3/W4NusdbWda21NsYw87NhrXVZls+GmRkAsizL86KDmdt/+VgDZjbG7Ha7+/tos8mqqqmBAdonTdQe/4mDiSiOk9vb7zef06/LZrm0XfziNvbx2Cy/2R8rW5Z9/a4yKbVZLFbns2wyxfEEz0Y4GtPZyHk8odHYJSdT+vDRxDFbe+Ad3DQmy35dXyfTV7mQ4AsYeuD5OBzi0ENfoOe7pAjwzQX9fLA9vP9qBqC7O/36vJQShOxuO9LzUUjHC4nBC7y4/AtmbpuGVyuczcogqGQAvqiFBE+4gjIAIV0MXsLlW3x4Ek4SurrS4VyH8+pd2Duc16GL1fx99WlRb7fNn54dhoS5RbRpSolCpTBRuF7XUVREUbGOIUlQKVIK05QQ+14d4McneiHidi8AOM6fDMkp3NsYUxRFnudEdJQ/gX8DEXwPrAc5V9sAAAAASUVORK5CYII="},"sha1hash":"fe8a436a9e9eb8a1dfb84094bc16f4509bdf3072","_type":"sanity.imageAsset","size":16179,"assetId":"fe8a436a9e9eb8a1dfb84094bc16f4509bdf3072","originalFilename":"Screen-Shot-2021-06-01-at-11.31.51-AM-1-1024x713.png"}},{"style":"h4","_key":"cb015e12b2ee","markDefs":[],"children":[{"marks":[],"text":"Curve (with constant chi)","_key":"9fda3a0c2ecb0","_type":"span"}],"_type":"block","asset":null},{"style":"normal","_key":"352c5c4edcda","markDefs":[{"_type":"link","href":"https://curve.fi/files/stableswap-paper.pdf","_key":"de1db87fcbef"},{"_key":"8e2d5e2bbf67","_type":"math","math":{"_type":"latex","body":"x"}}],"children":[{"_type":"span","marks":[],"text":"The formula used by Curve is described in the ","_key":"9622521e5e0b0"},{"_type":"span","marks":["de1db87fcbef"],"text":"StableSwap whitepaper","_key":"9622521e5e0b1"},{"text":". That paper first describes its invariant in terms of a constant amplification factor, ","_key":"9622521e5e0b2","_type":"span","marks":[]},{"_type":"span","marks":["8e2d5e2bbf67"],"text":"$_$","_key":"ceb33fe998b3"},{"_type":"span","marks":[],"text":". Their formula can be written as:","_key":"e5bc76308e36"}],"_type":"block","asset":null}]},{"_type":"mathBlock","_key":"b8c5d6517fd6","content":"2 \\chi s (x + y) + xy = 4 \\chi s^2 + s^2"},{"_type":"richTextBlock","_key":"dfc12c35b82f","content":[{"markDefs":[],"children":[{"marks":[],"text":"This reserves curve (with Uniswap v2 shown for comparison) looks like:","_key":"cb3574aa5a640","_type":"span"}],"_type":"block","style":"normal","_key":"c946aa1fc80e","asset":null},{"_key":"a1f220732c19","markDefs":[],"children":[{"_type":"span","marks":[],"text":"","_key":"f9a60a2fa387"}],"asset":null,"_type":"block","style":"normal"},{"_type":"imageAlt","_key":"63c9a6fc95bb","asset":{"extension":"png","_type":"sanity.imageAsset","size":53857,"_id":"image-0ed79a8e8df59421707b94056155ed3ac68aa916-1024x752-png","mimeType":"image/png","url":"https://cdn.sanity.io/images/dgybcd83/production/0ed79a8e8df59421707b94056155ed3ac68aa916-1024x752.png","assetId":"0ed79a8e8df59421707b94056155ed3ac68aa916","originalFilename":"Screen-Shot-2021-06-01-at-11.31.58-AM-1024x752.png","_createdAt":"2024-03-27T22:17:11Z","_updatedAt":"2024-03-27T22:17:11Z","metadata":{"_type":"sanity.imageMetadata","palette":{"muted":{"background":"#8c806e","_type":"sanity.imagePaletteSwatch","foreground":"#fff","title":"#fff","population":0.01},"lightVibrant":{"background":"#dec0a6","_type":"sanity.imagePaletteSwatch","foreground":"#000","title":"#fff","population":0.25},"darkVibrant":{"background":"#604023","_type":"sanity.imagePaletteSwatch","foreground":"#fff","title":"#fff","population":0},"lightMuted":{"foreground":"#000","title":"#fff","population":0,"background":"#a4bccc","_type":"sanity.imagePaletteSwatch"},"vibrant":{"foreground":"#fff","title":"#fff","population":0,"background":"#ba7b44","_type":"sanity.imagePaletteSwatch"},"dominant":{"_type":"sanity.imagePaletteSwatch","foreground":"#000","title":"#fff","population":0.25,"background":"#dec0a6"},"_type":"sanity.imagePalette","darkMuted":{"background":"#3c4444","_type":"sanity.imagePaletteSwatch","foreground":"#fff","title":"#fff","population":0}},"hasAlpha":false,"lqip":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAABhklEQVQokX2Sy7KbMBBE/f9fmGxcccoVMFj4YiTNe3RLEsFeJD6lHWrRM92n0jAzVXXXUry84e6iSkSAmBsAwMzu9dqp32BmRFAhN30Xq2pMcXksf4bhV+VyvV6XZWHml5iIMmRldOXidohFZHuuIcy/L5cflZ/n83maJiLaxeaGhClnqWIs1fzrz5DT9vwK9/vQmKZpXVcR2cXNW1q3jQhcsLw5d3dVFWFmpgYzi8g+c/e8LEt4PJpzqM4/4k25iwFgHMd7CBkBKQuD22vsD5zcPec8DEMIgZiQECEqY/n7/CdxKQURQwh9DVpTzYzJlP1t7f8Vq2pqtJ64mSijUGYG68lVF/8wcjpyBgDVumcv7YHamkh1hLpCN6kR1mPHQ28lybln0DEzEcbWS8asBMbo0o5x38guRsQYIyLWQBvYyhxT2mLcYowpIdRXGBMTWPP46vbR+y5b13WapnEc53leHl/PLab2FSAjYh+wio8mHYhISimEcLvd5nneto2YaxI71hv2DdCUbe8oTVuUAAAAAElFTkSuQmCC","dimensions":{"_type":"sanity.imageDimensions","width":1024,"aspectRatio":1.3617021276595744,"height":752},"isOpaque":true,"blurHash":"V5S?DU?bxuog.8?b%MIUIV-;9F?b-pIUt7~ptRWCV@j?"},"uploadId":"vl69REf1iy98YxJecV9Moc3gaAgTsnhm","_rev":"fJ5kTC1ce5tfqRqKTRBNMV","sha1hash":"0ed79a8e8df59421707b94056155ed3ac68aa916","path":"images/dgybcd83/production/0ed79a8e8df59421707b94056155ed3ac68aa916-1024x752.png"}},{"children":[{"text":"It turns out that with a constant ","_key":"46af07705caa0","_type":"span","marks":[]},{"_type":"span","marks":["65de117c83b2"],"text":"$_$","_key":"bbdd7d26632c"},{"_type":"span","marks":[],"text":", the liquidity provided by this formula is ","_key":"895d0b858687"},{"text":"exactly equivalent","_key":"46af07705caa1","_type":"span","marks":["em"]},{"text":" to a single Uniswap v3 position, if we set ","_key":"46af07705caa2","_type":"span","marks":[]},{"_type":"span","marks":["5a16b4c3ca35"],"text":"$_$","_key":"17ab3a0fa234"},{"text":"), and set the upper and lower prices to ","_key":"299dd77029e8","_type":"span","marks":[]},{"_key":"74302c4fe1de","_type":"span","marks":["2065a17d9b58"],"text":"$_$"},{"_type":"span","marks":[],"text":" and ","_key":"873cab489928"},{"_type":"span","marks":["d694f2c4d07c"],"text":"$_$","_key":"b7b947b221eb"},{"marks":[],"text":". This means that we can simulate this formula with a single position in Uniswap v3:","_key":"f50fede1873e","_type":"span"}],"_type":"block","style":"normal","asset":null,"_key":"2ae3a7eacafc","markDefs":[{"_type":"math","math":{"_type":"latex","body":"X"},"_key":"65de117c83b2"},{"math":{"_type":"latex","body":"L = s \\cdot (2\\chi + 1$)"},"_key":"5a16b4c3ca35","_type":"math"},{"_type":"math","math":{"_type":"latex","body":"{\\left(\\frac{2\\chi + 1}{2\\chi}\\right)}^2"},"_key":"2065a17d9b58"},{"_type":"math","math":{"_type":"latex","body":"{\\left(\\frac{2\\chi}{2\\chi + 1}\\right)}^2"},"_key":"d694f2c4d07c"}]},{"_type":"block","style":"normal","_key":"01694513f26e","markDefs":[],"children":[{"marks":[],"text":"","_key":"59d33ecafebd","_type":"span"}],"asset":null},{"asset":{"uploadId":"5BMmTtsvGr43HZ0kBN42jecbG63ygokV","path":"images/dgybcd83/production/5f6c34fec324faecaaad5a5058a23b4aa4c86337-850x706.png","originalFilename":"Screen-Shot-2021-06-01-at-11.32.04-AM.png","_rev":"JZ53jc7OhBIqTkyaonrNOs","_id":"image-5f6c34fec324faecaaad5a5058a23b4aa4c86337-850x706-png","sha1hash":"5f6c34fec324faecaaad5a5058a23b4aa4c86337","assetId":"5f6c34fec324faecaaad5a5058a23b4aa4c86337","_type":"sanity.imageAsset","mimeType":"image/png","url":"https://cdn.sanity.io/images/dgybcd83/production/5f6c34fec324faecaaad5a5058a23b4aa4c86337-850x706.png","size":11765,"_createdAt":"2024-03-27T22:19:20Z","_updatedAt":"2024-03-27T22:19:20Z","extension":"png","metadata":{"dimensions":{"aspectRatio":1.2039660056657224,"height":706,"_type":"sanity.imageDimensions","width":850},"isOpaque":true,"blurHash":"e9Ss54WB~et707~oRj9Iax%I^|xuD[xt?URst7?VofIcohWBobWBIV","_type":"sanity.imageMetadata","palette":{"darkMuted":{"background":"#444444","_type":"sanity.imagePaletteSwatch","foreground":"#fff","title":"#fff","population":0.08},"muted":{"_type":"sanity.imagePaletteSwatch","foreground":"#fff","title":"#fff","population":0.04,"background":"#84848e"},"lightVibrant":{"title":"#fff","population":4.63,"background":"#b3b4fc","_type":"sanity.imagePaletteSwatch","foreground":"#000"},"darkVibrant":{"population":0.09,"background":"#251f80","_type":"sanity.imagePaletteSwatch","foreground":"#fff","title":"#fff"},"lightMuted":{"foreground":"#000","title":"#000","population":0.25,"background":"#d6cde9","_type":"sanity.imagePaletteSwatch"},"vibrant":{"background":"#332eb3","_type":"sanity.imagePaletteSwatch","foreground":"#fff","title":"#fff","population":0.34},"dominant":{"background":"#b3b4fc","_type":"sanity.imagePaletteSwatch","foreground":"#000","title":"#fff","population":4.63},"_type":"sanity.imagePalette"},"hasAlpha":false,"lqip":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAABYlAAAWJQFJUiTwAAABdUlEQVQ4jZ3TTW/aQBAGYP7/r0lpemhCpLbkklsObYQhkRBgCbCxd5b9nt2ZymwCPpRI7ntdP/bs7usRMxNRjDGlREQ8JKMstdbW2qF+REQhBABQSsUY/wdLKbXWKaVhY6eUtNaHw0EpNXjsEMJut1sulwBApwzAzrnValUUhRDijInYOQbgtuXjkRE/xbPZrG3bjIk4BN5u+fmZn5745aV7yz8HGnnvy7Kcz+d97By/vfHkgce3/PjIVXUFI2Jd1+v1WkqZDyzj11e+u+ebMf+a8n5/BaeUjDFN05xP+4zvJzz++immXkkQMXZJ1qbFPH2/o5sv9OMnbXfpVN9LLhgRAUAIoZTSWhujAXRR2MmDv/0WplO/2Rjdiz0VucPMnCeXUgKA7AJCQFmqWWF//3GLhdnvj3np/I1c5A5nj4jhI94HY1zTHKtKCqGt9b0lj4i5Du/445IuCSHUdb3ZlE3T5Kf7ed/zterFGKWUVVUDyGt/219FwNxgYMRG/wAAAABJRU5ErkJggg=="}},"_type":"imageAlt","_key":"9f2e618f681b"},{"children":[{"_type":"span","marks":[],"text":"Curve in fact uses a non-constant ","_key":"9800a4b4772d0"},{"_type":"span","marks":["77a97eedf508"],"text":"$_$,","_key":"cd4beba9f415"},{"_type":"span","marks":[],"text":" which is defined (using our terminology) as ","_key":"a716560f149a"},{"_type":"span","marks":["bc34cdf23ec7"],"text":"$_$","_key":"670c1bd4aa7d"},{"text":", where A is a constant amplification factor. This leads to a more complicated equation that is harder to represent with a closed-form liquidity function. In follow-up work, I'll show how to approximate this and other curves numerically.","_key":"444f0ed9a674","_type":"span","marks":[]}],"_type":"block","style":"normal","asset":null,"_key":"a5aaaed4aeb3","markDefs":[{"math":{"body":"X","_type":"latex"},"_key":"77a97eedf508","_type":"math"},{"_type":"math","math":{"_type":"latex","body":"\\frac{Axy}{s^2}"},"_key":"bc34cdf23ec7"}]},{"style":"normal","_key":"41c52b692562","markDefs":[],"children":[{"_key":"f3b36c13acb90","_type":"span","marks":[],"text":"\n"}],"asset":null,"_type":"block"}]},{"_type":"richTextBlock","_key":"17d665d19b66","content":[{"_type":"block","style":"h4","_key":"752d4424afd9","markDefs":[],"children":[{"_key":"66cf9932c8760","_type":"span","marks":[],"text":"Balancer"}],"asset":null},{"_type":"block","style":"normal","_key":"4a25ad0ed980","markDefs":[{"_type":"link","href":"https://balancer.fi/whitepaper.pdf","_key":"de0e9b9f5365"},{"_type":"math","math":{"_type":"latex","body":"w_x"},"_key":"fe3f206a3553"},{"math":{"_type":"latex","body":"X"},"_key":"11058c7e1090","_type":"math"},{"math":{"_type":"latex","body":"w_x"},"_key":"74c0e6b0a4cd","_type":"math"},{"_type":"math","math":{"_type":"latex","body":"Y"},"_key":"5f0f0e8d96ee"},{"_key":"30d4f0c9c19f","_type":"math","math":{"_type":"latex","body":"1 - w_x"}}],"asset":null,"children":[{"_type":"span","marks":[],"text":"The reserves in a two-asset ","_key":"c1b8d0dee54b0"},{"_type":"span","marks":["de0e9b9f5365"],"text":"Balancer","_key":"c1b8d0dee54b1"},{"marks":[],"text":" pool can be described by this invariant, where ","_key":"c1b8d0dee54b2","_type":"span"},{"_type":"span","marks":["fe3f206a3553"],"text":"$_$ ","_key":"ae90056c52c3"},{"text":"is the weight of the ","_key":"b2ed9ea1ac05","_type":"span","marks":[]},{"_type":"span","marks":["11058c7e1090"],"text":"$_$","_key":"eef402359ea9"},{"_type":"span","marks":[],"text":" asset and ","_key":"96184b20e3d0"},{"_type":"span","marks":["74c0e6b0a4cd"],"text":"$_$","_key":"506ca6aaace8"},{"_type":"span","marks":[],"text":" is the weight of the ","_key":"6a2c2464b5f0"},{"marks":["5f0f0e8d96ee"],"text":"$_$","_key":"035175b15d84","_type":"span"},{"text":" asset (or ","_key":"9828e8e94530","_type":"span","marks":[]},{"_type":"span","marks":["30d4f0c9c19f"],"text":"$_$","_key":"6dd0ec8033e4"},{"marks":[],"text":"):","_key":"8a688a666090","_type":"span"}]},{"markDefs":[],"asset":null,"children":[{"text":"","_key":"f524bd95a0c1","_type":"span","marks":[]}],"_type":"block","style":"normal","_key":"abab226a7e7c"},{"_type":"imageAlt","_key":"3915b7521aa2","asset":{"mimeType":"image/png","_createdAt":"2024-03-27T22:24:28Z","_id":"image-d6dcbbe09c86e3c5724251269ecd58a79ac9d869-1024x954-png","extension":"png","_rev":"UG56EofSoBsGE3eKtgxi5e","_type":"sanity.imageAsset","sha1hash":"d6dcbbe09c86e3c5724251269ecd58a79ac9d869","url":"https://cdn.sanity.io/images/dgybcd83/production/d6dcbbe09c86e3c5724251269ecd58a79ac9d869-1024x954.png","path":"images/dgybcd83/production/d6dcbbe09c86e3c5724251269ecd58a79ac9d869-1024x954.png","size":81033,"_updatedAt":"2024-03-27T22:24:28Z","originalFilename":"Screen-Shot-2021-06-01-at-11.32.11-AM-1-1024x954.png","metadata":{"dimensions":{"_type":"sanity.imageDimensions","width":1024,"aspectRatio":1.0733752620545074,"height":954},"isOpaque":true,"blurHash":"e4S$ln?bR+oz-;~q%LD%IV%g4n?bxtM{xu_3-;xuV?oekWRPWBozad","_type":"sanity.imageMetadata","palette":{"_type":"sanity.imagePalette","darkMuted":{"background":"#515152","_type":"sanity.imagePaletteSwatch","foreground":"#fff","title":"#fff","population":1.51},"muted":{"foreground":"#fff","title":"#fff","population":0,"background":"#94846c","_type":"sanity.imagePaletteSwatch"},"lightVibrant":{"background":"#d7b89e","_type":"sanity.imagePaletteSwatch","foreground":"#000","title":"#fff","population":0.44},"darkVibrant":{"title":"#fff","population":0,"background":"#5d3f26","_type":"sanity.imagePaletteSwatch","foreground":"#fff"},"lightMuted":{"title":"#fff","population":0.01,"background":"#abc4c4","_type":"sanity.imagePaletteSwatch","foreground":"#000"},"vibrant":{"_type":"sanity.imagePaletteSwatch","foreground":"#fff","title":"#fff","population":0,"background":"#b47a4a"},"dominant":{"title":"#fff","population":1.51,"background":"#515152","_type":"sanity.imagePaletteSwatch","foreground":"#fff"}},"hasAlpha":false,"lqip":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAAAsTAAALEwEAmpwYAAACCklEQVQ4jYWT23LbIBCG/f5PmE46cS4cNbYsJBDLHlmlSIrjuO30G4ZhYH/2wHJYlsXdzazWurgvf1BrNTO9wzbjZTm4u6pmACZyk8Xb7g13J+Y5Q0ppGIa+70MIKSVErLU2MYuMMZYCrrRUu1fWWjPkMIa+vxyPxx9PTy8vL13XTdOkqrt4SilDroJL1QcxQJ7G4dqfX19ffz4/H4/H0+kUQtjFIhLTPEM2QTe+j3w7RSwFYJ7nFGNKaZ5nItrDRsRhHFOeTegzcn/w3/DPRVs2g0OtNcb46/19SkmVXbfIv5Xd/8ayLAczCyGc3t7GlFi4Ra70UPN/cVDVYRjeui7lTCLMaAxr5v5/sZlN09T3fUEUMxImzIJZha11wx7iHuh39oKllJi5ulutsuqpzIiFmERFzMRMrVqtVt2q1y3nrcNKKSKy3d7Ka2pCQsAIRECExETMJLINNXP3R/FXMdsd6spV0BhtnVVQhVTITL7EAICI992vqiKiwm0wNw2TclECoaLC38Q553LH9hOu12sIIcYIAOs2lJIB8t5h26fb/ayztAfjeZ4vl0vXdefzeRxHItqO1tNmWd3bU2Hr3UIrpRRcAYAYY1iZpgkAqJWMRYSIthwPRLSFN61cr9dhGMZPQgh935/P59tPzjnHGMdxLKW0DoOVm+eb841SSs55yxkRmXmz/O35AwUrUlfHw0HyAAAAAElFTkSuQmCC"},"uploadId":"tuFY5Bgsjs9A3K7cj1Fv1mXsVOiEBfvY","assetId":"d6dcbbe09c86e3c5724251269ecd58a79ac9d869"}},{"_type":"block","style":"normal","_key":"8ee46da2f099","markDefs":[],"children":[{"_type":"span","marks":[],"text":"","_key":"dfb40b9cd007"}],"asset":null}]},{"_type":"mathBlock","_key":"6023eea69ecc","content":"x^{w_x} \\cdot y^{w_y} = s"},{"_type":"richTextBlock","_key":"efaf3b7645a8","content":[{"children":[{"text":"In liquidity space, this corresponds to an exponential function:","_key":"3c9ef8510e310","_type":"span","marks":[]}],"_type":"block","style":"normal","_key":"c90fbca35e85","markDefs":[],"asset":null}]},{"_type":"mathBlock","_key":"c9526634d978","content":"L(t_i) = s \\cdot (2 {w_x}^{w_y} {w_y}^{w_x}) \\cdot e^{(w_x - \\frac{1}{2}) t_i}"},{"_type":"richTextBlock","_key":"9639e3747c14","content":[{"children":[{"_type":"span","marks":[],"text":"","_key":"36c54f02f8cd"}],"_type":"block","asset":null,"style":"normal","_key":"345d30a7ec0a","markDefs":[]},{"asset":{"url":"https://cdn.sanity.io/images/dgybcd83/production/94392b59d7215408efb7ddddd766b60d6ef3415b-1024x753.png","_updatedAt":"2024-03-27T22:31:17Z","extension":"png","metadata":{"_type":"sanity.imageMetadata","palette":{"darkVibrant":{"population":2.02,"background":"#3d3b8a","_type":"sanity.imagePaletteSwatch","foreground":"#fff","title":"#fff"},"lightMuted":{"population":0.04,"background":"#b0b6da","_type":"sanity.imagePaletteSwatch","foreground":"#000","title":"#fff"},"vibrant":{"title":"#fff","population":0.05,"background":"#5c54c3","_type":"sanity.imagePaletteSwatch","foreground":"#fff"},"dominant":{"background":"#b4b4fc","_type":"sanity.imagePaletteSwatch","foreground":"#000","title":"#fff","population":3.11},"_type":"sanity.imagePalette","darkMuted":{"foreground":"#fff","title":"#fff","population":0.41,"background":"#676767","_type":"sanity.imagePaletteSwatch"},"muted":{"title":"#fff","population":0.58,"background":"#989898","_type":"sanity.imagePaletteSwatch","foreground":"#000"},"lightVibrant":{"title":"#fff","population":3.11,"background":"#b4b4fc","_type":"sanity.imagePaletteSwatch","foreground":"#000"}},"hasAlpha":false,"lqip":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAABvUlEQVQokZWSa2/TMBSG8///Bhq9aFNBLTAuEmyTmNRVakvgw1q2D1OrJvElTnw7iX0cSDuqIkAr7xcfnePnfW3LUXOgEAIiNkcrOiTrugaA4/loXyGiUpZSrbVHDP8Bh9A455JExd/Uw4MHaDvHw8EYs1iQj5+K8dhlWXDuaT7aw2VZxvHq9Rs+HMF05hl7mo8e1xCklPHX9egV6/VhOKonE7fZBGsbxH9aRAfHtoslOT8X3R50e9XgRX155ZdL5HkAaC12T/O35KZxzq9W+v0H1enCSad6dlI971TDUf352t3e+vUaKUUp27v8mdwghiyrLq/02UCfnpn+qen2dK+vBy/N23f24sKOx7D8XkmJ+/zDT9JI6e7u7PyLnc3tdGrGN+X1NbuZFNOZns1NHNv7e5DS/waHX/I+AKDWXmsvpWNMbTaUsVKqWiqvlDfGO/e4uYURsaoqay0AVFvZVsZaq7UqCqGU3E0BYDtqa7f1iOq6zvM8yzLOeVEUnPM0TZMkoZQSQpIkSdOUUsoYp5SmWzHGjDGIGHnvy7KklAohpJRCCELIzosxlmUZIYRzLoTI83znyDm31v5M/gH2YFe3YsqxfwAAAABJRU5ErkJggg==","dimensions":{"_type":"sanity.imageDimensions","width":1024,"aspectRatio":1.3598937583001327,"height":753},"isOpaque":true,"blurHash":"VFS6PsN2~l_0%L_2RkIWxst6^[%J9LD,Rkojxt-,IXIW"},"uploadId":"PPrDUOKoddU3BpUk4NbbEor9zKOiEEXh","_rev":"JZ53jc7OhBIqTkyaonseSm","path":"images/dgybcd83/production/94392b59d7215408efb7ddddd766b60d6ef3415b-1024x753.png","_createdAt":"2024-03-27T22:31:17Z","mimeType":"image/png","sha1hash":"94392b59d7215408efb7ddddd766b60d6ef3415b","_id":"image-94392b59d7215408efb7ddddd766b60d6ef3415b-1024x753-png","size":36317,"assetId":"94392b59d7215408efb7ddddd766b60d6ef3415b","originalFilename":"Screen-Shot-2021-06-01-at-11.32.22-AM-1024x753.png","_type":"sanity.imageAsset"},"_type":"imageAlt","_key":"c9815d9c83be"},{"markDefs":[{"_type":"math","math":{"_type":"latex","body":"X"},"_key":"9bec4870935f"},{"_type":"math","math":{"_type":"latex","body":"X"},"_key":"318e91e4a0d8"},{"_type":"math","math":{"_type":"latex","body":"X"},"_key":"4de4d81e9a12"},{"_type":"math","math":{"_type":"latex","body":"Y"},"_key":"af1b98e5a44d"}],"children":[{"_type":"span","marks":[],"text":"Intuitively, when asset ","_key":"94980e6f53540"},{"_type":"span","marks":["9bec4870935f"],"text":"$_$","_key":"f9350e7ef2db"},{"_type":"span","marks":[],"text":" is weighted less heavily, more of the pool's liquidity is reserved for lower prices of asset ","_key":"d2fe7603ac84"},{"_type":"span","marks":["318e91e4a0d8"],"text":"$_$","_key":"2a5aaf1382b0"},{"_key":"748e85c8d280","_type":"span","marks":[],"text":". This makes sense, because at any given time, liquidity reserved for lower prices is effectively buy orders for asset "},{"_type":"span","marks":["4de4d81e9a12"],"text":"$_$","_key":"d9a46ce68d74"},{"_type":"span","marks":[],"text":", so it is currently held in asset ","_key":"61ff2c836ced"},{"_type":"span","marks":["af1b98e5a44d"],"text":"$_$","_key":"e85fcd68aa21"},{"_type":"span","marks":[],"text":".","_key":"4665657d273d"}],"_type":"block","asset":null,"style":"normal","_key":"46e8add0d3a6"}]},{"_type":"richTextBlock","_key":"145750ca6e65","content":[{"_type":"block","style":"h4","_key":"d9efe5234233","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Logarithmic market scoring rule","_key":"69368e09b4c40"}],"asset":null},{"_type":"block","style":"normal","_key":"afd728832094","markDefs":[{"_type":"link","href":"https://mason.gmu.edu/~rhanson/mktscore.pdf","_key":"ec7baaab3373"}],"children":[{"text":"The ","_key":"606ab5be65ee0","_type":"span","marks":[]},{"_type":"span","marks":["ec7baaab3373"],"text":"logarithmic market scoring rule","_key":"606ab5be65ee1"},{"_type":"span","marks":[],"text":" (LMSR) is one of the first and most widely studied automated market makers. The two-asset case is best known for its application to a binary prediction market (i.e., between YES and NO shares), where the price of the two assets (in cash) adds up to 1.","_key":"606ab5be65ee2"}],"asset":null},{"asset":null,"children":[{"_key":"dd789525b6720","_type":"span","marks":[],"text":"Typically, LMSR is described in terms of the rule for market-making between each asset (YES and NO) and cash. We could instead describe it in terms of the rule for market-making between one asset and the other. If we do that, then as explained "},{"_type":"span","marks":["a38634f4fad0"],"text":"here","_key":"dd789525b6721"},{"_type":"span","marks":[],"text":", the reserves can be described by this invariant:","_key":"dd789525b6722"}],"_type":"block","style":"normal","_key":"fb4d19fb5a83","markDefs":[{"href":"https://docs.gnosis.io/conditionaltokens/docs/introduction3/","_key":"a38634f4fad0","_type":"link"}]}]},{"_type":"mathBlock","_key":"dd8a0646df98","content":"2^{-\\frac{x}{s}} + 2^{-\\frac{y}{s}} = 1"},{"_type":"richTextBlock","_key":"ad48cd9b04cc","content":[{"children":[{"_type":"span","marks":[],"text":"The reserves curve for this formula looks like:","_key":"22b4e2e3489d0"}],"_type":"block","asset":null,"style":"normal","_key":"8125aa7e2395","markDefs":[]},{"_key":"9eb80895b297","markDefs":[],"children":[{"_type":"span","marks":[],"text":"","_key":"ac6dd8a957b8"}],"_type":"block","asset":null,"style":"normal"},{"asset":{"uploadId":"oqj0fan91DRs7XcrMSrNv1KPzmknfNlZ","_rev":"UG56EofSoBsGE3eKth0Qg4","sha1hash":"88efce5e03be75188aeadec4d2cbef7c327277e6","metadata":{"_type":"sanity.imageMetadata","palette":{"lightVibrant":{"foreground":"#000","title":"#fff","population":0.05,"background":"#e9af87","_type":"sanity.imagePaletteSwatch"},"darkVibrant":{"title":"#fff","population":0,"background":"#733b10","_type":"sanity.imagePaletteSwatch","foreground":"#fff"},"lightMuted":{"title":"#fff","population":0.01,"background":"#a5cecf","_type":"sanity.imagePaletteSwatch","foreground":"#000"},"vibrant":{"_type":"sanity.imagePaletteSwatch","foreground":"#000","title":"#fff","population":0.01,"background":"#eaa570"},"dominant":{"foreground":"#fff","title":"#fff","population":0.94,"background":"#4a4a4a","_type":"sanity.imagePaletteSwatch"},"_type":"sanity.imagePalette","darkMuted":{"_type":"sanity.imagePaletteSwatch","foreground":"#fff","title":"#fff","population":0.94,"background":"#4a4a4a"},"muted":{"background":"#b2926b","_type":"sanity.imagePaletteSwatch","foreground":"#000","title":"#fff","population":0.05}},"hasAlpha":false,"lqip":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAAAsTAAALEwEAmpwYAAACFElEQVQ4jZWTyY7bMBBE9f9fOHMy7HEk2VookeyN3aQCUjMTH5IgeTB8EFDF3qrLOaeUJImqlGxHKWbGzAgYAUKsAAA2oIGIRGRmnZkBIiAwQ1YpZkS07X5Z3Y++v1wu1+t1GIb5i2VZ5nle15WIOjONABGAMJpgNkXEbdvcut5ut7e3t/f391M/DMPj8Zim6fxHxE5VAaHWQZAYsiVmDvu2u/Uxjtfr9XK5fHx8DMMwjuPz+ZwazjlmbmIAImImoZgttSlIEq5+AN89V/8GM4tIzrljZuccIkpiwmCJj6McX5TG8Qc6733f9yEE1UQYhaDO/EX/Fzrn3O12897nnEUIwWvio/ynuNQNa3s8ZtN/ebwLIYzjGGM821OVOvNEJWvt9q8ldMy8bRsRnYOpBpayoCW0xLWET/1vXDpVjTEy86+pVr2qIGNgiipklrJpO9786vK5ZxF5XUkpJZu1VUdCTxiEYxLQRFmlGrWKfh2JvZAbZqZaU8NCSDUmWH8eo2eEbNqC0c7o9YYQMYTg9917H0KNVotTDDF47/d9DyEkka6UklL6lp0AwLIsfd/f7/dhGJZ5hhirafWt1kikqt3ZoaryC+fLzrkzffu+n3UhIjOras65lPIpTilt27au69ZYG9u27Y3z47Isj8fDOZdSOqdbxcdxiMg0TX3fT9M0z/PYeD6fZ/RPhmG43+/TNH2v5id7qktq9WWMLgAAAABJRU5ErkJggg==","dimensions":{"_type":"sanity.imageDimensions","width":1024,"aspectRatio":1.0385395537525355,"height":986},"isOpaque":true,"blurHash":"e3Ss4~_3_3o#M|-;xtRjIoIo00_2~paexu?a?b%MRiIUxuM_flogoe"},"url":"https://cdn.sanity.io/images/dgybcd83/production/88efce5e03be75188aeadec4d2cbef7c327277e6-1024x986.png","path":"images/dgybcd83/production/88efce5e03be75188aeadec4d2cbef7c327277e6-1024x986.png","assetId":"88efce5e03be75188aeadec4d2cbef7c327277e6","_updatedAt":"2024-03-27T22:33:51Z","extension":"png","_type":"sanity.imageAsset","mimeType":"image/png","size":87618,"_createdAt":"2024-03-27T22:33:51Z","_id":"image-88efce5e03be75188aeadec4d2cbef7c327277e6-1024x986-png","originalFilename":"Screen-Shot-2021-06-01-at-11.32.33-AM-1024x986.png"},"_type":"imageAlt","_key":"6e3cb966cc63"},{"children":[{"_type":"span","marks":[],"text":"When transformed into tick space, the liquidity fingerprint of this curve is shaped like—you guessed it—the hyperbolic secant function:","_key":"1e287c70e1290"}],"_type":"block","style":"normal","_key":"9b61f43d6a12","asset":null,"markDefs":[]},{"_type":"block","style":"normal","asset":null,"_key":"b906eb21111e","markDefs":[],"children":[{"_type":"span","marks":[],"text":"","_key":"23c9145a34550"}]}]},{"_type":"mathBlock","_key":"9d8f757baf9b","content":"L(t_i) = \\frac{s}{\\ln(2)} \\cdot \\operatorname{sech}{\\left(\\frac{t_i}{2}\\right)}"},{"_type":"richTextBlock","_key":"13d8d78eaded","content":[{"_type":"block","style":"normal","_key":"aec6fdf59615","markDefs":[],"children":[{"_type":"span","marks":[],"text":"","_key":"e5121bfd747a"}],"asset":null},{"_type":"imageAlt","_key":"a8448146a053","asset":{"extension":"png","sha1hash":"728ac7ead34a0f99b6694a362341576beebfdafd","_updatedAt":"2024-03-27T22:34:45Z","originalFilename":"Screen-Shot-2021-06-01-at-11.32.42-AM-1024x886.png","url":"https://cdn.sanity.io/images/dgybcd83/production/728ac7ead34a0f99b6694a362341576beebfdafd-1024x886.png","metadata":{"lqip":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAAsTAAALEwEAmpwYAAABsklEQVQ4jaWSbU/bMBCA8/9/B7AVirbxCSS2aZPKgJYxafCFDUErusSJ47w4fjnbd5masKibqr2wR/fB1vmxfWdH7X8QrU+I6IkyESHiP/nRMAohGGOcc3/vR8OxzrmmaQDgKbIxpqoqABhyRKv4g0xE3nshBGPMGDOYiG0Iv9si6mUAiON4sVgopXpN6zbLKI6xLMn5zX60Ls/nc6UUIknZ3t7iZOLfvPUfLwNj5NwGP1q/dpIkSmkp6eYGj1/78Riej+DlK3d27pOE1rrxc8MQ0RjDebVc2s9X4fDIPxvB9g5sbdutHbv/AiaTcH+PtaQQNnS7BfAPD3o6NYdHMN63o12zN17F7t4qDg7su/fw5avXmjbIzmGawvW1vbiw05k9n+oPp/XJSXV6pqYzM5vZy0/27s5pjb/W3P1NAsCmwVpiLUNRujgpl8ucc1XVoa6DlEFrDGG1+FFGRPiB6wAAa60xpmmklJVSylo7rDEdoSs9AgAhBOe8KIqyg3OepinnPM/zrINzLoQoiqJ/kTRNrbWPMuc8SZI8z/s0YyyO47TjWwdjLMsyIUSe532ql78DeNbRE2ESptsAAAAASUVORK5CYII=","dimensions":{"height":886,"_type":"sanity.imageDimensions","width":1024,"aspectRatio":1.1557562076749435},"isOpaque":true,"blurHash":"eFSPY1t7~kxuRp~oayIWofoe?RofD;axxoD]of?WazRkRjWBoba#N2","_type":"sanity.imageMetadata","palette":{"_type":"sanity.imagePalette","darkMuted":{"_type":"sanity.imagePaletteSwatch","foreground":"#fff","title":"#fff","population":0.32,"background":"#686868"},"muted":{"population":0.73,"background":"#999a99","_type":"sanity.imagePaletteSwatch","foreground":"#000","title":"#fff"},"lightVibrant":{"title":"#fff","population":0.06,"background":"#857bfa","_type":"sanity.imagePaletteSwatch","foreground":"#fff"},"darkVibrant":{"population":1.8,"background":"#3a3882","_type":"sanity.imagePaletteSwatch","foreground":"#fff","title":"#fff"},"lightMuted":{"_type":"sanity.imagePaletteSwatch","foreground":"#000","title":"#fff","population":0.05,"background":"#b1b8d8"},"vibrant":{"title":"#fff","population":0.08,"background":"#5d51ee","_type":"sanity.imagePaletteSwatch","foreground":"#fff"},"dominant":{"background":"#3a3882","_type":"sanity.imagePaletteSwatch","foreground":"#fff","title":"#fff","population":1.8}},"hasAlpha":false},"uploadId":"q7ZsH0GwiebvftaP5Hw67H6Qblcelx6c","_rev":"UG56EofSoBsGE3eKth14pz","_type":"sanity.imageAsset","size":36775,"mimeType":"image/png","path":"images/dgybcd83/production/728ac7ead34a0f99b6694a362341576beebfdafd-1024x886.png","assetId":"728ac7ead34a0f99b6694a362341576beebfdafd","_createdAt":"2024-03-27T22:34:45Z","_id":"image-728ac7ead34a0f99b6694a362341576beebfdafd-1024x886-png"}},{"_key":"b9e5eca01569","markDefs":[],"children":[{"text":"As you can see, LMSR concentrates more of its liquidity closer to tick 0 (the price of 1). In prediction markets, when YES and NO shares are equal, that implies a probability of 50%. So LMSR concentrates more liquidity to support probabilities around 50% than to support more extreme probabilities.","_key":"33dca168ec360","_type":"span","marks":[]}],"_type":"block","style":"normal","asset":null},{"markDefs":[],"children":[{"marks":[],"text":"Appendix B shows how this liquidity fingerprint can be computed.","_key":"b31bd802b4a70","_type":"span"}],"_type":"block","style":"normal","_key":"0aecc29247a3","asset":null}]},{"_type":"richTextBlock","_key":"9bc403261a38","content":[{"asset":null,"markDefs":[],"children":[{"_type":"span","marks":[],"text":"Future work","_key":"b26010314f6b0"}],"_type":"block","style":"h2","_key":"e64c7bbf7083"},{"_key":"832e422dacd9","asset":null,"markDefs":[],"children":[{"_type":"span","marks":[],"text":"This paper showed how several popular AMMs could be simulated using Uniswap v3, and showed how graphing curves in liquidity space provides insight into their unique ``liquidity fingerprints\". However, there are several limitations that need to be overcome before Uniswap v3 can be used to simulate most of these AMMs:","_key":"447391e86b4f0"}],"_type":"block","style":"normal"},{"children":[{"_type":"span","marks":[],"text":"Ticks are not infinitely divisible, and liquidity providers have to approximate this curve using the granular ticks available.","_key":"2ab25503be080"}],"level":1,"_type":"block","style":"normal","_key":"79bbe8cf9141","asset":null,"listItem":"bullet","markDefs":[]},{"listItem":"bullet","asset":null,"markDefs":[],"children":[{"_type":"span","marks":[],"text":"The gas cost of minting and burning is proportional to the number of ticks updated, so providing liquidity at custom levels across all of tick space would be insurmountably inefficient.","_key":"413abafc5b480"}],"level":1,"_type":"block","style":"normal","_key":"060624a686f4"},{"asset":null,"markDefs":[],"children":[{"_key":"1a6461e119610","_type":"span","marks":[],"text":"Finally, not every useful AMM can be easily represented as a function in liquidity space."}],"level":1,"_type":"block","style":"normal","_key":"a7d6ac3a9c07","listItem":"bullet"},{"children":[{"_key":"c18fa405d7c00","_type":"span","marks":[],"text":"Future work will demonstrate some techniques for getting around these problems using numerical approximation, as well as some smart contract tricks to make custom liquidity provision much more gas-efficient."}],"_type":"block","style":"normal","_key":"58bdb2c56709","markDefs":[],"asset":null}]},{"_type":"richTextBlock","_key":"35e904819633","content":[{"markDefs":[],"children":[{"_type":"span","marks":[],"text":"Appendices","_key":"04d4cd19fc260"}],"_type":"block","style":"h2","asset":null,"_key":"094c27a8149e"},{"_type":"block","style":"h4","_key":"eddfaf8286e2","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Appendix A: Definition of liquidity","_key":"61dbe2336bd10"}],"asset":null},{"_key":"34b5bc4351f0","markDefs":[{"math":{"_type":"latex","body":"\\frac{dy}{d\\sqrt{P}}"},"_key":"9845830bc72e","_type":"math"},{"_type":"math","math":{"body":"L","_type":"latex"},"_key":"e01961dc4c83"}],"children":[{"_type":"span","marks":[],"text":"We can show that in Uniswap v3, the derivative ","_key":"40f3d133bd270"},{"marks":["9845830bc72e"],"text":"$_$","_key":"d7b959386f98","_type":"span"},{"_type":"span","marks":[],"text":" is equal to ","_key":"a2fb1b738865"},{"marks":["e01961dc4c83"],"text":"$_$","_key":"f18a7d74e2c3","_type":"span"},{"text":".","_key":"5bf262342e64","_type":"span","marks":[]}],"_type":"block","style":"normal","asset":null},{"_key":"84ddcf852f5f","markDefs":[],"children":[{"_type":"span","marks":[],"text":"We start with the trading function (while the position is in range):","_key":"ac3b9024bf640"}],"_type":"block","style":"normal","asset":null}]},{"_type":"mathBlock","_key":"a2854049b35a","content":"(x + x_{offset})\\cdot (y + y_{offset}) = L^2"},{"_type":"richTextBlock","_key":"c8d47da2ebf2","content":[{"_type":"block","style":"normal","_key":"f4ff5f01113f","markDefs":[{"_type":"math","math":{"_type":"latex","body":"x"},"_key":"9fd02827ae4b"}],"asset":null,"children":[{"_type":"span","marks":[],"text":"Solving for ","_key":"429c06a749f80"},{"_type":"span","marks":["9fd02827ae4b"],"text":"$x$","_key":"6453cfd90769"},{"_type":"span","marks":[],"text":"(to use later):","_key":"d21ca2afd9bb"}]}]},{"_type":"mathBlock","_key":"dc93f58360d7","content":"x = \\frac{L^2}{y + y_{offset}} - x_{offset}"},{"_type":"richTextBlock","_key":"147a8a8b8bae","content":[{"_key":"c4a022e5894a","markDefs":[{"_type":"math","math":{"_type":"latex","body":"y"},"_key":"04575c2189a1"}],"asset":null,"children":[{"marks":[],"text":"Solving for ","_key":"183e4d3a5dda0","_type":"span"},{"_key":"d79aad667b2f","_type":"span","marks":["04575c2189a1"],"text":"$y$"},{"_key":"1a6c34912512","_type":"span","marks":[],"text":":"}],"_type":"block","style":"normal"}]},{"_type":"mathBlock","_key":"9d34ea6f18ae","content":"y = \\frac{L^2}{x + x_{offset}} - y_{offset}"},{"_type":"richTextBlock","_key":"60a5765accf6","content":[{"style":"normal","_key":"9ba584ef5cf8","markDefs":[{"_type":"math","math":{"_type":"latex","body":"P"},"_key":"3fac54311854"},{"_type":"math","math":{"_type":"latex","body":"x"},"_key":"62b71c1be0c0"},{"_type":"math","math":{"body":"-\\frac{dy}{dx}","_type":"latex"},"_key":"9bf4ec56c66d"}],"children":[{"_type":"span","marks":[],"text":"Finding ","_key":"77d78cf685450"},{"_type":"span","marks":["3fac54311854"],"text":"$P$","_key":"024d5c186fd5"},{"_type":"span","marks":[],"text":" as a function of ","_key":"a46b437e484e"},{"_type":"span","marks":["62b71c1be0c0"],"text":"$x$","_key":"0fe5c1055a7f"},{"_type":"span","marks":[],"text":" by taking ","_key":"2ab61ef2c2cd"},{"_type":"span","marks":["9bf4ec56c66d"],"text":"$-\\frac{dy}{dx}$","_key":"85c496d41e58"},{"_type":"span","marks":[],"text":":","_key":"b45622c6c487"}],"asset":null,"_type":"block"}]},{"_type":"mathBlock","_key":"3c9aa13dc55b","content":"P = \\frac{L^2}{\\left(x + x_{offset}\\right)^2}"},{"_type":"richTextBlock","_key":"b82f08c7aab4","content":[{"style":"normal","_key":"07127e0314c3","markDefs":[{"math":{"body":"\\sqrt{P}","_type":"latex"},"_key":"fc47d01ce3ef","_type":"math"}],"children":[{"_type":"span","marks":[],"text":"Solving for ","_key":"23d83cac743f0"},{"_type":"span","marks":["fc47d01ce3ef"],"text":"$\\sqrt{P}$","_key":"3728574d2492"},{"_type":"span","marks":[],"text":" instead:","_key":"db8b72c92872"}],"asset":null,"_type":"block"}]},{"_type":"mathBlock","_key":"d59cabc06a84","content":"\\sqrt{P} = \\frac{L}{x + x_{offset}}"},{"_type":"richTextBlock","_key":"bfb028a4f11f","content":[{"_key":"bc4a03e55511","asset":null,"markDefs":[{"_type":"math","math":{"_type":"latex","body":"x"},"_key":"d6cf1c4e435b"}],"children":[{"_type":"span","marks":[],"text":"Substituting for ","_key":"92614b9fad210"},{"_type":"span","marks":["d6cf1c4e435b"],"text":"$x$","_key":"ce85339ca3d2"},{"_type":"span","marks":[],"text":" and simplifying:","_key":"334ada253a2c"}],"_type":"block","style":"normal"}]},{"_type":"mathBlock","_key":"05aba3999244","content":"\\sqrt{P} = \\frac{y + y_{offset}}{L}"},{"_type":"richTextBlock","_key":"9cf66e721c68","content":[{"asset":null,"markDefs":[{"_type":"math","math":{"_type":"latex","body":"y"},"_key":"29d8a92d0add"}],"children":[{"_type":"span","marks":[],"text":"Solving for ","_key":"224eed1e33250"},{"_type":"span","marks":["29d8a92d0add"],"text":"$y$","_key":"21e76fcf649f"},{"_type":"span","marks":[],"text":":","_key":"393a3984aec7"}],"_type":"block","style":"normal","_key":"cce00af567c1"}]},{"_type":"mathBlock","_key":"dece92115f43","content":"y = L * \\sqrt{P} - y_{offset}"},{"_type":"richTextBlock","_key":"1ce0134b8bad","content":[{"markDefs":[],"children":[{"_type":"span","marks":[],"text":"Taking the derivative:","_key":"fcf4e0df3e6e0"}],"asset":null,"_type":"block","style":"normal","_key":"ef89342c3e10"}]},{"_type":"mathBlock","_key":"0b359d558324","content":"\\frac{dy}{d\\sqrt{P}} = L"},{"_type":"richTextBlock","_key":"b87c435abd3e","content":[{"children":[{"_type":"span","marks":[],"text":"Appendix B: Example derivation","_key":"4d3b238238810"}],"_type":"block","style":"h4","_key":"1de89bdf4b91","markDefs":[],"asset":null},{"_key":"04b0841348db","markDefs":[{"_key":"149b1741d777","_type":"math","math":{"_type":"latex","body":"y"}},{"_type":"math","math":{"_type":"latex","body":"\\sqrt{P}"},"_key":"751daf570667"},{"math":{"_type":"latex","body":"P"},"_key":"14767de55d88","_type":"math"},{"_type":"math","math":{"body":"y","_type":"latex"},"_key":"a0866a8db30a"},{"_key":"f0db18067a9d","_type":"math","math":{"_type":"latex","body":"x"}}],"asset":null,"children":[{"_type":"span","marks":[],"text":"This appendix shows how to go from an AMM formula defined as a trading function to a liquidity curve in tick space. We'll use LMSR as an example.\n\nAs shown in Appendix A, liquidity can be defined as the rate of change of ","_key":"fb4038c968ac0"},{"_type":"span","marks":["149b1741d777"],"text":"$y$","_key":"18cbc6a046e9"},{"_type":"span","marks":[],"text":" with respect to ","_key":"e0d69f7191cd"},{"_type":"span","marks":["751daf570667"],"text":"$\\sqrt{P}$","_key":"223c0a3d5767"},{"_type":"span","marks":[],"text":". Since ","_key":"f0d90143f1bd"},{"text":"$P$","_key":"1321fd6319f5","_type":"span","marks":["14767de55d88"]},{"_type":"span","marks":[],"text":" is simply -1 times the derivative of ","_key":"cce3507d56be"},{"text":"$y$","_key":"81c2696056ca","_type":"span","marks":["a0866a8db30a"]},{"_type":"span","marks":[],"text":" with respect to ","_key":"7ce2a7669a79"},{"_key":"90e844e19c18","_type":"span","marks":["f0db18067a9d"],"text":"$x$"},{"text":", we know that liquidity can be computed as:","_key":"701aacee8d01","_type":"span","marks":[]}],"_type":"block","style":"normal"}]},{"_type":"mathBlock","_key":"cde22e2b188b","content":"L = \\frac{dy}{d\\sqrt{-\\frac{dy}{dx}}}"},{"_type":"richTextBlock","_key":"a7142cd79db6","content":[{"_key":"dec8f65f7331","markDefs":[],"children":[{"_type":"span","marks":[],"text":"We start with the AMM defined as an invariant:","_key":"31ab59c9977e0"}],"_type":"block","style":"normal","asset":null}]},{"_type":"mathBlock","_key":"1608b3d06a08","content":"2^{-\\frac{x}{s}} + 2^{-\\frac{y}{s}} = 1"},{"_type":"richTextBlock","_key":"7d6898504f1b","content":[{"children":[{"_type":"span","marks":[],"text":"Solving for ","_key":"ca09a88a60a90"},{"text":"$y$","_key":"a8138ff04b56","_type":"span","marks":["9e3219f7a020"]},{"text":":","_key":"358dbf9ff416","_type":"span","marks":[]}],"_type":"block","style":"normal","_key":"5c8f55dc60b8","markDefs":[{"_key":"9e3219f7a020","_type":"math","math":{"_type":"latex","body":"y"}}],"asset":null}]},{"_type":"mathBlock","_key":"470637d429a2","content":"y = -s \\log_2{(1-2^{-\\frac{x}{s}})}"},{"_type":"richTextBlock","_key":"bc50ffbe6404","content":[{"asset":null,"children":[{"_type":"span","marks":[],"text":"Taking the derivative and negating it to get the price (of asset ","_key":"85075bcc57f70"},{"_key":"1ba128e4cda7","_type":"span","marks":["318656725012"],"text":"$X$"},{"_key":"575930cab421","_type":"span","marks":[],"text":" in terms of asset "},{"text":"$Y$","_key":"374a58e7fd9b","_type":"span","marks":["47ad85fdaf72"]},{"_key":"26913ee78e42","_type":"span","marks":[],"text":") as a function of "},{"_type":"span","marks":["1609a583800b"],"text":"$x$","_key":"7203cd802400"},{"marks":[],"text":":","_key":"c93de83910ab","_type":"span"}],"_type":"block","style":"normal","_key":"89645fb258bd","markDefs":[{"_type":"math","math":{"_type":"latex","body":"X"},"_key":"318656725012"},{"_type":"math","math":{"_type":"latex","body":"Y"},"_key":"47ad85fdaf72"},{"_type":"math","math":{"_type":"latex","body":"x"},"_key":"1609a583800b"}]}]},{"_type":"mathBlock","_key":"f1268d046995","content":"P_x(x) = -\\frac{dy}{dx} = \\frac{1}{2^{\\frac{x}{s}}-1}"},{"_type":"richTextBlock","_key":"3c82e05cad0d","content":[{"_type":"block","style":"normal","_key":"582955828749","markDefs":[{"_type":"math","math":{"_type":"latex","body":"y"},"_key":"74dd77f286f7"},{"_type":"math","math":{"_type":"latex","body":"x"},"_key":"eab611e29f76"},{"_type":"math","math":{"_type":"latex","body":"x"},"_key":"90d1b05d04c2"},{"_type":"math","math":{"_type":"latex","body":"y"},"_key":"b27a8d6df3d1"},{"_type":"math","math":{"_type":"latex","body":"y"},"_key":"662d03fb0e8a"},{"_key":"7deb5cffad3a","_type":"math","math":{"body":"x","_type":"latex"}},{"_type":"math","math":{"_type":"latex","body":"y"},"_key":"4a184538c41d"}],"children":[{"_key":"a4044020c3b80","_type":"span","marks":[],"text":"We then need to find the formula for that same price, but as a function of "},{"marks":["74dd77f286f7"],"text":"$y$","_key":"e17257fe40ac","_type":"span"},{"marks":[],"text":" rather than ","_key":"7cd6791aa104","_type":"span"},{"_type":"span","marks":["eab611e29f76"],"text":"$x$","_key":"1b4d41af4670"},{"_type":"span","marks":[],"text":". Since this curve (like the others described in this post) is symmetrical between ","_key":"b64db2f204b1"},{"_key":"111902a9b43a","_type":"span","marks":["90d1b05d04c2"],"text":"$x$"},{"_type":"span","marks":[],"text":" and ","_key":"9b891243687a"},{"_type":"span","marks":["b27a8d6df3d1"],"text":"$y$","_key":"53ca22335419"},{"_type":"span","marks":[],"text":", we can easily get the price as a function of ","_key":"492f7abc4476"},{"_type":"span","marks":["662d03fb0e8a"],"text":"$y$","_key":"6bd21b80927c"},{"_type":"span","marks":[],"text":" by replacing ","_key":"7144be8a9655"},{"_type":"span","marks":["7deb5cffad3a"],"text":"$x$","_key":"cef06424a173"},{"_type":"span","marks":[],"text":" with ","_key":"2268415c51d3"},{"_type":"span","marks":["4a184538c41d"],"text":"$y$","_key":"76015a9f0f0a"},{"_type":"span","marks":[],"text":" and taking the reciprocal:\n","_key":"185a45b76217"}],"asset":null},{"children":[{"_type":"span","marks":[],"text":"\n","_key":"b587ef56a4db0"}],"_type":"block","style":"normal","_key":"fcd2f513c08d","markDefs":[],"asset":null}]},{"_type":"mathBlock","_key":"d79ab9b70a60","content":"P_y(y) = 2^{\\frac{y}{s}} - 1"},{"_type":"richTextBlock","_key":"a68e5b356b10","content":[{"_type":"block","style":"normal","_key":"7d8905430725","asset":null,"markDefs":[{"_type":"math","math":{"_type":"latex","body":"y"},"_key":"b5793bff3c64"},{"_type":"math","math":{"body":"P","_type":"latex"},"_key":"041575ae9031"},{"math":{"_type":"latex","body":"\\sqrt{P}"},"_key":"279cc489ed36","_type":"math"}],"children":[{"_type":"span","marks":[],"text":"Next, we invert this to find ","_key":"59b7de0b90bc0"},{"_type":"span","marks":["b5793bff3c64"],"text":"$y$","_key":"825e0cb5a079"},{"text":" as a function of ","_key":"7e8b67e72d08","_type":"span","marks":[]},{"marks":["041575ae9031"],"text":"$P$","_key":"eeb9b8f1514f","_type":"span"},{"_type":"span","marks":[],"text":", and then rewrite it as a function of ","_key":"09d8a797b22d"},{"_type":"span","marks":["279cc489ed36"],"text":"$\\sqrt{P}$","_key":"58132d77ec47"},{"_type":"span","marks":[],"text":".","_key":"a32f44599acc"}]}]},{"_type":"mathBlock","_key":"44da6ad7fcfe","content":"y_{\\sqrt{P}}(\\sqrt{P}) = s \\log_2{(\\sqrt{P}^2+1)}"},{"_type":"richTextBlock","_key":"35ec47119951","content":[{"asset":null,"children":[{"_key":"6b663329fbad0","_type":"span","marks":[],"text":"Then we take the derivative with respect to "},{"_type":"span","marks":["fb51255b113c"],"text":"$\\sqrt{P}$","_key":"b534283b48ee"},{"text":":","_key":"c691d8cd17a8","_type":"span","marks":[]}],"_type":"block","style":"normal","_key":"379d89539b48","markDefs":[{"_type":"math","math":{"_type":"latex","body":"\\sqrt{P}"},"_key":"fb51255b113c"}]}]},{"_type":"mathBlock","_key":"9933b26b95e0","content":"L(\\sqrt{P}) = \\frac{dy}{d\\sqrt{P}} = \\frac{2s}{\\ln(2)} \\cdot \\frac{1}{\\sqrt{P}+\\frac{1}{\\sqrt{P}}}"},{"_type":"richTextBlock","_key":"6ba9f4771b36","content":[{"asset":null,"_type":"block","style":"normal","_key":"a9d4a81eb6ab","markDefs":[{"_type":"math","math":{"_type":"latex","body":"t_i"},"_key":"de59c5bf278e"},{"_key":"bee1375cb22f","_type":"math","math":{"_type":"latex","body":"ln(P)"}}],"children":[{"marks":[],"text":"Finally, we convert to tick space by rewriting this as a function of tick index ","_key":"74ecd1fbb7310","_type":"span"},{"_key":"ef7408304667","_type":"span","marks":["de59c5bf278e"],"text":"$t_i$"},{"_key":"1fcaf63064df","_type":"span","marks":[],"text":" ("},{"marks":["bee1375cb22f"],"text":"$ln(P)$","_key":"5fd69ba2ad33","_type":"span"},{"text":"):","_key":"27e0739529f0","_type":"span","marks":[]}]}]},{"_type":"mathBlock","_key":"788d87731352","content":"L(t_i) = \\frac{1}{\\ln(2)} \\cdot \\frac{2}{e^{\\frac{t_i}{2}}+e^{-\\frac{t_i}{2}}} = \\frac{s}{\\ln(2)} \\cdot \\operatorname{sech}{\\left(\\frac{t_i}{2}\\right)}"}],"seo":{"disallowRobots":null,"metaDescription":null,"metaKeywords":null,"openGraphDescription":"Uniswap v3 allows liquidity providers to provide custom amounts of liquidity in selected price ranges. This unlocks tremendous capital efficiency gains for liquidity providers who can manually adjust their exposure.","openGraphImage":{"_type":"image","_key":null,"alt":null,"lqip":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABZ0lEQVQokY1S2Y6CQBCcNw8UbxEl3ooagwoqiUc0+uD/f1FtqhI2Kx7Zh4Lp6aqenuoxuVwOn5DNZp/W1WoVQRDgcDhgPB6jUCg8cQjDjTQ+HVCr1bBarXA6neD7PmzbftEZy7JQLBaVJBgnHf1FJpNBqVTCfD5XwfV6jVarJS011DYaDRh+2u02er0e+v0+PM9Tolwui0QBr0aw4HA4xPF4xPl8xnK5lI6a0Wik7s1gMJAf0+kUi8VCJ4dhqCRjXm0ymYjDP/fY4f1+l5fb7RZRFGG/3ys2JJDIwgRPvVwueDwe6oQHcBD8bzYb5YkkjqJIRdkEeYZXcF1XhnOKnU5HBHZAAXP1eh3NZlOecV2pVMR1HEfX7Xa70jE29CUZRD6fl3ez2UxdsiCF715CMlXLsn5B/cuzofn063q9Io5jdfbtnaZh0gROlh3ebjfsdjtNPP3Iv+GlIP3hhFmQxtPb/xRKCv4AGPcZVkVSNAMAAAAASUVORK5CYII=","dimensions":{"_type":"sanity.imageDimensions","width":2400,"aspectRatio":1.7777777777777777,"height":1350},"url":"https://cdn.sanity.io/images/dgybcd83/production/b0682e41b7920026096735694ef3de5f45072d4c-2400x1350.png"},"twitterImage":null,"metaTitle":null,"openGraphTitle":"Uniswap v3: The Universal AMM","twitterTitle":null,"twitterDescription":null,"hideFromSitemap":null}},"__N_SSG":true},"page":"/[slug]/[postMonth]/[postSlug]","query":{"slug":"2021","postMonth":"06","postSlug":"uniswap-v3-the-universal-amm"},"buildId":"l8SbaQQM0om_yyzCyQlj0","isFallback":false,"dynamicIds":[72334,7333],"gsp":true,"scriptLoader":[{"src":"https://www.googletagmanager.com/gtag/js?id=G-1JXQV4JD0S","strategy":"afterInteractive"},{"id":"google-analytics","strategy":"afterInteractive","children":"\n      \t\t\t\twindow.dataLayer = window.dataLayer || [];       \t\t\t\tfunction gtag(){window.dataLayer.push(arguments);}       \t\t\t\tgtag('js', new Date());       \t\t\t\tgtag('config', 'G-1JXQV4JD0S');\n      \t\t\t"}]}</script></body></html>