<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Priority Is All You Need - Paradigm</title><meta name="description" content="Paradigm is a research-driven crypto investment firm that funds companies and protocols from their earliest stages."/><meta property="og:url" content="https://www.paradigm.xyz/2024/06/priority-is-all-you-need"/><meta property="og:title" content="Priority Is All You Need"/><meta property="og:site_name" content="Paradigm"/><meta property="og:description" content="In this post, we introduce MEV taxes, a mechanism that arbitrary applications can use to capture their own MEV. This mechanism could be used today on OP Stack L2s like OP Mainnet, Base, and Blast, because the block proposers on those chains follow a set of rules we call competitive priority ordering."/><meta property="og:image" content="https://cdn.sanity.io/images/dgybcd83/production/3ecc45d287288631b7478b0ac6aebd426282afd5-2400x1350.png?auto=format&amp;q=75&amp;w=1200&amp;format=png"/><meta name="twitter:site" content="@paradigm"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Priority Is All You Need - Paradigm"/><meta name="twitter:description" content="Paradigm is a research-driven crypto investment firm that funds companies and protocols from their earliest stages."/><meta name="twitter:url" content="https://www.paradigm.xyz/2024/06/priority-is-all-you-need"/><meta name="twitter:image" content="https://cdn.sanity.io/images/dgybcd83/production/fd732ebeb1c4d286fd7e3b5b25395d72452edeb6-2400x1260.png?auto=format&amp;q=75&amp;w=1200&amp;format=png"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2024-06-04"/><meta property="article:modified_time" content="2024-06-04"/><meta property="article:author" content="https://paradigm-vc.vercel.app/team/dan-robinson"/><meta property="article:author" content="https://paradigm-vc.vercel.app/team/dave-white"/><meta name="next-head-count" content="20"/><link rel="apple-touch-icon" sizes="180x180" href="../../favicon/apple-touch-icon.png"/><link rel="mask-icon" href="../../favicon/safari-pinned-tab.svg" color="#00d700"/><meta name="msapplication-TileColor" content="#00d700"/><link rel="icon" href="../../favicon/favicon.ico" sizes="any"/><link rel="icon" href="../../favicon/favicon.svg" type="image/svg+xml"/><link rel="manifest" href="../../favicon/site.webmanifest" crossorigin="use-credentials"/><meta name="theme-color" content="#00E100"/><link rel="preload" href="../../_next/static/css/36d742fa6f75af33.css" as="style"/><link rel="stylesheet" href="../../_next/static/css/36d742fa6f75af33.css" data-n-g=""/><link rel="preload" href="../../_next/static/css/5b6964bdff897f88.css" as="style"/><link rel="stylesheet" href="../../_next/static/css/5b6964bdff897f88.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="../../_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script defer="" src="../../_next/static/chunks/2334.fdd0fc2ee869ba74.js"></script><script src="../../_next/static/chunks/webpack-54ad8f2f0d9b23ef.js" defer=""></script><script src="../../_next/static/chunks/framework-cfbe8447b8b751ea.js" defer=""></script><script src="../../_next/static/chunks/main-9a281b117d523626.js" defer=""></script><script src="../../_next/static/chunks/pages/_app-64c08ce1425afd18.js" defer=""></script><script src="../../_next/static/chunks/175675d1-ea6ec12d1ec73e3b.js" defer=""></script><script src="../../_next/static/chunks/3114-9ad26c08e3a6fd59.js" defer=""></script><script src="../../_next/static/chunks/8294-352a030481cb472f.js" defer=""></script><script src="../../_next/static/chunks/1358-b6def54e6ad0bd04.js" defer=""></script><script src="../../_next/static/chunks/7213-de9885b5038b802a.js" defer=""></script><script src="../../_next/static/chunks/pages/[slug]/[postMonth]/[postSlug]-79dba873a1ad12ef.js" defer=""></script><script src="../../_next/static/l8SbaQQM0om_yyzCyQlj0/_buildManifest.js" defer=""></script><script src="../../_next/static/l8SbaQQM0om_yyzCyQlj0/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header><div class="lg:hidden fixed z-50 top-0 left-0 right-0 bg-white"><div class="px-container-mobile h-header-mobile flex justify-between items-center"><a class="block" href="../../index.html"><svg width="140" height="32" viewBox="0 0 140 32" class="block text-black"><path d="M28 9.84634L10.7692 0L8.61538 1.23168V3.69267L6.46154 2.46099L4.30769 3.69267V6.15367L2.15385 4.92198L0 6.15367V25.8463L2.15385 27.078L4.30769 25.8463V28.3073L6.46154 29.539L8.61538 28.3073V30.7683L10.7692 32L28 22.1537V19.6927L25.8462 18.461L28 17.2293V14.7683L25.8462 13.5366L28 12.305V9.84634ZM4.30769 23.3853L2.15385 24.617V7.38534L4.30769 8.61702V23.3853ZM10.7692 24.6147V22.1537L19.3846 17.2317L21.5385 18.4634L10.7692 24.6147ZM17.2308 16L10.7692 19.6927V12.3073L17.2308 16ZM19.3846 14.7683L10.7692 9.84634V7.38534L21.5385 13.539L19.3846 14.7683ZM6.46154 4.92198L8.61538 6.15367V8.61466L6.46154 7.38298V4.92198ZM6.46154 9.84634L8.61538 11.078V20.9244L6.46154 22.156V9.84634ZM6.46154 24.6147L8.61538 23.383V25.844L6.46154 27.0756V24.6147ZM25.8462 20.922L10.7692 29.5366V27.0756L23.6923 19.6903L25.8462 20.922ZM25.8462 16L23.6923 17.2317L21.5385 16L23.6923 14.7683L25.8462 16ZM23.6923 12.3073L10.7692 4.92198V2.46099L25.8462 11.0756L23.6923 12.3073Z" fill="#00E100"></path><g opacity="0"><path d="M38.9292 22.7264C38.9319 22.9865 39.6678 23.2626 40.7096 23.3938L41.4433 23.4572L41.4562 24.7103L33.9608 24.7879L33.9478 23.5348L34.5146 23.4581C35.5297 23.2821 36.118 23.0159 36.1154 22.7557L35.9733 9.04186C35.9706 8.78174 35.3768 8.52773 34.3584 8.37269L33.7903 8.30766L33.7773 7.05454L40.0195 6.98989C44.5119 6.94336 47.9329 8.46861 47.9691 11.968C48.0035 15.2783 45.0968 17.7441 40.3019 18.2666L40.005 16.9927C42.8857 16.5844 45.0725 15.4032 45.0474 12.9677C45.0201 10.3432 43.2509 8.46975 39.4441 8.50923L38.7822 8.51609L38.9294 22.7266L38.9292 22.7264Z" fill="currentColor"></path><path d="M48.7148 21.209C48.7148 18.5134 50.8902 17.9695 52.9475 17.6384C54.0353 17.4492 54.7445 17.1418 55.2884 16.5506L55.312 15.4156C55.3357 13.5713 54.5319 12.8382 53.3732 12.8382C52.309 12.8382 51.9307 13.3112 51.9307 13.9023C51.9307 14.3043 52.0253 14.6118 52.0253 14.8246C52.0253 15.132 51.5523 15.3685 50.6776 15.3685C49.9445 15.3685 49.2116 15.132 49.2116 14.8482C49.2116 13.7841 51.789 11.0885 54.3427 11.0885C56.5181 11.0885 57.866 11.9633 57.8187 14.5172L57.7004 19.9556C57.6531 22.0839 58.2443 22.6276 59.2848 22.6276C59.5449 22.6276 59.7104 22.604 59.9469 22.533L60.0179 22.5803C59.7341 23.739 58.8118 24.5192 57.677 24.5192C56.471 24.5192 55.7854 23.7625 55.407 22.6512C54.6976 23.8809 53.681 24.6376 52.2621 24.6376C50.3232 24.6376 48.7152 23.408 48.7152 21.209H48.7148ZM53.0656 22.8406C53.9169 22.8406 54.6263 22.3913 55.1938 21.8238L55.2648 17.8039C54.91 18.3005 54.3662 18.5607 53.5385 18.8208C52.2617 19.2228 51.1976 19.6011 51.1976 20.9961C51.1976 22.2021 51.9543 22.8406 53.0656 22.8406Z" fill="currentColor"></path><path d="M62.7621 14.5644C62.7621 14.328 62.5729 14.1388 60.9414 13.3821V12.531L64.2518 11.1121H64.843L65.2214 13.5476C66.1907 11.9632 67.042 11.1358 68.4609 11.1358C69.2176 11.1358 69.9031 11.4195 69.9031 11.7033C69.9031 12.862 69.1228 14.4225 68.7681 14.4225C68.6971 14.4225 68.6498 14.3989 68.4843 14.3043C67.9168 13.9732 67.3729 13.7604 66.8054 13.7604C66.3088 13.7604 65.7885 14.0442 65.3156 14.4698V22.2492C65.3156 22.5093 65.9304 22.7695 67.0891 22.935L67.8222 23.0296V24.1646H60.9885V23.0296L61.4142 22.935C62.431 22.7222 62.7619 22.5093 62.7619 22.2492V14.5642L62.7621 14.5644Z" fill="currentColor"></path><path d="M70.3496 21.209C70.3496 18.5134 72.525 17.9695 74.5823 17.6384C75.6701 17.4492 76.3793 17.1418 76.9232 16.5506L76.9468 15.4156C76.9705 13.5713 76.1666 12.8382 75.0079 12.8382C73.9438 12.8382 73.5654 13.3112 73.5654 13.9023C73.5654 14.3043 73.66 14.6118 73.66 14.8246C73.66 15.132 73.1871 15.3685 72.3123 15.3685C71.5793 15.3685 70.8464 15.132 70.8464 14.8482C70.8464 13.7841 73.4238 11.0885 75.9775 11.0885C78.1528 11.0885 79.5007 11.9633 79.4534 14.5172L79.3352 19.9556C79.2879 22.0839 79.8791 22.6276 80.9196 22.6276C81.1797 22.6276 81.3452 22.604 81.5817 22.533L81.6526 22.5803C81.3688 23.739 80.4466 24.5192 79.3117 24.5192C78.1057 24.5192 77.4201 23.7625 77.0418 22.6512C76.3324 23.8809 75.3157 24.6376 73.8969 24.6376C71.958 24.6376 70.35 23.408 70.35 21.209H70.3496ZM74.7003 22.8406C75.5516 22.8406 76.261 22.3913 76.8286 21.8238L76.8995 17.8039C76.5448 18.3005 76.0009 18.5607 75.1733 18.8208C73.8965 19.2228 72.8324 19.6011 72.8324 20.9961C72.8324 22.2021 73.5891 22.8406 74.7003 22.8406Z" fill="currentColor"></path><path d="M92.5238 24.8032H91.909L91.5779 22.9116C90.2065 23.8575 88.7404 24.6378 87.3691 24.6378C84.4132 24.6378 82.0723 22.1076 82.0723 18.3007C82.0723 13.9262 84.957 11.136 88.4566 11.136C89.6861 11.136 90.5847 11.3725 91.2941 11.8218V7.80802C91.2941 7.57155 91.0815 7.38237 89.4262 6.48397V5.65631L93.2568 4.35571H93.8244V19.9086C93.8244 21.9659 94.4156 22.5096 95.2903 22.5096C95.5031 22.5096 95.7158 22.4859 95.9524 22.4386L96.0234 22.4859V23.7629L92.5238 24.8032ZM88.953 22.6041C89.828 22.6041 90.5847 22.3913 91.2939 22.013V16.1488C91.2939 14.0444 89.9699 12.6729 88.1256 12.6729C86.2338 12.6729 84.744 14.0444 84.744 17.0238C84.744 20.618 86.3757 22.6041 88.953 22.6041Z" fill="currentColor"></path><path d="M96.944 24.1647V23.0296L97.3694 22.935C98.3863 22.6986 98.7171 22.4857 98.7171 22.2256V14.5643C98.7171 14.3278 98.5281 14.1386 96.8965 13.3819V12.5308L100.704 11.112H101.271V22.2256C101.271 22.4857 101.626 22.6986 102.619 22.935L103.044 23.0296V24.1647H96.9438H96.944ZM101.791 6.73762C101.791 7.84904 101.035 8.53462 99.9233 8.53462C98.8119 8.53462 98.0552 7.84885 98.0552 6.73762C98.0552 5.64984 98.8119 4.96426 99.9233 4.96426C101.058 4.96426 101.791 5.65003 101.791 6.73762Z" fill="currentColor"></path><path d="M108.193 19.8611C107.649 20.2867 107.223 20.7833 107.223 21.2799C107.223 21.7527 107.649 21.9657 108.997 22.0603L112.828 22.344C115.145 22.5332 116.469 23.6917 116.469 25.5599C116.469 28.3737 113.513 31.0222 109.21 31.0222C105.687 31.0222 103.984 29.7216 103.984 27.7591C103.984 26.5059 104.859 25.7019 106.94 24.1885C105.923 23.9757 104.576 23.2426 104.576 22.2969C104.576 21.3276 105.521 20.4526 107.129 19.6013C105.498 18.9865 104.363 17.6386 104.363 15.7707C104.363 12.9805 106.538 11.136 109.565 11.136C110.723 11.136 111.74 11.4907 112.497 12.0819L116.398 12.1765V13.4059L113.774 13.9971C114.057 14.4464 114.247 14.9665 114.247 15.6288C114.247 18.1352 112.095 19.9322 109.092 19.9322C108.784 19.9322 108.501 19.9085 108.193 19.8613L108.193 19.8611ZM109.943 29.5324C112.142 29.5324 113.939 28.2318 113.939 26.3875C113.939 25.2524 113.324 24.7559 111.432 24.614L108.311 24.4011C107.294 25.0869 106.419 26.0801 106.419 27.026C106.419 28.4446 107.696 29.5326 109.943 29.5326V29.5324ZM111.858 16.1723C111.858 14.3516 110.889 12.7436 109.044 12.7436C107.768 12.7436 106.869 13.6186 106.869 15.0372C106.869 16.8342 107.791 18.4659 109.659 18.4659C110.983 18.4659 111.858 17.5909 111.858 16.1723Z" fill="currentColor"></path><path d="M119.59 14.5654C119.59 14.3289 119.401 14.1397 117.77 13.383V12.5319L121.08 11.1131H121.671L121.955 12.9576C123.468 12.0117 125.076 11.1131 126.613 11.1131C127.984 11.1131 128.978 11.586 129.474 13.052C131.059 12.0826 132.737 11.1131 134.345 11.1131C136.355 11.1131 137.561 12.1772 137.561 16.0788V22.2504C137.561 22.5105 137.916 22.7233 138.932 22.9361L139.334 23.0307V24.1658H133.257V23.0307L133.659 22.9361C134.676 22.6997 135.007 22.5105 135.007 22.2504V16.4335C135.007 14.1872 134.132 13.2177 132.288 13.2177C131.389 13.2177 130.467 13.5014 129.71 13.9034C129.828 14.4946 129.876 15.2277 129.876 16.0788V22.2504C129.876 22.5105 130.207 22.7233 131.2 22.9361L131.625 23.0307V24.1658H125.572V23.0307L125.974 22.9361C126.991 22.6997 127.322 22.5105 127.322 22.2504V16.4335C127.322 14.1872 126.447 13.2177 124.579 13.2177C123.751 13.2177 122.876 13.4778 122.143 13.8325V22.2505C122.143 22.5107 122.474 22.6998 123.491 22.9363L123.893 23.0309V24.166H117.816V23.0309L118.242 22.9363C119.258 22.7235 119.589 22.5107 119.589 22.2505V14.5656L119.59 14.5654Z" fill="currentColor"></path></g></svg></a><button class="p-1 bg-black flex flex-col items-center text-center border border-solid border-transparent" aria-label="Mobile Menu"><div class="tag text-gray-dark"></div></button></div></div><div class="hidden lg:block fixed md:top-2 md:left-2 top-[16px] left-[16px] z-50 pointer-events-none w-full"><div class="grid grid-cols-12 items-center"><a class="col-start-1 block pointer-events-auto" href="../../index.html"><svg width="140" height="32" viewBox="0 0 140 32" class="block text-black"><path d="M28 9.84634L10.7692 0L8.61538 1.23168V3.69267L6.46154 2.46099L4.30769 3.69267V6.15367L2.15385 4.92198L0 6.15367V25.8463L2.15385 27.078L4.30769 25.8463V28.3073L6.46154 29.539L8.61538 28.3073V30.7683L10.7692 32L28 22.1537V19.6927L25.8462 18.461L28 17.2293V14.7683L25.8462 13.5366L28 12.305V9.84634ZM4.30769 23.3853L2.15385 24.617V7.38534L4.30769 8.61702V23.3853ZM10.7692 24.6147V22.1537L19.3846 17.2317L21.5385 18.4634L10.7692 24.6147ZM17.2308 16L10.7692 19.6927V12.3073L17.2308 16ZM19.3846 14.7683L10.7692 9.84634V7.38534L21.5385 13.539L19.3846 14.7683ZM6.46154 4.92198L8.61538 6.15367V8.61466L6.46154 7.38298V4.92198ZM6.46154 9.84634L8.61538 11.078V20.9244L6.46154 22.156V9.84634ZM6.46154 24.6147L8.61538 23.383V25.844L6.46154 27.0756V24.6147ZM25.8462 20.922L10.7692 29.5366V27.0756L23.6923 19.6903L25.8462 20.922ZM25.8462 16L23.6923 17.2317L21.5385 16L23.6923 14.7683L25.8462 16ZM23.6923 12.3073L10.7692 4.92198V2.46099L25.8462 11.0756L23.6923 12.3073Z" fill="#00E100"></path><g opacity="0"><path d="M38.9292 22.7264C38.9319 22.9865 39.6678 23.2626 40.7096 23.3938L41.4433 23.4572L41.4562 24.7103L33.9608 24.7879L33.9478 23.5348L34.5146 23.4581C35.5297 23.2821 36.118 23.0159 36.1154 22.7557L35.9733 9.04186C35.9706 8.78174 35.3768 8.52773 34.3584 8.37269L33.7903 8.30766L33.7773 7.05454L40.0195 6.98989C44.5119 6.94336 47.9329 8.46861 47.9691 11.968C48.0035 15.2783 45.0968 17.7441 40.3019 18.2666L40.005 16.9927C42.8857 16.5844 45.0725 15.4032 45.0474 12.9677C45.0201 10.3432 43.2509 8.46975 39.4441 8.50923L38.7822 8.51609L38.9294 22.7266L38.9292 22.7264Z" fill="currentColor"></path><path d="M48.7148 21.209C48.7148 18.5134 50.8902 17.9695 52.9475 17.6384C54.0353 17.4492 54.7445 17.1418 55.2884 16.5506L55.312 15.4156C55.3357 13.5713 54.5319 12.8382 53.3732 12.8382C52.309 12.8382 51.9307 13.3112 51.9307 13.9023C51.9307 14.3043 52.0253 14.6118 52.0253 14.8246C52.0253 15.132 51.5523 15.3685 50.6776 15.3685C49.9445 15.3685 49.2116 15.132 49.2116 14.8482C49.2116 13.7841 51.789 11.0885 54.3427 11.0885C56.5181 11.0885 57.866 11.9633 57.8187 14.5172L57.7004 19.9556C57.6531 22.0839 58.2443 22.6276 59.2848 22.6276C59.5449 22.6276 59.7104 22.604 59.9469 22.533L60.0179 22.5803C59.7341 23.739 58.8118 24.5192 57.677 24.5192C56.471 24.5192 55.7854 23.7625 55.407 22.6512C54.6976 23.8809 53.681 24.6376 52.2621 24.6376C50.3232 24.6376 48.7152 23.408 48.7152 21.209H48.7148ZM53.0656 22.8406C53.9169 22.8406 54.6263 22.3913 55.1938 21.8238L55.2648 17.8039C54.91 18.3005 54.3662 18.5607 53.5385 18.8208C52.2617 19.2228 51.1976 19.6011 51.1976 20.9961C51.1976 22.2021 51.9543 22.8406 53.0656 22.8406Z" fill="currentColor"></path><path d="M62.7621 14.5644C62.7621 14.328 62.5729 14.1388 60.9414 13.3821V12.531L64.2518 11.1121H64.843L65.2214 13.5476C66.1907 11.9632 67.042 11.1358 68.4609 11.1358C69.2176 11.1358 69.9031 11.4195 69.9031 11.7033C69.9031 12.862 69.1228 14.4225 68.7681 14.4225C68.6971 14.4225 68.6498 14.3989 68.4843 14.3043C67.9168 13.9732 67.3729 13.7604 66.8054 13.7604C66.3088 13.7604 65.7885 14.0442 65.3156 14.4698V22.2492C65.3156 22.5093 65.9304 22.7695 67.0891 22.935L67.8222 23.0296V24.1646H60.9885V23.0296L61.4142 22.935C62.431 22.7222 62.7619 22.5093 62.7619 22.2492V14.5642L62.7621 14.5644Z" fill="currentColor"></path><path d="M70.3496 21.209C70.3496 18.5134 72.525 17.9695 74.5823 17.6384C75.6701 17.4492 76.3793 17.1418 76.9232 16.5506L76.9468 15.4156C76.9705 13.5713 76.1666 12.8382 75.0079 12.8382C73.9438 12.8382 73.5654 13.3112 73.5654 13.9023C73.5654 14.3043 73.66 14.6118 73.66 14.8246C73.66 15.132 73.1871 15.3685 72.3123 15.3685C71.5793 15.3685 70.8464 15.132 70.8464 14.8482C70.8464 13.7841 73.4238 11.0885 75.9775 11.0885C78.1528 11.0885 79.5007 11.9633 79.4534 14.5172L79.3352 19.9556C79.2879 22.0839 79.8791 22.6276 80.9196 22.6276C81.1797 22.6276 81.3452 22.604 81.5817 22.533L81.6526 22.5803C81.3688 23.739 80.4466 24.5192 79.3117 24.5192C78.1057 24.5192 77.4201 23.7625 77.0418 22.6512C76.3324 23.8809 75.3157 24.6376 73.8969 24.6376C71.958 24.6376 70.35 23.408 70.35 21.209H70.3496ZM74.7003 22.8406C75.5516 22.8406 76.261 22.3913 76.8286 21.8238L76.8995 17.8039C76.5448 18.3005 76.0009 18.5607 75.1733 18.8208C73.8965 19.2228 72.8324 19.6011 72.8324 20.9961C72.8324 22.2021 73.5891 22.8406 74.7003 22.8406Z" fill="currentColor"></path><path d="M92.5238 24.8032H91.909L91.5779 22.9116C90.2065 23.8575 88.7404 24.6378 87.3691 24.6378C84.4132 24.6378 82.0723 22.1076 82.0723 18.3007C82.0723 13.9262 84.957 11.136 88.4566 11.136C89.6861 11.136 90.5847 11.3725 91.2941 11.8218V7.80802C91.2941 7.57155 91.0815 7.38237 89.4262 6.48397V5.65631L93.2568 4.35571H93.8244V19.9086C93.8244 21.9659 94.4156 22.5096 95.2903 22.5096C95.5031 22.5096 95.7158 22.4859 95.9524 22.4386L96.0234 22.4859V23.7629L92.5238 24.8032ZM88.953 22.6041C89.828 22.6041 90.5847 22.3913 91.2939 22.013V16.1488C91.2939 14.0444 89.9699 12.6729 88.1256 12.6729C86.2338 12.6729 84.744 14.0444 84.744 17.0238C84.744 20.618 86.3757 22.6041 88.953 22.6041Z" fill="currentColor"></path><path d="M96.944 24.1647V23.0296L97.3694 22.935C98.3863 22.6986 98.7171 22.4857 98.7171 22.2256V14.5643C98.7171 14.3278 98.5281 14.1386 96.8965 13.3819V12.5308L100.704 11.112H101.271V22.2256C101.271 22.4857 101.626 22.6986 102.619 22.935L103.044 23.0296V24.1647H96.9438H96.944ZM101.791 6.73762C101.791 7.84904 101.035 8.53462 99.9233 8.53462C98.8119 8.53462 98.0552 7.84885 98.0552 6.73762C98.0552 5.64984 98.8119 4.96426 99.9233 4.96426C101.058 4.96426 101.791 5.65003 101.791 6.73762Z" fill="currentColor"></path><path d="M108.193 19.8611C107.649 20.2867 107.223 20.7833 107.223 21.2799C107.223 21.7527 107.649 21.9657 108.997 22.0603L112.828 22.344C115.145 22.5332 116.469 23.6917 116.469 25.5599C116.469 28.3737 113.513 31.0222 109.21 31.0222C105.687 31.0222 103.984 29.7216 103.984 27.7591C103.984 26.5059 104.859 25.7019 106.94 24.1885C105.923 23.9757 104.576 23.2426 104.576 22.2969C104.576 21.3276 105.521 20.4526 107.129 19.6013C105.498 18.9865 104.363 17.6386 104.363 15.7707C104.363 12.9805 106.538 11.136 109.565 11.136C110.723 11.136 111.74 11.4907 112.497 12.0819L116.398 12.1765V13.4059L113.774 13.9971C114.057 14.4464 114.247 14.9665 114.247 15.6288C114.247 18.1352 112.095 19.9322 109.092 19.9322C108.784 19.9322 108.501 19.9085 108.193 19.8613L108.193 19.8611ZM109.943 29.5324C112.142 29.5324 113.939 28.2318 113.939 26.3875C113.939 25.2524 113.324 24.7559 111.432 24.614L108.311 24.4011C107.294 25.0869 106.419 26.0801 106.419 27.026C106.419 28.4446 107.696 29.5326 109.943 29.5326V29.5324ZM111.858 16.1723C111.858 14.3516 110.889 12.7436 109.044 12.7436C107.768 12.7436 106.869 13.6186 106.869 15.0372C106.869 16.8342 107.791 18.4659 109.659 18.4659C110.983 18.4659 111.858 17.5909 111.858 16.1723Z" fill="currentColor"></path><path d="M119.59 14.5654C119.59 14.3289 119.401 14.1397 117.77 13.383V12.5319L121.08 11.1131H121.671L121.955 12.9576C123.468 12.0117 125.076 11.1131 126.613 11.1131C127.984 11.1131 128.978 11.586 129.474 13.052C131.059 12.0826 132.737 11.1131 134.345 11.1131C136.355 11.1131 137.561 12.1772 137.561 16.0788V22.2504C137.561 22.5105 137.916 22.7233 138.932 22.9361L139.334 23.0307V24.1658H133.257V23.0307L133.659 22.9361C134.676 22.6997 135.007 22.5105 135.007 22.2504V16.4335C135.007 14.1872 134.132 13.2177 132.288 13.2177C131.389 13.2177 130.467 13.5014 129.71 13.9034C129.828 14.4946 129.876 15.2277 129.876 16.0788V22.2504C129.876 22.5105 130.207 22.7233 131.2 22.9361L131.625 23.0307V24.1658H125.572V23.0307L125.974 22.9361C126.991 22.6997 127.322 22.5105 127.322 22.2504V16.4335C127.322 14.1872 126.447 13.2177 124.579 13.2177C123.751 13.2177 122.876 13.4778 122.143 13.8325V22.2505C122.143 22.5107 122.474 22.6998 123.491 22.9363L123.893 23.0309V24.166H117.816V23.0309L118.242 22.9363C119.258 22.7235 119.589 22.5107 119.589 22.2505V14.5656L119.59 14.5654Z" fill="currentColor"></path></g></svg></a><div class="col-span-6 col-start-5 xl:col-span-5 xl:col-start-4"><div class="text-black pointer-events-auto bg-white px-2 w-fit -mx-3 border border-solid border-gray-neutral !border-transparent"><ul class="h-[48px] flex items-center justify-start gap-3 2xl:gap-4 font-mono text-mono-12"><li><a _key="426608038e76" class="flex gap-half items-center hover:underline" href="../../about.html">About</a></li><li><a _key="ff5f78089e91" class="flex gap-half items-center hover:underline" href="../../team.html">Team</a></li><li><a _key="38b3cd4525de" class="flex gap-half items-center hover:underline" href="../../portfolio.html">Portfolio</a></li><li><a _key="22b86a453ca1" class="flex gap-half items-center hover:underline" href="../../writing.html">Writing</a></li><li><a _key="cd5b2c9fbd5f" class="flex gap-half items-center hover:underline" href="../../oss.html">Open Source</a></li><li><a _key="05b4198b2e14" class="flex gap-half items-center hover:underline" href="../../careers.html">Careers</a></li></ul></div></div></div></div></header><div style="opacity:0"><div style="opacity:0"><div class="md:px-container-desktop pt-header-mobile md:pt-12 lg:pt-18"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-5 xl:col-start-4 px-container-mobile md:px-0 pt-6 md:pt-0 max-w-[900px]"><div class="flex flex-col gap-2"><div class="flex flex-col gap-2"><div class="flex flex-col gap-2"><div class="flex gap-1 md:gap-2 items-center font-mono text-mono-12 md:text-mono-13 text-gray-text"><span><a class="link-gray-black link-underline-hover" href="../../writing%3Ftags=research.html">Research</a></span></div><h1 class="font-mono text-mono-28 md:text-mono-40 tracking-tighter max-w-[1400px]">Priority Is All You Need</h1></div></div><p class="font-mono text-mono-12 gap-1 w-full justify-between"><span>06.04.2024</span><span class="px-1">|</span><span class="content-none after:content-[&#x27;,&#x27;] pr-1 before:content-[&#x27;By_&#x27;]"><a class="link-underline-hover" href="../../team/danrobinson/index.html">Dan Robinson</a></span><span class="content-none"><a class="link-underline-hover" href="../../team/davewhite/index.html">Dave White</a></span></p></div></div></div></div><div class="my-2 md:my-4 px-container-mobile md:px-container-desktop"><div class="relative"><div class="pointer-events-none lg:pointer-events-auto my-3"><div class="grid grid-cols-12 pointer-events-auto"><div class="col-span-12 md:col-start-2 xl:col-span-5 xl:col-start-4"><div class="flex flex-col gap-1"><p class="font-mono text-mono-12 uppercase font-medium">Outline</p><ul class="flex flex-col gap-1"><li class="font-mono text-mono-12"><a class="link-underline-hover" href="priority-is-all-you-need.html#5d6020fb8718">1. Introduction</a></li><li class="font-mono text-mono-12"><a class="link-underline-hover" href="priority-is-all-you-need.html#2aeeb5f66345">2. Priority ordering</a></li><li class="font-mono text-mono-12"><a class="link-underline-hover" href="priority-is-all-you-need.html#ad608faec988">3. MEV taxes</a></li><li class="font-mono text-mono-12" style="margin-inline-start:0"><a class="link-underline-hover" href="priority-is-all-you-need.html#a3f4eb356ea0">4. Single-application MEV capture</a><ul class="flex flex-col mt-1 gap-1 ml-[25px]"><li class="font-mono text-mono-12"><a class="link-underline-hover" href="priority-is-all-you-need.html#150155a72060">1. DEX routers</a></li><li class="font-mono text-mono-12"><a class="link-underline-hover" href="priority-is-all-you-need.html#ef4bf2f8266b">2. AMMs</a></li><li class="font-mono text-mono-12"><a class="link-underline-hover" href="priority-is-all-you-need.html#3da51ff2a402">3. Backrunning auctions</a></li><li class="font-mono text-mono-12"><a class="link-underline-hover" href="priority-is-all-you-need.html#b8726646b4d3">4. Other use cases</a></li></ul></li><li class="font-mono text-mono-12" style="margin-inline-start:0"><a class="link-underline-hover" href="priority-is-all-you-need.html#8cdc7ce33e2b">5. Cross-application MEV capture</a><ul class="flex flex-col mt-1 gap-1 ml-[25px]"><li class="font-mono text-mono-12"><a class="link-underline-hover" href="priority-is-all-you-need.html#f6d13cd2a851">1. Incentive incompatibility</a></li><li class="font-mono text-mono-12"><a class="link-underline-hover" href="priority-is-all-you-need.html#6934ba8c81f7">2. Full blocks</a></li><li class="font-mono text-mono-12"><a class="link-underline-hover" href="priority-is-all-you-need.html#a77dc8c682c4">3. Reverted transactions</a></li><li class="font-mono text-mono-12"><a class="link-underline-hover" href="priority-is-all-you-need.html#6373f109b34d">4. Leaking of user intents</a></li></ul></li><li class="font-mono text-mono-12"><a class="link-underline-hover" href="priority-is-all-you-need.html#2c4a81b044ad">6. Discussion and prior work</a></li><li class="font-mono text-mono-12"><a class="link-underline-hover" href="priority-is-all-you-need.html#ccf8e00cd865">7. Conclusion</a></li></ul></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><h2 id="5d6020fb8718">Introduction</h2><p>In this post, we introduce MEV taxes, a mechanism that arbitrary applications can use to capture their own MEV.</p><p>This mechanism could be used today on OP Stack L2s like OP Mainnet, Base, and Blast, because the block proposers on those chains follow a set of rules we call <em>competitive priority ordering</em>.</p><p>To implement a MEV tax on one of these chains, a smart contract charges a fee that is a function of the priority fee of the transaction. We show that if an application charges searchers a MEV tax of (say) $99 for every $1 of priority fee, it can capture 99% of the competitive MEV for that transaction.</p><p>MEV taxes are a simple technique that opens up a vast design space. You can think of them as allowing any application on the chain to run its own custom MEV auction, without needing any offchain infrastructure of its own, just by hooking into a single shared auction run by the block proposer.</p><p>We show how MEV taxes could be used to solve three major problems in MEV research:</p><ul><li>Decentralized exchange (DEX) routers that optimize the price received by the swapper</li><li>Automated market makers (AMMs) that minimize the loss-vs-rebalancing (LVR) experienced by liquidity providers</li><li>Wallets that let their users capture any “backrunning” MEV created by their transactions</li></ul><p>But there’s a catch. MEV taxes only work if block proposers strictly follow the rules of competitive priority ordering, which include sorting transactions by priority fee without censoring, peeking at, or delaying any. If block proposers deviate from those rules, they can evade MEV taxes to capture the value for themselves. Today, therefore, MEV taxes depend on trusting L2 sequencers, and would likely not work at all on Ethereum L1, where block building is dominated by a <a class="" href="https://github.com/flashbots/mev-boost">competitive builder auction</a> that maximizes revenue for the proposer.</p><p>Still, the power and flexibility of MEV taxes suggests that priority ordering may be the right choice for platforms that can provide it today. And the relative simplicity of competitive priority ordering suggests that there may be a viable way to enforce it in a decentralized way, without having to trust a single sequencer. We hope this post motivates further work on that problem.</p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><h2 id="2aeeb5f66345">Priority ordering</h2><p>When someone sends a transaction on an Ethereum L1 or L2, they specify a priority fee, which they pay to the block proposer.<a id="fn-ref-1" class="text-green font-mono align-super text-mono-12" href="priority-is-all-you-need.html#fn-1">1 </a>You can imagine this is specified as <code>priorityFeePerGas</code>, a number that is multiplied by the gas used in the transaction to get <code>builderPriorityFee</code>—the total payment in ETH.<a id="fn-ref-2" class="text-green font-mono align-super text-mono-12" href="priority-is-all-you-need.html#fn-2">2</a></p><p>There is no rule in the Ethereum protocol that transactions in a block must be ordered greedily by descending <code>priorityFeePerGas</code>. However, that is a popular way to build blocks—for example, it is the default algorithm used by sequencers of <a class="" href="https://docs.optimism.io/">OP Stack</a> chains, as well as geth and reth. Not only does priority ordering let transactors efficiently express the urgency of their transactions, it also naturally channels certain kinds of MEV to the block proposer.</p><p>That happens because priority ordering turns competition for MEV into a <a class="" href="https://arxiv.org/pdf/1904.05234">priority gas auction</a>. When there is an opportunity to profit from interacting with the chain, such as by arbitraging an AMM against a centralized exchange, searchers compete to claim that opportunity first. If the chain uses priority ordering to determine transaction inclusion and ordering, the searchers compete by setting high priority fees on their transactions.</p><p>In a competitive scenario where risk-free profits are competed down to zero, the winning searcher should end up paying the full amount of MEV in priority fees.<a id="fn-ref-3" class="text-green font-mono align-super text-mono-12" href="priority-is-all-you-need.html#fn-3">3</a> So if there is 100 ETH in profit to be gained from interacting with a contract, the first transaction to claim it will set a priority fee of 100 ETH. (We discuss some caveats to this in the Limitations section).</p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"><div class="flex flex-col gap-2 font-mono text-mono-12 break-words"><h3 class="font-medium">1</h3><div class="rich-text line-break rich-text-post rich-text-inline"><p>In this post, we use “proposer” to refer to the actor or process that determines what transactions are included in a particular block. On Ethereum L2s, this role is typically filled by a “sequencer.” On Ethereum L1, it is filled by a specific Ethereum validator called a proposer, though often the proposer outsources the task of building the block to a competitive auction in which “relayers” and “builders” participate. The details of how these responsibilities are divided are out of scope of this post.</p><span>. </span><a class="inline-block" href="priority-is-all-you-need.html#fn-ref-1">↩</a></div></div><div class="flex flex-col gap-2 font-mono text-mono-12 break-words"><h3 class="font-medium">2</h3><div class="rich-text line-break rich-text-post rich-text-inline"><p>The priority fee per gas is not actually specified explicitly in the transaction, but can be computed in it. The transaction specifies a gas price, but Ethereum also charges a base fee, which is taken out of the gas price and burned. The base fee should be ignored for purposes of MEV taxes, since it is not under the transactor’s control. The priority fee per gas—the price for the part of the transaction fee that goes to the block proposer—can be computed in Solidity as <code>priorityGasPrice = tx.gasprice - block.basefee</code>.</p><span>. </span><a class="inline-block" href="priority-is-all-you-need.html#fn-ref-2">↩</a></div></div><div class="flex flex-col gap-2 font-mono text-mono-12 break-words"><h3 class="font-medium">3</h3><div class="rich-text line-break rich-text-post rich-text-inline"><p>Alternatively, we could simply define “MEV” to exclude any searcher profit and only refer to value that would go to the validator.</p><span>. </span><a class="inline-block" href="priority-is-all-you-need.html#fn-ref-3">↩</a></div></div></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><h2 id="ad608faec988">MEV taxes</h2><p>Suppose a smart contract wants to capture the MEV from any transaction that interacts with it. There is a vast library of research on different application-specific ways that smart contracts could try to capture their own MEV.</p><p>But in fact, we don’t necessarily have to know anything about the application. If we know that the block is being constructed through competitive priority ordering, then we have one universal signal for the amount of MEV in the transaction: the priority fee.</p><p>We propose that the smart contract can look at the priority fee of the transaction and charge its own fee as some increasing function of it. For example, the contract might require whoever calls it to transfer <code>applicationPriorityFee = 99 * proposerPriorityFee</code> in ETH to the contract.<a id="fn-ref-4" class="text-green font-mono align-super text-mono-12" href="priority-is-all-you-need.html#fn-4">4</a></p><p>This new fee is paid by the searcher sending the transaction, so it affects the behavior of that searcher. If there is 100 MEV in an opportunity, the winning transaction will now only set a priority fee of 1 ETH, since that will result in a total payment of 100 ETH (1 ETH to the block proposer, and 99 ETH to the smart contract). Any higher priority fee would make the transaction unprofitable; any lower priority fee would result in losing the opportunity to a competitor who set a higher fee. This means the smart contract has captured 99% of the MEV in the transaction.</p><figure class="py-1 gap-2 flex flex-col"><div class="image overflow-hidden" style="height:0;padding-bottom:56.22389306599833%"><picture><img class="scale-105 blur-lg" src="data:image/jpeg;base64,/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMBCP/EAB0QAAICAgMBAAAAAAAAAAAAAAECABEDEhRRYXH/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAMAwEAAhEDEQA/AOoeOQW1yuNjddTThJcMMjA1X2XgRRNEZVouW9MSkQP/2Q=="/></picture></div></figure><p>We call this extra fee imposed by the smart contract a <strong>MEV tax</strong>. MEV taxes let an application hijack priority ordering for its own benefit, allowing it to recapture MEV for its users rather than leaking it to the block proposer.</p><p>If this fee increases sufficiently fast as a function of <code>priorityFeePerGas</code>, then only a negligible amount of MEV will accrue to the proposer. Since <code>priorityFeePerGas</code> is denominated in wei (one billionth of a billionth of one ETH), we have a lot of precision to work with. For example, as long as the MEV tax is sufficiently sensitive that a <code>priorityFeePerGas</code> of 50,000 would result in a prohibitively high tax, then the total payment to the proposer would be less than $0.01.<a id="fn-ref-5" class="text-green font-mono align-super text-mono-12" href="priority-is-all-you-need.html#fn-5">5</a></p><p>However, there is an important caveat. As discussed in the Limitations section, MEV taxes only work if block proposers follow certain rules—what we call “competitive priority ordering”—rather than deviating from those rules in order to maximize their own revenue. Enforcing these rules in a trustless way is an open problem.</p><p><br/></p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"><div class="flex flex-col gap-2 font-mono text-mono-12 break-words"><h3 class="font-medium">4</h3><div class="rich-text line-break rich-text-post rich-text-inline"><p>Note that <code>proposerPriorityFee</code>—equal to <code>priorityFeePerGas</code> times the total gas used in the transaction—cannot actually be calculated during the contract, since there’s no way to know how much gas the transaction will end up using. However, this generally won’t matter, since all we need is an upper bound for it. To be safe, you could multiply <code>priorityFeePerGas</code> by 30 million—the current maximum gas in an Ethereum block. Overestimating this value will simply mean that the MEV tax captures an even greater percentage of MEV.</p><span>. </span><a class="inline-block" href="priority-is-all-you-need.html#fn-ref-4">↩</a></div></div><div class="flex flex-col gap-2 font-mono text-mono-12 break-words"><h3 class="font-medium">5</h3><div class="rich-text line-break rich-text-post rich-text-inline"><p>Assuming a transaction cannot be more than 30 million gas, a <code>priorityFeePerGas</code> of 50,000 would result in a gas payment of 1500 gwei—about $0.006 at an ETH price of $4000.</p><span>. </span><a class="inline-block" href="priority-is-all-you-need.html#fn-ref-5">↩</a></div></div></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><h2 id="a3f4eb356ea0">Single-application MEV capture</h2><p>Here we sketch out how, on a chain that is guaranteed to use competitive priority ordering for block building, MEV taxes could be used to mitigate three important problems in MEV: letting DEX interfaces improve trade execution for swappers, letting AMMs reduce losses to arbitrage for their LPs, and letting wallets reduce MEV leakage for their users by selling the right to backrun the user.</p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><h3 id="150155a72060">DEX routers</h3><p>In intent-based DEX routing protocols like <a class="" href="https://uniswap.org/whitepaper-uniswapx.pdf">UniswapX</a> and <a class="" href="https://1inch.io/fusion/">1inch Fusion</a>, a user (Alice) signs an intent to swap, and searchers compete to route or fill that intent at the best possible price for Alice.</p><p>Current versions of UniswapX use two mechanisms to run that competition: a Dutch auction where Alice’s limit price changes over time until a searcher fills it, and an initial offchain request-for-quote (RFQ) auction to set the starting price of that Dutch auction.</p><p>On a platform that guarantees competitive priority ordering, UniswapX could replace these with a single mechanism: a MEV tax. It could implement this by having the user sign an order that can be filled immediately by anyone, but with an execution price that is set as a function of the transaction’s priority.</p><p>For example, if Alice has a UniswapX order to sell 1 ETH, she could define the execution price of the order to be <code>minimumPrice + ($0.01 * priorityFeePerGas)</code>. <code>minimumPrice</code> could be some fixed value that she expects to be significantly lower than the current price.</p><p>Searchers would compete to fill Alice’s order by submitting transactions. Whichever transaction has the highest priority fee and doesn’t revert would get to fill the order, which should guarantee that the swapper gets the best price that searchers can find. (Some exceptions to this are discussed in the Limitations section.)</p><p>If Alice’s minimum price is $3,000 and the current price of ETH is $3,500, <code>priorityFeePerGas</code> in the winning transaction would be about 50,000. (Observe that in a transaction that costs 200,000 gas, this will result in a payment of only about 10 billion wei—around $0.000035—to the block proposer.)</p><p>This has some potential benefits over the existing mechanisms used in UniswapX.</p><p>Orders that use MEV taxes could complete faster and at a better price than orders which use Dutch auctions. As discussed in <a class="" href="https://moallemi.com/ciamac/papers/pricing-dutch-auctions-2024.pdf">this paper</a>, onchain Dutch auctions leak some value to MEV due to price movements between blocks, and may take many blocks to complete. In contrast, orders that use MEV taxes could typically be completed in the next block while capturing the vast majority of their MEV.</p><p>Unlike an offchain RFQ, the auction to fill an order that uses MEV taxes would happen atomically with transaction execution onchain. This means that a winning bidder could be guaranteed that they are only committed to fill the order if their onchain transaction succeeds. That could make it easier for onchain liquidity like AMMs to compete with offchain liquidity, meaning UniswapX could serve as an even more effective router for multi-pool systems like Uniswap v4.</p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><h3 id="ef4bf2f8266b">AMMs</h3><p>Normally, AMMs leak value to arbitrageurs who trade against stale prices at the top of the block, as discussed in the <a class="" href="https://arxiv.org/pdf/2208.06046">loss-vs-rebalancing</a> <a class="" href="https://arxiv.org/pdf/2305.14604">papers</a>. We can use MEV taxes to have AMMs capture that MEV. To keep things simple, we’ll discuss how this might work on an AMM without concentrated liquidity. (If you’re interested in how this kind of problem could be solved with concentrated liquidity, <a class="" href="https://twitter.com/SorellaLabs">Sorella</a> will soon be publishing one solution.)</p><p>An AMM can capture MEV by charging an extra fee as a function of the priority fee on the transaction, allowing it to auction off the right to trade first in the block. There are many ways to calculate and denominate that fee. We’ll discuss one arguably neutral one—denominating it in units of pool liquidity, <code>sqrt(xy)</code>. The winning transaction would be the one that increases the pool’s liquidity by the most.</p><p>When executing the first transaction on a pool in a block, instead of enforcing the condition <code>x_end * y_end &gt; x_start * y_start</code>, the pool could enforce the condition (with <code>a</code> as some constant):</p><p>x_end * y_end &gt; (sqrt(x_start * y_start) + a*priorityFeePerGas)^2</p><p>This formula would incentivize the arbitrage trader to trade to the true price, and after that trade, the midpoint price on the pool should be the true price.<a id="fn-ref-6" class="text-green font-mono align-super text-mono-12" href="priority-is-all-you-need.html#fn-6">6</a></p><p>After that first transaction, trades could work like they do on Uniswap v2, with fixed swap fees. Uninformed transactions that want to trade on the pool without paying an extra MEV tax would set a low priority fee.</p><p>There are many other ways to implement MEV taxes on an AMM that would have different effects. For example, MEV taxes could be denominated in the input or output token of the swap, could affect the swap fee percentage applied by the pool, or could determine the minimum price of the user’s trade. We think this is an interesting design space to explore.</p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"><div class="flex flex-col gap-2 font-mono text-mono-12 break-words"><h3 class="font-medium">6</h3><div class="rich-text line-break rich-text-post rich-text-inline"><p>In the case where priorityFeePerGas is set so that the arbitrageur’s profit is zero, the profit-maximizing arbitrage trade should correspond to the same trade on the <a class="" href="https://arxiv.org/pdf/2307.02074">function-maximizing AMM</a>. Proving this is left as an exercise for the reader.</p><span>. </span><a class="inline-block" href="priority-is-all-you-need.html#fn-ref-6">↩</a></div></div></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><h3 id="3da51ff2a402">Backrunning auctions</h3><p>The above descriptions show how certain applications could be designed to avoid leaking MEV. However, what if a wallet wants to try to help its users capture the MEV they create from arbitrary transactions interacting with <em>any</em> application, even ones that don’t incorporate MEV taxes?</p><p>For example, when Alice makes a large transaction on an AMM, she sometimes create an arbitrage opportunity for “backrunners” to move the price back. This is normally leaked to MEV, rather than going to Alice.</p><p><a class="" href="https://docs.flashbots.net/flashbots-protect/mev-share">MEV-Share</a> and <a class="" href="https://mevblocker.io/">MEVBlocker</a> are two protocols that allow users to capture MEV from their transactions, but they rely on a complex offchain auction system. <a class="" href="https://frontier.tech/the-orderflow-auction-design-space">The Orderflow Auction Design Space</a> describes some other solutions.</p><p>MEV taxes, when combined with an intent-based smart contract wallet, could allow us to construct an alternative system to capture backrunning MEV for Alice. Suppose that instead of creating a transaction that trades on the AMM, Alice signs an intent that anyone can submit to Alice’s smart contract wallet to cause it to take that action. Alice’s smart contract wallet charges whoever submits that transaction a MEV tax, which is paid to Alice.</p><p>The searcher who submits Alice’s intent will have the exclusive right to backrun her, since they can do so atomically in the same transaction. As a result, if searching is competitive, all of the profit from backrunning Alice should accrue to Alice through her MEV tax.</p><p>Note that this system may not necessarily protect users from attacks that involve <em>frontrunning</em> user transactions, because a transaction that frontruns a user may be able to avoid paying a MEV tax to that user. This issue (and some possible mitigations for it) is discussed in greater detail in the Limitations section below. Nevertheless, this could at least be an improvement on systems that use public mempools without any mitigations.</p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><h3 id="b8726646b4d3">Other use cases</h3><p>In addition to these examples, other potential uses of MEV taxes could include almost anything that currently uses an offchain or Dutch auction, such as:</p><ul><li>Protocols for oracles to capture the oracle extractable value they create, like <a class="" href="https://medium.com/uma-project/announcing-oval-earn-protocol-revenue-by-capturing-oracle-mev-877192c51fe2">Oval</a></li><li>Refinancing auctions in NFT-collateralized lending protocols like <a class="" href="../../2023/05/blend.html">Blend</a></li><li>Lending protocol liquidations that <a class="" href="https://moallemi.com/ciamac/papers/pricing-dutch-auctions-2024.pdf">leak less value</a> than Dutch auctions</li></ul></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><h2 id="8cdc7ce33e2b">Cross-application MEV capture</h2><p>The above solutions are designed to capture the MEV from interacting with a single application. But sometimes it may be possible for a searcher to capture even more value by interacting with multiple applications in the same transaction.</p><p>If only one of those applications has a MEV tax, then all the MEV from the transaction should go to the application with the MEV tax, regardless of how high or low that MEV tax is.</p><p>But what if a searcher’s transaction interacts with two applications that use MEV taxes? For example, what if there is some MEV that can only be captured by filling one of the MEV-taxed UniswapX orders described above against a MEV-taxed AMM?</p><p>In that case, the relative amount of excess MEV captured by each application is determined by how those applications set their MEV taxes. If the value <code>app_i</code> charges as a MEV tax is given by the function <code>tax_i(priority)</code>, then the priority of the winning transaction can be determined by solving for priority in this equation:</p><p>tax_1(priorityPerGas) + tax_2(priorityPerGas) = total MEV</p><p>(Technically, we could add a third term for <code>priorityPerGas * gasUsed</code> to account for the priority fee paid to the block proposer, but we will ignore that since, as discussed in Appendix A, it will likely be negligible under normal conditions.)</p><p>In the simple case of MEV taxes that are linear in <code>priorityPerGas</code> (so <code>tax_1(priorityPerGas) = a_1 * priorityPerGas</code>), you can solve for the share of MEV received by each application:</p><p>a_1 * priorityPerGas + a_2 * priorityPerGas = MEV priorityPerGas = MEV/(a_1 + a_2) tax_1(priorityPerGas) = (a_1/(a_1+a_2))*MEV tax_2(priorityPerGas) = (a_2/(a_1+a_2))*MEV</p><p>When setting its own MEV tax, an application faces a tradeoff—higher taxes let it capture a greater share of cross-application MEV when it occurs, but mean it could miss out on some cross-application MEV if there are competing ways to extract it. For example, if there is an AMM that charges a MEV tax on every trade, then a MEV-tax UniswapX order might be more likely to be filled by a different AMM or an offchain filler.</p><p>In many cases, there may be an equilibrium in which two applications design their MEV taxes in order to share MEV in a way that maximizes each of their welfare. For example, a MEV-tax AMM would likely want to capture value from a single informed trader near the top of the block, but then would want to provide liquidity to other traders and applications (including ones that use MEV taxes) with a low fixed fee. In that case, the AMM is likely to set a relatively low MEV tax (say, <code>$0.00001 * priorityFeePerGas</code>), so that the arbitrage transaction (if any) happens early in the block, and then charge no MEV tax on subsequent transactions in the block. Applications like UniswapX that want to interact with the AMM can set a much higher MEV tax (say <code>$0.01 * priorityFeePerGas</code>), to ensure that their transactions are included after the pool is already arbitraged. With those relative taxes, the AMM would end up arbed first even if there was only $1 of MEV on it and $50,000 of MEV in a UniswapX order.</p><p>We think this is a broad design space worthy of future study.</p><p></p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><h3 id="f6d13cd2a851">Incentive incompatibility</h3><p>MEV taxes are not incentive-compatible for a monopolistic block proposer. They only work if there is fair competition for transaction inclusion, which can only happen if the block proposer follows rules that we’ll call “competitive priority ordering,” rather than maximizing their own revenue. Informally and non-exhaustively, we suggest that these rules should include:</p><ul><li>Priority ordering. Transactions within a block must be ordered in descending order of <code>priorityFeePerGas</code>.</li><li>Censorship-resistance. If the block proposer receives a transaction t1 during the block, and the block is either not full or includes some transaction t2 such that <code>t2.priorityFeePerGas &lt; t1.priorityFeePerGas</code>, then the block must include transaction t1.</li><li>Pre-transaction privacy. The block proposer must accept transactions through a private endpoint and must not share such transactions with anyone else before committing to the block, or use the content of those transactions as an input in constructing its own transactions.</li><li>No last look. The block proposer must set a definite time <code>blockTime</code> before which they accept transactions from anyone, and after which they do not accept transactions from anyone.</li></ul><p>If one or more of these properties is violated, it may weaken the effectiveness of MEV taxes. A block proposer that violates censorship-resistance can avoid most MEV taxes by excluding competing transactions and submitting a zero-priority transaction that takes the opportunity for itself. A block proposer that violates pre-transaction privacy could steal MEV from other transactions or peek at their priority fees to know exactly how high it needs to set its own, while one that is able to submit transactions later than anyone else would have a free “last look” on whether to outbid others for an opportunity, either of which could create adverse selection problems that ultimately discourage competition.</p><p>Unfortunately, while the first property would be easy to enforce at the protocol layer, enforcing the other properties trustlessly is an open problem.</p><p>In the absence of enforcement at the protocol layer, a single sequencer who commits to these rules needs to be trusted not to deviate from them, and if proposers outsource block building to a competitive revenue-maximizing auction (such as Ethereum L1’s <a class="" href="https://github.com/flashbots/mev-boost">MEV-Boost</a>), blocks will likely not follow them.</p><p>These issues can be “solved” with a single trusted sequencer who commits to use competitive priority ordering for block building. They may also be solvable with a decentralized mechanism using some combination of consensus, cryptography, and/or trusted execution environments, such as Sorella’s Angstrom, Flashbots’s SUAVE, <a class="" href="../02/leaderless-auctions.html">Leaderless Auctions</a>, or <a class="" href="https://ethresear.ch/t/multiplicity-a-gadget-for-multiple-concurrent-block-proposers/14962">Multiplicity</a>.</p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><h3 id="6934ba8c81f7">Full blocks</h3><p>One exception to the normal operation of MEV taxes happens when blocks are completely full. In that case, block proposers may have to leave out lower-priority transactions, rather than simply including them late in the block. Since transactions that interact with MEV-taxed applications are likely to have extremely low priority fees, those applications are likely to be crowded out by applications that don’t use MEV taxes, or ones that have extremely low MEV taxes. However, in a chain that uses an EIP-1559-like mechanism to set a separate basefee, it should be relatively rare for blocks to be completely full. Additionally, given that <em>some</em> transactions need to be delayed when blocks are full, delaying transactions that express lower urgency by setting higher MEV taxes may be a reasonable result.</p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><h3 id="a77dc8c682c4">Reverted transactions</h3><p>MEV taxes effectively rely on single-block auctions in which every “bid” is a transaction. One downside of those auctions is that losing bids will generally result in reverted transactions being included onchain, paying some basefee and congesting the chain.</p><p>If a sequencer can exclude failed transactions entirely, that would alleviate this issue, though that can be difficult to implement even with a centralized sequencer. (It would also not strictly obey the censorship-resistance property described above, though that definition could be adjusted.) A more sophisticated sequencer may be able to optimize this process by allowing transactions to specify which contentious auctions they are participating in, giving the sequencer enough information to skip subsequent transactions that it knows would fail.</p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><h3 id="6373f109b34d">Leaking of user intents</h3><p>MEV taxes only work if there is competition among searchers, which means the opportunity needs to be somewhat widely known. For applications like AMMs, where the opportunity is visible onchain, that should happen naturally. But for applications like intent-based routing or backrunning auctions, that means the application may need to share the user’s intent with searchers.</p><p>In some cases, the temporary privacy lost from broadcasting the user’s intent before it is fulfilled may leak value in a way that cannot be recaptured by a MEV tax.</p><p>For example, suppose Alice wants to purchase a low-liquidity token using the backrunning auction protocol described above. She publishes a signed intent for her smart contract wallet to purchase that token on an AMM, setting some slippage tolerance. Searchers could race to push the price of that token to her slippage tolerance in a high-priority transaction, <em>without</em> filling the user’s order. The winner, Bob, could then non-competitively fill Alice’s intent by including and backrunning it in a low-priority transaction, thus sandwiching Alice’s trade and giving her a worse price while evading her MEV tax. A similar issue could happen with purchases of NFTs.</p><p>Note that such an attack would be risky for Bob, since he would not be able to guarantee atomicity between buying the token and selling it to Alice. A naïve Bob could fall victim to a “sandwich ripping” trap in which Alice publishes an intent to purchase a worthless token from herself, causing Bob to purchase it in anticipation of sandwiching her trade, but Alice revokes her intent before Bob is able to complete the sandwich.</p><p>Applications may also be able to mitigate this by limiting the set of searchers with which they share intents and monitoring their behavior, as many existing orderflow auctions do.</p><p>It may also be possible to combine MEV taxes with privacy-aware builder features like envisioned in Flashbots’s designs for <a class="" href="https://writings.flashbots.net/mevm-suave-centauri-and-beyond">SUAVE</a>.</p><p>Finally, in cases where Alice decides that the costs of sharing her intent outweigh the benefit from competitive searching, she could construct a transaction herself and submit it directly into the block. As discussed above, an ideal implementation of competitive priority ordering would provide pre-transaction privacy from the block proposer.</p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><h2 id="2c4a81b044ad">Discussion and prior work</h2><p><em>Priority gas auctions</em>. Some of the dynamics of priority ordering in decentralized blockchains were studied in the <a class="" href="https://arxiv.org/pdf/1904.05234">Flash Boys 2.0</a> paper, which coined the term “miner extractable value.” That paper observed that Ethereum miners (when that network used proof-of-work) were already ordering transactions by priority, and that arbitrageurs were relying on that behavior to participate in “priority gas auctions” in which they bid for the right to be included first in a block, which led to much of the MEV from decentralized exchange arbitrage accruing to miners.</p><p><em>First come, first served</em>. Some attempts at MEV mitigation through transaction ordering rules, such as <a class="" href="https://eprint.iacr.org/2021/1465">Themis</a> or <a class="" href="https://docs.arbitrum.io/learn-more/faq#does-arbitrum-have-a-mempool">Arbitrum One’s current sequencer</a>,<a id="fn-ref-7" class="text-green font-mono align-super text-mono-12" href="priority-is-all-you-need.html#fn-7">7 </a>have focused on enforcing a different ordering rule, <em>first come, first served</em> (sometimes called “fair ordering”) where block proposers must order transactions in the order in which they see them.</p><p>Priority ordering takes a different approach—treating transactions that arrive within a given period equally, and ordering them instead by their declared priority.</p><p>First come, first served is difficult to enforce or even define in a real network environment with more than one validator. It also can result in wasteful latency races and spam even with a single trusted sequencer. Finally, MEV taxes may be able to eliminate certain kinds of MEV that first-come first-served ordering cannot, such as arbitrage profits from discontinuous “jumps” in asset prices. The potential advantages of priority ordering over first-come first-served ordering are somewhat related to the advantages of discrete-time over continuous-time exchanges discussed in <a class="" href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2388265">Budish, Cramton, Shim (2015)</a>.</p><p>Meanwhile, while priority ordering seems to leak value to MEV by default, this post shows how applications can be designed to recapture it.</p><p><em>Fee sharing</em>. Blast, an Ethereum L2, <a class="" href="https://docs.blast.io/building/guides/gas-fees">shares</a> a portion of both priority and base fees with the smart contracts accessed in a transaction.</p><p>MEV taxes allow something similar (at least for priority fees), but can be implemented at the application layer on <em>any</em> chain that uses competitive priority ordering, without special support for fee sharing. They also allow applications to define their own taxes as custom functions of priority fee, providing more flexibility and potentially resulting in greater composeability of MEV-aware applications.</p><p><em>Trustless solutions</em>. This post focuses on the motivation for platforms to use competitive priority ordering—and ways to take advantage of platforms that do—rather than discussing how to trustlessly enforce it.</p><p>There has been significant prior discussion of each of the other properties required for competitive priority ordering. For example, in <a class="" href="https://arxiv.org/pdf/2301.13321">Fox, Pai, Resnick (2023)</a>, the authors discuss vulnerabilities in onchain auctions in the absence of censorship resistance, and describe a design for a censorship resistant auction using multiple concurrent proposers. However, they do not suggest a specific ordering for transactions.</p><p>There has been other research on constructing mechanisms for trust-minimized block building, including Flashbots’s <a class="" href="https://writings.flashbots.net/mevm-suave-centauri-and-beyond">SUAVE</a>, <a class="" href="https://x.com/SorellaLabs">Sorella</a>’s Angstrom, <a class="" href="../02/leaderless-auctions.html">Leaderless Auctions</a>, Espresso and Offchain Labs’ <a class="" href="https://medium.com/@espressosys/espresso-systems-and-offchain-labs-release-r-d-roadmap-for-decentralized-timeboost-5d0007dff66d">decentralized Timeboost</a>, and <a class="" href="https://gist.github.com/karalabe/4313ece67b528113ea72388ac2df25d8">mandated public transaction inclusion</a> by Péter Szilági.</p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"><div class="flex flex-col gap-2 font-mono text-mono-12 break-words"><h3 class="font-medium">7</h3><div class="rich-text line-break rich-text-post rich-text-inline"><p>Arbitrum has <a class="" href="https://research.arbitrum.io/t/proposed-design-for-timeboost/9491">discussed</a> replacing this with a form of priority ordering called Timeboost, but that has not been put into production as of this writing.</p><span>. </span><a class="inline-block" href="priority-is-all-you-need.html#fn-ref-7">↩</a></div></div></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><h2 id="ccf8e00cd865">Conclusion</h2><p>We hope this post encourages L2s to consider using priority ordering (as is supported by default in the OP Stack) and inspires applications to try out MEV taxes where supported.</p><p>We also hope it motivates further research into protocols for trust-minimized competitive priority ordering on both L1 and L2. If you’re interested in collaborating on that problem, and are reading this before Thursday, June 6, you can still apply for a TLDR Fellowship to work on <a class="" href="https://www.tldresear.ch/tldr/tldr-request-for-papers/mev-resistant-l2-sequencers">MEV-resistant L2 sequencers</a> with Dan. Or feel free to just reach out to <a class="" href="mailto:dan@paradigm.xyz">dan@paradigm.xyz</a> and <a class="" href="mailto:dave@paradigm.xyz">dave@paradigm.xyz</a> with ideas!</p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div></div><div class="hidden lg:block sticky bottom-1 left-1"><button class="link-tag flex items-center gap-1 p-1 relative"><div class="tag"></div><div class="button button-tag uppercase link-cover">Hide<!-- --> Footnotes</div></button></div></div><footer class="px-container-mobile md:px-container-desktop py-7 md:py-8 md:pb-7"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-5 xl:col-start-4 flex flex-row gap-10 max-w-[900px]"><div class="flex flex-col gap-6 max-w-[900px]"><div class="flex flex-col gap-2"><h3 class="font-mono text-mono-12 font-medium">Footnotes</h3><div class="grid grid-cols-6"><p id="fn-1" class="col-span-1 font-mono text-mono-12 font-medium">1</p><div class="col-span-5 rich-text line-break rich-text-post rich-text-inline font-mono text-mono-12"><p>In this post, we use “proposer” to refer to the actor or process that determines what transactions are included in a particular block. On Ethereum L2s, this role is typically filled by a “sequencer.” On Ethereum L1, it is filled by a specific Ethereum validator called a proposer, though often the proposer outsources the task of building the block to a competitive auction in which “relayers” and “builders” participate. The details of how these responsibilities are divided are out of scope of this post.</p><span>. </span><a class="inline-block" href="priority-is-all-you-need.html#fn-ref-1">↩</a></div></div><div class="grid grid-cols-6"><p id="fn-2" class="col-span-1 font-mono text-mono-12 font-medium">2</p><div class="col-span-5 rich-text line-break rich-text-post rich-text-inline font-mono text-mono-12"><p>The priority fee per gas is not actually specified explicitly in the transaction, but can be computed in it. The transaction specifies a gas price, but Ethereum also charges a base fee, which is taken out of the gas price and burned. The base fee should be ignored for purposes of MEV taxes, since it is not under the transactor’s control. The priority fee per gas—the price for the part of the transaction fee that goes to the block proposer—can be computed in Solidity as <code>priorityGasPrice = tx.gasprice - block.basefee</code>.</p><span>. </span><a class="inline-block" href="priority-is-all-you-need.html#fn-ref-2">↩</a></div></div><div class="grid grid-cols-6"><p id="fn-3" class="col-span-1 font-mono text-mono-12 font-medium">3</p><div class="col-span-5 rich-text line-break rich-text-post rich-text-inline font-mono text-mono-12"><p>Alternatively, we could simply define “MEV” to exclude any searcher profit and only refer to value that would go to the validator.</p><span>. </span><a class="inline-block" href="priority-is-all-you-need.html#fn-ref-3">↩</a></div></div><div class="grid grid-cols-6"><p id="fn-4" class="col-span-1 font-mono text-mono-12 font-medium">4</p><div class="col-span-5 rich-text line-break rich-text-post rich-text-inline font-mono text-mono-12"><p>Note that <code>proposerPriorityFee</code>—equal to <code>priorityFeePerGas</code> times the total gas used in the transaction—cannot actually be calculated during the contract, since there’s no way to know how much gas the transaction will end up using. However, this generally won’t matter, since all we need is an upper bound for it. To be safe, you could multiply <code>priorityFeePerGas</code> by 30 million—the current maximum gas in an Ethereum block. Overestimating this value will simply mean that the MEV tax captures an even greater percentage of MEV.</p><span>. </span><a class="inline-block" href="priority-is-all-you-need.html#fn-ref-4">↩</a></div></div><div class="grid grid-cols-6"><p id="fn-5" class="col-span-1 font-mono text-mono-12 font-medium">5</p><div class="col-span-5 rich-text line-break rich-text-post rich-text-inline font-mono text-mono-12"><p>Assuming a transaction cannot be more than 30 million gas, a <code>priorityFeePerGas</code> of 50,000 would result in a gas payment of 1500 gwei—about $0.006 at an ETH price of $4000.</p><span>. </span><a class="inline-block" href="priority-is-all-you-need.html#fn-ref-5">↩</a></div></div><div class="grid grid-cols-6"><p id="fn-6" class="col-span-1 font-mono text-mono-12 font-medium">6</p><div class="col-span-5 rich-text line-break rich-text-post rich-text-inline font-mono text-mono-12"><p>In the case where priorityFeePerGas is set so that the arbitrageur’s profit is zero, the profit-maximizing arbitrage trade should correspond to the same trade on the <a class="" href="https://arxiv.org/pdf/2307.02074">function-maximizing AMM</a>. Proving this is left as an exercise for the reader.</p><span>. </span><a class="inline-block" href="priority-is-all-you-need.html#fn-ref-6">↩</a></div></div><div class="grid grid-cols-6"><p id="fn-7" class="col-span-1 font-mono text-mono-12 font-medium">7</p><div class="col-span-5 rich-text line-break rich-text-post rich-text-inline font-mono text-mono-12"><p>Arbitrum has <a class="" href="https://research.arbitrum.io/t/proposed-design-for-timeboost/9491">discussed</a> replacing this with a form of priority ordering called Timeboost, but that has not been put into production as of this writing.</p><span>. </span><a class="inline-block" href="priority-is-all-you-need.html#fn-ref-7">↩</a></div></div></div><div class="flex flex-col gap-2"><h3 class="font-mono text-mono-12 font-medium">Written by</h3><div class="flex flex-col gap-2"><div class="md:p-2 md:border md:border-solid md:border-gray-border"><div class="grid md:grid-cols-5 gap-2"><div class="md:col-span-2"><a class="block w-full" href="../../team/danrobinson/index.html"><div class="image overflow-hidden block w-full aspect-square"><picture><img class="scale-105 blur-lg" src="data:image/jpeg;base64,/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAUHCAL/xAAkEAABBAEEAgIDAAAAAAAAAAABAAIDBAUGERITBzEhYVFyof/EABcBAAMBAAAAAAAAAAAAAAAAAAACAwH/xAAZEQEBAAMBAAAAAAAAAAAAAAABAAISMVH/2gAMAwEAAhEDEQA/ALBrUhHj5pNw14YSCT8A7KA0NWdZys8gyTrMMkXJ8L38uL9/Y+lUXm3Wt859uHpW5IaUTB2tjdtzJ97qCz+dt4Ovi7GItyV5mjkCw7bj7/KEVGvuAiWm7WODZnABFH6M1IzP6Yx+Rlc3uliHZ+w9ontGyd5De6TWGSe87u7QFxquRzq+PBPqJES0fa2PElydmjIGteeIkeB/ERExVx5f/9k="/></picture></div></a></div><div class="md:col-span-3 font-mono text-mono-12"><div class="flex flex-col gap-2"><div class="flex flex-col gap-1 md:gap-2"><div class="flex flex-col gap-half"><p class="font-medium"><a class="link-underline-hover" href="../../team/danrobinson/index.html">Dan Robinson</a></p><p>General Partner</p></div><div class="flex gap-1 flex-wrap"><a _key="6738ffc28bba" class="block button button-tag" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/danielprobinson/">LinkedIn</a><a _key="44c9b840cad2" class="block button button-tag" target="_blank" rel="noopener noreferrer" href="https://twitter.com/danrobinson">Twitter</a><a _key="8ad39bdaa28b" class="block button button-tag" target="_blank" rel="noopener noreferrer" href="https://warpcast.com/danrobinson">Warpcast</a></div></div><div class="flex flex-col gap-1"><h4 class="md:hidden font-medium">Biography</h4><div class="lg:line-clamp-[10] rich-text-inline"><p>Dan Robinson is a General Partner at Paradigm, focused on crypto investments and research into open-source protocols. Previously, Dan was a protocol researcher at Interstellar. Before Interstellar, Dan practiced as a litigation attorney at Paul, Weiss, Rifkind, Wharton &amp; Garrison LLP. He earned a J.D. from Harvard Law School and an A.B. from Harvard University.</p> <a class="button button-tag-inline relative top-[2px]" href="../../team/danrobinson/index.html"><svg width="12" height="6" viewBox="0 0 12 6" class="mx-auto mt-[4px] rotate-180"><path d="M0 3L5 5.88675L5 0.113248L0 3ZM12 2.5L4.5 2.5L4.5 3.5L12 3.5L12 2.5Z" fill="currentColor"></path></svg></a></div></div></div></div></div></div><div class="md:p-2 md:border md:border-solid md:border-gray-border"><div class="grid md:grid-cols-5 gap-2"><div class="md:col-span-2"><a class="block w-full" href="../../team/davewhite/index.html"><div class="image overflow-hidden block w-full aspect-square"><picture><img class="scale-105 blur-lg" src="data:image/jpeg;base64,/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAOABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMFBAf/xAAiEAACAQQCAQUAAAAAAAAAAAABAgADBAURBhITFCExQVH/xAAXAQADAQAAAAAAAAAAAAAAAAAAAQIE/8QAFxEBAQEBAAAAAAAAAAAAAAAAAAERMf/aAAwDAQACEQMRAD8A6Zi8cnj0o2xHtF8Yxd36a8bIUmQeUhNt22P2M41fmsXBX4pkyhjcgptrkIjDS719QvWjaj3eMpiu2oTPd5NjXY9YSzf/2Q=="/></picture></div></a></div><div class="md:col-span-3 font-mono text-mono-12"><div class="flex flex-col gap-2"><div class="flex flex-col gap-1 md:gap-2"><div class="flex flex-col gap-half"><p class="font-medium"><a class="link-underline-hover" href="../../team/davewhite/index.html">Dave White</a></p><p>Research Partner</p></div><div class="flex gap-1 flex-wrap"><a _key="8093b183dce7" class="block button button-tag" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/david-alexander-white/">LinkedIn</a><a _key="44de8ef53a0c" class="block button button-tag" target="_blank" rel="noopener noreferrer" href="https://twitter.com/_Dave__White_">Twitter</a><a _key="b052f56a57ff" class="block button button-tag" target="_blank" rel="noopener noreferrer" href="https://warpcast.com/davewhite">Warpcast</a></div></div><div class="flex flex-col gap-1"><h4 class="md:hidden font-medium">Biography</h4><div class="lg:line-clamp-[10] rich-text-inline"><p>Dave White is a Research Partner at Paradigm. Previously, Dave was a quantitative trader and researcher at firms including Headlands, Two Sigma, and Cutler Group. He is three credits shy of an A.B. in Mathematics from Harvard University.</p> <a class="button button-tag-inline relative top-[2px]" href="../../team/davewhite/index.html"><svg width="12" height="6" viewBox="0 0 12 6" class="mx-auto mt-[4px] rotate-180"><path d="M0 3L5 5.88675L5 0.113248L0 3ZM12 2.5L4.5 2.5L4.5 3.5L12 3.5L12 2.5Z" fill="currentColor"></path></svg></a></div></div></div></div></div></div></div></div><div class="rich-text line-break font-mono text-mono-12"><p>Disclaimer: This post is for general information purposes only. It does not constitute investment advice or a recommendation or solicitation to buy or sell any investment and should not be used in the evaluation of the merits of making any investment decision. It should not be relied upon for accounting, legal or tax advice or investment recommendations. This post reflects the current opinions of the authors and is not made on behalf of Paradigm or its affiliates and does not necessarily reflect the opinions of Paradigm, its affiliates or individuals associated with Paradigm. The opinions reflected herein are subject to change without being updated.</p></div></div></div></div></footer><div class="p-3 md:pt-6 bg-black text-white font-mono text-mono-12"><div class="flex flex-col gap-6"><div class="grid grid-cols-12 gap-y-6"><div class="col-span-12 md:col-span-3"><div class="flex"><svg width="94" height="108" viewBox="0 0 94 108" class="text-green block w-[53px] h-[60px] md:w-[94px] md:h-[108px]"><path d="M94 33.2314L36.1538 0L28.9231 4.15692V12.4628L21.6923 8.30585L14.4615 12.4628V20.7686L7.23077 16.6117L0 20.7686V87.2314L7.23077 91.3883L14.4615 87.2314V95.5372L21.6923 99.6942L28.9231 95.5372V103.843L36.1538 108L94 74.7686V66.4628L86.7692 62.3059L94 58.1489V49.8431L86.7692 45.6862L94 41.5292V33.2314ZM14.4615 78.9255L7.23077 83.0825V24.9255L14.4615 29.0825V78.9255ZM36.1538 83.0745V74.7686L65.0769 58.1569L72.3077 62.3138L36.1538 83.0745ZM57.8462 54L36.1538 66.4628V41.5372L57.8462 54ZM65.0769 49.8431L36.1538 33.2314V24.9255L72.3077 45.6942L65.0769 49.8431ZM21.6923 16.6117L28.9231 20.7686V29.0745L21.6923 24.9175V16.6117ZM21.6923 33.2314L28.9231 37.3883V70.6197L21.6923 74.7766V33.2314ZM21.6923 83.0745L28.9231 78.9175V87.2234L21.6923 91.3803V83.0745ZM86.7692 70.6117L36.1538 99.6862V91.3803L79.5385 66.4548L86.7692 70.6117ZM86.7692 54L79.5385 58.1569L72.3077 54L79.5385 49.8431L86.7692 54ZM79.5385 41.5372L36.1538 16.6117V8.30585L86.7692 37.3803L79.5385 41.5372Z" fill="currentColor"></path></svg></div></div><div class="col-span-12 md:col-span-6 flex flex-col gap-6"><div class="grid md:grid-cols-3 gap-y-1"><div><ul class="flex flex-col gap-1"><li><a _key="c617717bef10" class="link-underline-hover uppercase font-medium" href="../../about.html">About</a></li><li><a _key="445b500c20cd" class="link-underline-hover uppercase font-medium" href="../../team.html">Team</a></li><li><a _key="ae321ba66fad" class="link-underline-hover uppercase font-medium" href="../../portfolio.html">Portfolio</a></li></ul></div><div><ul class="flex flex-col gap-1"><li><a _key="6862d607fb16" class="link-underline-hover uppercase font-medium" href="../../writing.html">Writing</a></li><li><a _key="ce7b888d0e75" class="link-underline-hover uppercase font-medium" href="../../oss.html">Open Source</a></li><li><a _key="927788bfed4f" class="link-underline-hover uppercase font-medium" href="../../careers.html">Careers</a></li></ul></div><div><ul class="flex flex-col gap-1"><li><a _key="02f85bf11b4a" class="link-underline-hover uppercase font-medium" target="_blank" rel="noopener noreferrer" href="https://app.junipersquare.com/i/paradigm">LP Login</a></li></ul></div></div><div class="grid md:grid-cols-3 gap-y-1"><div><a _key="f325e52a9ec5" class="link-underline-hover" target="_blank" rel="noopener noreferrer" href="https://twitter.com/paradigm">Twitter</a></div><div><a _key="f231f3484f95" class="link-underline-hover" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/company/paradigm-xyz/">LinkedIn</a></div><div><a _key="1c198033e797" class="link-underline-hover" target="_blank" rel="noopener noreferrer" href="https://warpcast.com/paradigm">Warpcast</a></div><div><a _key="d8394a8a29cb" class="link-underline-hover" href="../../contact.html">Contact</a></div></div></div></div><div class="grid grid-cols-12 items-end gap-y-6"><div class="col-span-12 md:col-span-3"><ul class="flex flex-col gap-1"><li><a _key="d6e347271e47" class="link-underline-hover" href="../../website-terms-of-use.html">Terms</a></li><li><a _key="29e55cad5ff7" class="link-underline-hover" href="../../important-disclosures.html">Disclosures</a></li><li><a _key="02e810af4cf8" class="link-underline-hover" href="../../privacy-policy.html">Privacy</a></li><li><a _key="520d04d2ff65" class="link-underline-hover" href="../../privacy-policy.html#83a48e65d92d">CA Privacy</a></li></ul></div><div class="col-span-12 md:col-span-6"><p>Copyright © 2025 Paradigm Operations LP All rights reserved. “Paradigm” is a trademark, and the triangular mobius symbol is a registered trademark of Paradigm Operations LP</p></div><div class="col-span-12 md:col-span-3"><div class="flex justify-between md:justify-end"><div class="tag block md:hidden"></div><div class="tag"></div></div></div></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"layout":{"header":{"desktopLinks":[{"page":{"_type":"reference","_ref":"8a0be9a1-8ab7-4a76-9d11-5b0d2636b14e"},"_key":"426608038e76","slug":"about","openInNewWindow":null,"title":null,"pageName":"About","_type":"pageLink"},{"openInNewWindow":null,"_type":"link","_key":"ff5f78089e91","title":"Team","url":"/team"},{"title":null,"pageName":"Portfolio","slug":"portfolio","_type":"pageLink","page":{"_ref":"5413381f-bafa-4f3e-bba8-91d912b8db45","_type":"reference"},"_key":"38b3cd4525de","openInNewWindow":null},{"title":"Writing","url":"/writing","openInNewWindow":null,"_type":"link","_key":"22b86a453ca1"},{"page":{"_ref":"cd2cf7f4-c943-4bfe-928b-ee045fba8a9f","_type":"reference"},"_key":"cd5b2c9fbd5f","openInNewWindow":null,"title":null,"pageName":"Open Source","slug":"oss","_type":"pageLink"},{"openInNewWindow":null,"title":"Careers","url":"/careers","_type":"link","_key":"05b4198b2e14"}],"mobileLinks":[{"title":null,"_type":"pageLink","page":{"_ref":"8a0be9a1-8ab7-4a76-9d11-5b0d2636b14e","_type":"reference"},"_key":"ad3cf4299bd8","pageName":"About","slug":"about","openInNewWindow":null},{"title":"Team","url":"/team","_type":"link","_key":"cdc21cfec068","openInNewWindow":null},{"slug":"portfolio","_key":"56f654c719a3","_type":"pageLink","page":{"_ref":"5413381f-bafa-4f3e-bba8-91d912b8db45","_type":"reference"},"openInNewWindow":null,"title":null,"pageName":"Portfolio"},{"openInNewWindow":null,"title":"Writing","url":"/writing","_type":"link","_key":"f8ada95cbc04"},{"slug":"oss","_type":"pageLink","page":{"_ref":"cd2cf7f4-c943-4bfe-928b-ee045fba8a9f","_type":"reference"},"_key":"8e6834f3c151","openInNewWindow":null,"title":null,"pageName":"Open Source"},{"_type":"link","openInNewWindow":null,"_key":"027927bd5b1f","title":"Careers","url":"/careers"}],"mobileSmallLinks":[{"url":"https://app.junipersquare.com/i/paradigm","openInNewWindow":true,"_type":"link","_key":"8fb4f75b65fa","title":"LP Login"}],"socialLinks":[{"_type":"link","_key":"389a7a5bd2b7","title":"Twitter","url":"https://twitter.com/paradigm","openInNewWindow":true},{"title":"LinkedIn","url":"https://www.linkedin.com/company/paradigm-xyz/","openInNewWindow":true,"_type":"link","_key":"309ee4c0c92b"},{"_key":"caa5dd28bb8e","title":"Warpcast","url":"https://warpcast.com/paradigm","openInNewWindow":true,"_type":"link"},{"_key":"c747bb27efab","_type":"pageLink","openInNewWindow":null,"title":null,"pageName":"Contact","slug":"contact","page":{"_ref":"57df6e24-c479-4932-861a-f7b349880f5f","_type":"reference"}}],"legalLinks":[{"page":{"_ref":"d33b5b91-90eb-4b9f-9eba-d894012bcc53","_type":"reference"},"_key":"798f6ddf0d55","title":"Terms","pageName":"Website Terms of Use","slug":"website-terms-of-use","openInNewWindow":null,"_type":"pageLink"},{"pageName":"Important Disclosures","slug":"important-disclosures","_type":"pageLink","page":{"_ref":"c7027d0e-71a0-4bc4-b4ad-61cd2c3685a7","_type":"reference"},"_key":"a5c485dc29ed","title":"Disclosures","openInNewWindow":null},{"slug":"privacy-policy","openInNewWindow":null,"_key":"d66378d18c1a","title":"Privacy","_type":"pageLink","page":{"_ref":"081c96bd-e746-495c-998f-dc5e1421b55e","_type":"reference"},"pageName":"Privacy Policy"},{"url":"/privacy-policy#83a48e65d92d","openInNewWindow":false,"_type":"link","_key":"e8f366883ed3","title":"CA Privacy"}]},"footer":{"linkColumns":[{"_key":"520a97f1c3b3","links":[{"openInNewWindow":null,"title":null,"pageName":"About","slug":"about","_type":"pageLink","page":{"_type":"reference","_ref":"8a0be9a1-8ab7-4a76-9d11-5b0d2636b14e"},"_key":"c617717bef10"},{"slug":"team","_type":"pageLink","page":{"_type":"reference","_ref":"c0cc1f2f-202f-4d37-b5bb-dc9edb7edf62"},"_key":"445b500c20cd","openInNewWindow":null,"title":null,"pageName":"Team"},{"title":null,"pageName":"Portfolio","slug":"portfolio","_type":"pageLink","page":{"_ref":"5413381f-bafa-4f3e-bba8-91d912b8db45","_type":"reference"},"_key":"ae321ba66fad","openInNewWindow":null}]},{"_key":"0d51d5f77b26","links":[{"_type":"pageLink","page":{"_type":"reference","_ref":"c4ba5025-72c6-4c4d-a5a1-c46dfcce2cea"},"_key":"6862d607fb16","openInNewWindow":null,"title":null,"pageName":"Writing","slug":"writing"},{"_type":"pageLink","page":{"_ref":"cd2cf7f4-c943-4bfe-928b-ee045fba8a9f","_type":"reference"},"_key":"ce7b888d0e75","openInNewWindow":null,"title":null,"pageName":"Open Source","slug":"oss"},{"_key":"927788bfed4f","title":"Careers","openInNewWindow":null,"url":"/careers","_type":"link"}]},{"_key":"efc2b524a0f6","links":[{"openInNewWindow":true,"_type":"link","_key":"02f85bf11b4a","title":"LP Login","url":"https://app.junipersquare.com/i/paradigm"}]}],"socialLinks":[{"title":"Twitter","url":"https://twitter.com/paradigm","openInNewWindow":true,"_type":"link","_key":"f325e52a9ec5"},{"openInNewWindow":true,"_type":"link","_key":"f231f3484f95","title":"LinkedIn","url":"https://www.linkedin.com/company/paradigm-xyz/"},{"url":"https://warpcast.com/paradigm","openInNewWindow":true,"_type":"link","_key":"1c198033e797","title":"Warpcast"},{"_type":"pageLink","page":{"_ref":"57df6e24-c479-4932-861a-f7b349880f5f","_type":"reference"},"_key":"d8394a8a29cb","openInNewWindow":null,"title":null,"pageName":"Contact","slug":"contact"}],"legalLinks":[{"page":{"_type":"reference","_ref":"d33b5b91-90eb-4b9f-9eba-d894012bcc53"},"_key":"d6e347271e47","title":"Terms","slug":"website-terms-of-use","openInNewWindow":null,"pageName":"Website Terms of Use","_type":"pageLink"},{"openInNewWindow":null,"pageName":"Important Disclosures","slug":"important-disclosures","_type":"pageLink","page":{"_ref":"c7027d0e-71a0-4bc4-b4ad-61cd2c3685a7","_type":"reference"},"_key":"29e55cad5ff7","title":"Disclosures"},{"openInNewWindow":null,"_type":"pageLink","page":{"_ref":"081c96bd-e746-495c-998f-dc5e1421b55e","_type":"reference"},"_key":"02e810af4cf8","title":"Privacy","pageName":"Privacy Policy","slug":"privacy-policy"},{"url":"/privacy-policy#83a48e65d92d","openInNewWindow":false,"_type":"link","_key":"520d04d2ff65","title":"CA Privacy"}],"legalStatement":"Copyright © [YEAR] Paradigm Operations LP All rights reserved. “Paradigm” is a trademark, and the triangular mobius symbol is a registered trademark of Paradigm Operations LP"},"postDisclaimer":{"disclaimer":[{"markDefs":[],"children":[{"_type":"span","marks":[],"text":"Disclaimer: This post is for general information purposes only. It does not constitute investment advice or a recommendation or solicitation to buy or sell any investment and should not be used in the evaluation of the merits of making any investment decision. It should not be relied upon for accounting, legal or tax advice or investment recommendations. This post reflects the current opinions of the authors and is not made on behalf of Paradigm or its affiliates and does not necessarily reflect the opinions of Paradigm, its affiliates or individuals associated with Paradigm. The opinions reflected herein are subject to change without being updated.","_key":"da9bfb35a7960"}],"_type":"block","style":"normal","_key":"45dda89c171b","asset":null}]},"careersIndex":{"indexTitle":"Opportunities","description":[{"asset":null,"children":[{"_type":"span","marks":[],"text":"Browse through careers and opportunities in the Paradigm universe.","_key":"fdbf7aeff6590"}],"_type":"block","style":"normal","_key":"6663134c09b3","markDefs":[]}]}},"config":{"seo":{"hideFromSitemap":null,"metaTitle":"Paradigm","metaKeywords":null,"openGraphDescription":"Paradigm is a research-driven crypto investment firm that funds companies and protocols from their earliest stages.","twitterTitle":"Paradigm","twitterDescription":"Paradigm is a research-driven crypto investment firm that funds companies and protocols from their earliest stages.","twitterImage":{"_type":"image","_key":null,"alt":null,"lqip":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABa0lEQVQokX1Su47CMBD0T9PQU/ML/MBVFCBRUlAgJIQUBQVOPAyBEMgLbOJc7DnZRyAEuI1W2qzXs7OzJqiY0p9Sf7FSb704E0IgCAJ4nmfcdV2QKuAd+HaxGkM9cmmawvd9bDYbrNdrzGYzkGrX8r9UErGMQX8o/NyHUOKpRgPu93vM53NMp1OMx+MHYBVUG1ccw3SI1rmFL/YFJ3MMaFGX5zmSJDEMNeBoNHqM/E4nza7N26gFNdTDOjq8g0QmT/VSSlyvVxyPRyyXSxDd5ZPwZ3lGj/fQiBpoxk0M0gGYZK+6AoatloBcLhcTFMDlTTPBYIUWul4Xfa8PGlOI7KYjXgloI3rdYRiCMWaegR6hKNI56lLY3zZsxwal1OTKeqMiF9lut2ZTu90Oh8MBnPP7YZZl0BNEYYTT6YQoiu4My0DlmKxWKywWC7Mlx3EMW82y2vm/11A2YlkWJpOJcdu2DZMy4Dv7lNeAv2hnUK/yFW33AAAAAElFTkSuQmCC","dimensions":{"_type":"sanity.imageDimensions","width":2400,"aspectRatio":1.9047619047619047,"height":1260},"url":"https://cdn.sanity.io/images/dgybcd83/production/fd732ebeb1c4d286fd7e3b5b25395d72452edeb6-2400x1260.png"},"disallowRobots":null,"metaDescription":"Paradigm is a research-driven crypto investment firm that funds companies and protocols from their earliest stages.","openGraphTitle":"Paradigm","openGraphImage":{"dimensions":{"height":1260,"_type":"sanity.imageDimensions","width":2400,"aspectRatio":1.9047619047619047},"url":"https://cdn.sanity.io/images/dgybcd83/production/fd732ebeb1c4d286fd7e3b5b25395d72452edeb6-2400x1260.png","_type":"image","_key":null,"alt":null,"lqip":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABa0lEQVQokX1Su47CMBD0T9PQU/ML/MBVFCBRUlAgJIQUBQVOPAyBEMgLbOJc7DnZRyAEuI1W2qzXs7OzJqiY0p9Sf7FSb704E0IgCAJ4nmfcdV2QKuAd+HaxGkM9cmmawvd9bDYbrNdrzGYzkGrX8r9UErGMQX8o/NyHUOKpRgPu93vM53NMp1OMx+MHYBVUG1ccw3SI1rmFL/YFJ3MMaFGX5zmSJDEMNeBoNHqM/E4nza7N26gFNdTDOjq8g0QmT/VSSlyvVxyPRyyXSxDd5ZPwZ3lGj/fQiBpoxk0M0gGYZK+6AoatloBcLhcTFMDlTTPBYIUWul4Xfa8PGlOI7KYjXgloI3rdYRiCMWaegR6hKNI56lLY3zZsxwal1OTKeqMiF9lut2ZTu90Oh8MBnPP7YZZl0BNEYYTT6YQoiu4My0DlmKxWKywWC7Mlx3EMW82y2vm/11A2YlkWJpOJcdu2DZMy4Dv7lNeAv2hnUK/yFW33AAAAAElFTkSuQmCC"}}},"passwordProtection":{"enablePassword":false,"password":"paradigm"},"seo":{"openGraphImage":{"_type":"image","_key":null,"alt":null,"lqip":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABZ0lEQVQokZWSR6/CQAyE9wiEXoQCoRfRa+AAiCohceL//5p5+iyBHoIDHCbx2p5Z22sXjUb1LbLZrCaTiTabjdrttuLxuCKRyEuOw/EtHoLb7VbdblfJZPIlboKe5ymRSFgQPOxUKmX248y/UCiY4Ol00mq1UqlUMj8a5BB3fAjUajXV63W1Wi31+31Dp9MxUA0tYiN0v98Ny+XSeEEQGG86nco1Gg1LhjQYDLRer62C/X5vNiT+CEHgfL1eTfB4PCoMw2cOs3WIcDPCYDwe63A4GGm322k+nz8J2LRMDuAchqFhsVhYzDWbTfm+r1wuZ0Mvl8smcLvddLlcNJvNrPLRaGSE4XCoSqViuYwrCAJVq1XjFYtFOYbPUHmhWCymdDqtXq9nYrRAMmQuzOfz9ucByIXjed4T+N7Wht1ipsyHNqni0woh9snv/i8lDm6nwvP5bA+B4C/L/yaYyWTsNRFkfrT4i+AfSdghCeYZAK0AAAAASUVORK5CYII=","dimensions":{"_type":"sanity.imageDimensions","width":2400,"aspectRatio":1.7777777777777777,"height":1350},"url":"https://cdn.sanity.io/images/dgybcd83/production/3ecc45d287288631b7478b0ac6aebd426282afd5-2400x1350.png"},"twitterDescription":null,"hideFromSitemap":null,"disallowRobots":null,"twitterTitle":null,"twitterImage":null,"metaTitle":null,"metaDescription":null,"metaKeywords":null,"openGraphTitle":"Priority Is All You Need","openGraphDescription":"In this post, we introduce MEV taxes, a mechanism that arbitrary applications can use to capture their own MEV. This mechanism could be used today on OP Stack L2s like OP Mainnet, Base, and Blast, because the block proposers on those chains follow a set of rules we call competitive priority ordering."},"_id":"04b5f30f-a14e-4afd-84d7-8b872dfc9a72","_type":"post","title":"Priority Is All You Need","slug":"priority-is-all-you-need","authors":[{"name":"Dan Robinson","portrait":{"_type":"imageAlt","_key":null,"alt":null,"lqip":"data:image/jpeg;base64,/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAUHCAL/xAAkEAABBAEEAgIDAAAAAAAAAAABAAIDBAUGERITBzEhYVFyof/EABcBAAMBAAAAAAAAAAAAAAAAAAACAwH/xAAZEQEBAAMBAAAAAAAAAAAAAAABAAISMVH/2gAMAwEAAhEDEQA/ALBrUhHj5pNw14YSCT8A7KA0NWdZys8gyTrMMkXJ8L38uL9/Y+lUXm3Wt859uHpW5IaUTB2tjdtzJ97qCz+dt4Ovi7GItyV5mjkCw7bj7/KEVGvuAiWm7WODZnABFH6M1IzP6Yx+Rlc3uliHZ+w9ontGyd5De6TWGSe87u7QFxquRzq+PBPqJES0fa2PElydmjIGteeIkeB/ERExVx5f/9k=","dimensions":{"_type":"sanity.imageDimensions","width":4991,"aspectRatio":1,"height":4991},"url":"https://cdn.sanity.io/images/dgybcd83/production/d8aee6ceefc3025593928dc9142f25903563fb7c-4991x4991.jpg"},"_id":"8a786bd2-8bdc-4935-b8c3-85b32d9a5980","_type":"teamMember","tags":[{"_id":"e7cc8e78-9951-4bd0-9359-2de52c2c71e0","slug":"leadership","title":"Leadership","subTags":null},{"_id":"5f451f5f-7e63-41bf-94e2-e9086936db67","slug":"investing-and-research","title":"Investing \u0026 Research","subTags":null},{"_id":"d653d2da-dd5c-436c-96f1-3468da8fc86a","slug":"sort-priority-5","title":"(Sort Priority) 5","subTags":null}],"slug":"dan-robinson","links":[{"url":"https://www.linkedin.com/in/danielprobinson/","openInNewWindow":true,"_type":"link","_key":"6738ffc28bba","title":"LinkedIn"},{"url":"https://twitter.com/danrobinson","openInNewWindow":true,"_type":"link","_key":"44c9b840cad2","title":"Twitter"},{"url":"https://warpcast.com/danrobinson","openInNewWindow":true,"_type":"link","_key":"8ad39bdaa28b","title":"Warpcast"}],"title":"General Partner","hideOnAll":null,"_key":"e5370f87c374","biography":[{"markDefs":[],"children":[{"_key":"0bff70e7fa0f0","_type":"span","marks":[],"text":"Dan Robinson is a General Partner at Paradigm, focused on crypto investments and research into open-source protocols. Previously, Dan was a protocol researcher at Interstellar. Before Interstellar, Dan practiced as a litigation attorney at Paul, Weiss, Rifkind, Wharton \u0026 Garrison LLP. He earned a J.D. from Harvard Law School and an A.B. from Harvard University."}],"_type":"block","style":"normal","_key":"ca41d7fa7bd6","asset":null}]},{"_id":"878b7c8c-7d14-4181-a1ad-91bf46a5045f","portrait":{"_type":"imageAlt","_key":null,"alt":null,"lqip":"data:image/jpeg;base64,/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAOABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMFBAf/xAAiEAACAQQCAQUAAAAAAAAAAAABAgADBAURBhITFCExQVH/xAAXAQADAQAAAAAAAAAAAAAAAAAAAQIE/8QAFxEBAQEBAAAAAAAAAAAAAAAAAAERMf/aAAwDAQACEQMRAD8A6Zi8cnj0o2xHtF8Yxd36a8bIUmQeUhNt22P2M41fmsXBX4pkyhjcgptrkIjDS719QvWjaj3eMpiu2oTPd5NjXY9YSzf/2Q==","dimensions":{"width":6581,"aspectRatio":1.4454206018010103,"height":4553,"_type":"sanity.imageDimensions"},"url":"https://cdn.sanity.io/images/dgybcd83/production/181aff8a7accc16c350138c6f69634a0f7ecf622-6581x4553.jpg"},"title":"Research Partner","biography":[{"style":"normal","_key":"755adeb3b0f8","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Dave White is a Research Partner at Paradigm. Previously, Dave was a quantitative trader and researcher at firms including Headlands, Two Sigma, and Cutler Group. He is three credits shy of an A.B. in Mathematics from Harvard University.","_key":"e4c548971fbf0"}],"_type":"block","asset":null}],"_type":"teamMember","_key":"246a97317de2","tags":[{"_id":"5f451f5f-7e63-41bf-94e2-e9086936db67","slug":"investing-and-research","title":"Investing \u0026 Research","subTags":null}],"name":"Dave White","slug":"dave-white","links":[{"_type":"link","_key":"8093b183dce7","title":"LinkedIn","url":"https://www.linkedin.com/in/david-alexander-white/","openInNewWindow":true},{"_key":"44de8ef53a0c","title":"Twitter","url":"https://twitter.com/_Dave__White_","openInNewWindow":true,"_type":"link"},{"_type":"link","_key":"b052f56a57ff","title":"Warpcast","url":"https://warpcast.com/davewhite","openInNewWindow":true}],"hideOnAll":null}],"publishDate":"2024-06-04","tags":[{"_id":"493e238e-72b6-4c77-9dcf-35f015c39025","slug":"research","title":"Research"}],"summary":"In this post, we introduce MEV taxes, a mechanism that arbitrary applications can use to capture their own MEV. This mechanism could be used today on OP Stack L2s like OP Mainnet, Base, and Blast, because the block proposers on those chains follow a set of rules we call competitive priority ordering.","featuredImage":{"alt":null,"lqip":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABZ0lEQVQokZWSR6/CQAyE9wiEXoQCoRfRa+AAiCohceL//5p5+iyBHoIDHCbx2p5Z22sXjUb1LbLZrCaTiTabjdrttuLxuCKRyEuOw/EtHoLb7VbdblfJZPIlboKe5ymRSFgQPOxUKmX248y/UCiY4Ol00mq1UqlUMj8a5BB3fAjUajXV63W1Wi31+31Dp9MxUA0tYiN0v98Ny+XSeEEQGG86nco1Gg1LhjQYDLRer62C/X5vNiT+CEHgfL1eTfB4PCoMw2cOs3WIcDPCYDwe63A4GGm322k+nz8J2LRMDuAchqFhsVhYzDWbTfm+r1wuZ0Mvl8smcLvddLlcNJvNrPLRaGSE4XCoSqViuYwrCAJVq1XjFYtFOYbPUHmhWCymdDqtXq9nYrRAMmQuzOfz9ucByIXjed4T+N7Wht1ipsyHNqni0woh9snv/i8lDm6nwvP5bA+B4C/L/yaYyWTsNRFkfrT4i+AfSdghCeYZAK0AAAAASUVORK5CYII=","dimensions":{"aspectRatio":1.7777777777777777,"height":1350,"_type":"sanity.imageDimensions","width":2400},"url":"https://cdn.sanity.io/images/dgybcd83/production/3ecc45d287288631b7478b0ac6aebd426282afd5-2400x1350.png","_type":"imageAlt","_key":null},"featuredImageCaption":null,"tableOfContents":true,"content":[{"_type":"richTextBlock","_key":"fdcd935ee408","content":[{"children":[{"marks":[],"text":"Introduction","_key":"0a5c4300468d0","_type":"span"}],"_type":"block","asset":null,"style":"h2","_key":"5d6020fb8718","markDefs":[]},{"_key":"e4783725ed35","markDefs":[],"asset":null,"children":[{"_type":"span","marks":[],"text":"In this post, we introduce MEV taxes, a mechanism that arbitrary applications can use to capture their own MEV.","_key":"1f9edc8640ab0"}],"_type":"block","style":"normal"},{"style":"normal","_key":"6bf451c083c1","asset":null,"markDefs":[],"children":[{"_key":"1e874620a1050","_type":"span","marks":[],"text":"This mechanism could be used today on OP Stack L2s like OP Mainnet, Base, and Blast, because the block proposers on those chains follow a set of rules we call "},{"text":"competitive priority ordering","_key":"1e874620a1051","_type":"span","marks":["em"]},{"marks":[],"text":".","_key":"1e874620a1052","_type":"span"}],"_type":"block"},{"_key":"ccec83901f06","asset":null,"markDefs":[],"children":[{"_type":"span","marks":[],"text":"To implement a MEV tax on one of these chains, a smart contract charges a fee that is a function of the priority fee of the transaction. We show that if an application charges searchers a MEV tax of (say) $99 for every $1 of priority fee, it can capture 99% of the competitive MEV for that transaction.","_key":"caaccbf6d9130"}],"_type":"block","style":"normal"},{"_type":"block","style":"normal","_key":"67da2ff99d59","markDefs":[],"asset":null,"children":[{"_key":"26fd08d822090","_type":"span","marks":[],"text":"MEV taxes are a simple technique that opens up a vast design space. You can think of them as allowing any application on the chain to run its own custom MEV auction, without needing any offchain infrastructure of its own, just by hooking into a single shared auction run by the block proposer."}]},{"asset":null,"markDefs":[],"children":[{"_type":"span","marks":[],"text":"We show how MEV taxes could be used to solve three major problems in MEV research:","_key":"ae90f021dbea0"}],"_type":"block","style":"normal","_key":"aec81c87ca4d"},{"_key":"b40923f9cf11","listItem":"bullet","markDefs":[],"children":[{"text":"Decentralized exchange (DEX) routers that optimize the price received by the swapper","_key":"e42a72985a1d0","_type":"span","marks":[]}],"level":1,"_type":"block","asset":null,"style":"normal"},{"_key":"076b5f823d93","listItem":"bullet","asset":null,"markDefs":[],"children":[{"_type":"span","marks":[],"text":"Automated market makers (AMMs) that minimize the loss-vs-rebalancing (LVR) experienced by liquidity providers","_key":"f2e3142208d60"}],"level":1,"_type":"block","style":"normal"},{"markDefs":[],"children":[{"_type":"span","marks":[],"text":"Wallets that let their users capture any “backrunning” MEV created by their transactions","_key":"cf91629c91b50"}],"level":1,"_type":"block","style":"normal","_key":"5c3bfe865f43","asset":null,"listItem":"bullet"},{"_type":"block","style":"normal","_key":"05a0bd53d55c","markDefs":[{"_type":"link","href":"https://github.com/flashbots/mev-boost","_key":"9e735f64d5e8"}],"asset":null,"children":[{"_type":"span","marks":[],"text":"But there’s a catch. MEV taxes only work if block proposers strictly follow the rules of competitive priority ordering, which include sorting transactions by priority fee without censoring, peeking at, or delaying any. If block proposers deviate from those rules, they can evade MEV taxes to capture the value for themselves. Today, therefore, MEV taxes depend on trusting L2 sequencers, and would likely not work at all on Ethereum L1, where block building is dominated by a ","_key":"d5e8ac67a9630"},{"_type":"span","marks":["9e735f64d5e8"],"text":"competitive builder auction","_key":"d5e8ac67a9631"},{"marks":[],"text":" that maximizes revenue for the proposer.","_key":"d5e8ac67a9632","_type":"span"}]},{"_type":"block","asset":null,"style":"normal","_key":"e06fc9b4f825","markDefs":[],"children":[{"text":"Still, the power and flexibility of MEV taxes suggests that priority ordering may be the right choice for platforms that can provide it today. And the relative simplicity of competitive priority ordering suggests that there may be a viable way to enforce it in a decentralized way, without having to trust a single sequencer. We hope this post motivates further work on that problem.","_key":"51d9709bc2870","_type":"span","marks":[]}]}]},{"_type":"richTextBlock","_key":"dfe9a92b6312","content":[{"_key":"2aeeb5f66345","asset":null,"markDefs":[],"children":[{"_type":"span","marks":[],"text":"Priority ordering","_key":"3c4b6ace6c040"}],"_type":"block","style":"h2"},{"style":"normal","_key":"ff73f8492927","markDefs":[{"_key":"95404431a52d","title":"1","content":[{"markDefs":[],"children":[{"_type":"span","marks":[],"text":"In this post, we use “proposer” to refer to the actor or process that determines what transactions are included in a particular block. On Ethereum L2s, this role is typically filled by a “sequencer.” On Ethereum L1, it is filled by a specific Ethereum validator called a proposer, though often the proposer outsources the task of building the block to a competitive auction in which “relayers” and “builders” participate. The details of how these responsibilities are divided are out of scope of this post.","_key":"4c11ffa41a5a0"}],"_type":"block","style":"normal","_key":"68f558eed8a3"}],"slug":{"current":"1","_type":"slug"},"_type":"footNote"},{"slug":{"current":"2","_type":"slug"},"_type":"footNote","_key":"9c8ce2f182b5","title":"2","content":[{"_key":"8a0be01cae1b","markDefs":[],"children":[{"_type":"span","marks":[],"text":"The priority fee per gas is not actually specified explicitly in the transaction, but can be computed in it. The transaction specifies a gas price, but Ethereum also charges a base fee, which is taken out of the gas price and burned. The base fee should be ignored for purposes of MEV taxes, since it is not under the transactor’s control. The priority fee per gas—the price for the part of the transaction fee that goes to the block proposer—can be computed in Solidity as ","_key":"78b9dcad68350"},{"_type":"span","marks":["code"],"text":"priorityGasPrice = tx.gasprice - block.basefee","_key":"78b9dcad68351"},{"_type":"span","marks":[],"text":".","_key":"78b9dcad68352"}],"_type":"block","style":"normal"}]}],"children":[{"_key":"1f858fc62a8d0","_type":"span","marks":[],"text":"When someone sends a transaction on an Ethereum L1 or L2, they specify a priority fee, which they pay to the block proposer."},{"marks":["95404431a52d"],"text":"1 ","_key":"f899fac11c70","_type":"span"},{"text":"You can imagine this is specified as ","_key":"abf108afab74","_type":"span","marks":[]},{"_type":"span","marks":["code"],"text":"priorityFeePerGas","_key":"1f858fc62a8d3"},{"_key":"1f858fc62a8d4","_type":"span","marks":[],"text":", a number that is multiplied by the gas used in the transaction to get "},{"marks":["code"],"text":"builderPriorityFee","_key":"1f858fc62a8d5","_type":"span"},{"_type":"span","marks":[],"text":"—the total payment in ETH.","_key":"1f858fc62a8d6"},{"text":"2","_key":"1877d55d4a13","_type":"span","marks":["9c8ce2f182b5"]}],"_type":"block","asset":null},{"style":"normal","_key":"ed216f9d8500","markDefs":[{"_type":"link","href":"https://docs.optimism.io/","_key":"50c21e8fec55"}],"children":[{"_type":"span","marks":[],"text":"There is no rule in the Ethereum protocol that transactions in a block must be ordered greedily by descending ","_key":"647da7c0fd780"},{"_type":"span","marks":["code"],"text":"priorityFeePerGas","_key":"647da7c0fd781"},{"_type":"span","marks":[],"text":". However, that is a popular way to build blocks—for example, it is the default algorithm used by sequencers of ","_key":"647da7c0fd782"},{"_type":"span","marks":["50c21e8fec55"],"text":"OP Stack","_key":"647da7c0fd783"},{"_type":"span","marks":[],"text":" chains, as well as geth and reth. Not only does priority ordering let transactors efficiently express the urgency of their transactions, it also naturally channels certain kinds of MEV to the block proposer.","_key":"647da7c0fd784"}],"asset":null,"_type":"block"},{"children":[{"_key":"0be7784d6bc20","_type":"span","marks":[],"text":"That happens because priority ordering turns competition for MEV into a "},{"_type":"span","marks":["09492ddf8206"],"text":"priority gas auction","_key":"0be7784d6bc21"},{"_type":"span","marks":[],"text":". When there is an opportunity to profit from interacting with the chain, such as by arbitraging an AMM against a centralized exchange, searchers compete to claim that opportunity first. If the chain uses priority ordering to determine transaction inclusion and ordering, the searchers compete by setting high priority fees on their transactions.","_key":"0be7784d6bc22"}],"_type":"block","style":"normal","asset":null,"_key":"63616acae724","markDefs":[{"_key":"09492ddf8206","_type":"link","href":"https://arxiv.org/pdf/1904.05234"}]},{"style":"normal","_key":"0217f0d08a99","markDefs":[{"_type":"footNote","_key":"56a2fa37c307","title":"3","content":[{"markDefs":[],"children":[{"_key":"761db13ab9600","_type":"span","marks":[],"text":"Alternatively, we could simply define “MEV” to exclude any searcher profit and only refer to value that would go to the validator."}],"_type":"block","style":"normal","_key":"10c646dc911b"}],"slug":{"current":"3","_type":"slug"}}],"children":[{"_type":"span","marks":[],"text":"In a competitive scenario where risk-free profits are competed down to zero, the winning searcher should end up paying the full amount of MEV in priority fees.","_key":"ee68c49892760"},{"_key":"954bff866445","_type":"span","marks":["56a2fa37c307"],"text":"3"},{"_type":"span","marks":[],"text":" So if there is 100 ETH in profit to be gained from interacting with a contract, the first transaction to claim it will set a priority fee of 100 ETH. (We discuss some caveats to this in the Limitations section).","_key":"dd4d8cab6edb"}],"_type":"block","asset":null}]},{"_type":"richTextBlock","_key":"c768ead21f0a","content":[{"children":[{"text":"MEV taxes","_key":"f0c6d3becbd00","_type":"span","marks":[]}],"asset":null,"_type":"block","style":"h2","_key":"ad608faec988","markDefs":[]},{"style":"normal","_key":"f8168085a5d8","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Suppose a smart contract wants to capture the MEV from any transaction that interacts with it. There is a vast library of research on different application-specific ways that smart contracts could try to capture their own MEV.","_key":"9646185665950"}],"_type":"block","asset":null},{"_key":"62fe7320e68f","asset":null,"markDefs":[],"children":[{"_type":"span","marks":[],"text":"But in fact, we don’t necessarily have to know anything about the application. If we know that the block is being constructed through competitive priority ordering, then we have one universal signal for the amount of MEV in the transaction: the priority fee.","_key":"55dab61f88590"}],"_type":"block","style":"normal"},{"asset":null,"_key":"9bef0540288c","markDefs":[{"_type":"footNote","_key":"8186c6c79327","title":"4","content":[{"_type":"block","style":"normal","_key":"a4a074c7f78a","markDefs":[],"children":[{"_key":"2d67ac99eb5b0","_type":"span","marks":[],"text":"Note that "},{"_type":"span","marks":["code"],"text":"proposerPriorityFee","_key":"2d67ac99eb5b1"},{"_type":"span","marks":[],"text":"—equal to ","_key":"2d67ac99eb5b2"},{"text":"priorityFeePerGas","_key":"2d67ac99eb5b3","_type":"span","marks":["code"]},{"_type":"span","marks":[],"text":" times the total gas used in the transaction—cannot actually be calculated during the contract, since there’s no way to know how much gas the transaction will end up using. However, this generally won’t matter, since all we need is an upper bound for it. To be safe, you could multiply ","_key":"2d67ac99eb5b4"},{"_type":"span","marks":["code"],"text":"priorityFeePerGas","_key":"2d67ac99eb5b5"},{"marks":[],"text":" by 30 million—the current maximum gas in an Ethereum block. Overestimating this value will simply mean that the MEV tax captures an even greater percentage of MEV.","_key":"2d67ac99eb5b6","_type":"span"}]}],"slug":{"_type":"slug","current":"4"}}],"children":[{"_type":"span","marks":[],"text":"We propose that the smart contract can look at the priority fee of the transaction and charge its own fee as some increasing function of it. For example, the contract might require whoever calls it to transfer ","_key":"ba4090e7d9520"},{"text":"applicationPriorityFee = 99 * proposerPriorityFee","_key":"ba4090e7d9521","_type":"span","marks":["code"]},{"_type":"span","marks":[],"text":" in ETH to the contract.","_key":"ba4090e7d9522"},{"_type":"span","marks":["8186c6c79327"],"text":"4","_key":"0f84b93b8aef"}],"_type":"block","style":"normal"},{"children":[{"text":"This new fee is paid by the searcher sending the transaction, so it affects the behavior of that searcher. If there is 100 MEV in an opportunity, the winning transaction will now only set a priority fee of 1 ETH, since that will result in a total payment of 100 ETH (1 ETH to the block proposer, and 99 ETH to the smart contract). Any higher priority fee would make the transaction unprofitable; any lower priority fee would result in losing the opportunity to a competitor who set a higher fee. This means the smart contract has captured 99% of the MEV in the transaction.","_key":"6b9b23638c550","_type":"span","marks":[]}],"asset":null,"_type":"block","style":"normal","_key":"2b58b8dfddeb","markDefs":[]},{"_type":"imageAlt","_key":"03f5d49afc93","asset":{"assetId":"75b63fa0df9dc721493c402db3098066be8c21b2","uploadId":"4r42K6xQ3oE4gNS1Rf4Os1zLZmaAu2fR","_rev":"sW5drcInXOi5O7BBf1uawE","sha1hash":"75b63fa0df9dc721493c402db3098066be8c21b2","url":"https://cdn.sanity.io/images/dgybcd83/production/75b63fa0df9dc721493c402db3098066be8c21b2-2394x1346.gif","size":9127242,"_id":"image-75b63fa0df9dc721493c402db3098066be8c21b2-2394x1346-gif","metadata":{"hasAlpha":true,"lqip":"data:image/jpeg;base64,/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMBCP/EAB0QAAICAgMBAAAAAAAAAAAAAAECABEDEhRRYXH/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAMAwEAAhEDEQA/AOoeOQW1yuNjddTThJcMMjA1X2XgRRNEZVouW9MSkQP/2Q==","dimensions":{"_type":"sanity.imageDimensions","width":2394,"aspectRatio":1.7786032689450222,"height":1346},"isOpaque":true,"blurHash":"M3S~x6?ct6?dxtD;RlfPN2xt9FRjayM|WB","_type":"sanity.imageMetadata","palette":{"darkMuted":{"background":"#44546c","_type":"sanity.imagePaletteSwatch","foreground":"#fff","title":"#fff","population":0},"muted":{"background":"#7c8c9c","_type":"sanity.imagePaletteSwatch","foreground":"#fff","title":"#fff","population":0},"lightVibrant":{"foreground":"#000","title":"#000","population":0,"background":"#e4f4fc","_type":"sanity.imagePaletteSwatch"},"darkVibrant":{"_type":"sanity.imagePaletteSwatch","foreground":"#fff","title":"#fff","population":0,"background":"#0d5377"},"lightMuted":{"foreground":"#000","title":"#fff","population":0.02,"background":"#a4b4cc","_type":"sanity.imagePaletteSwatch"},"vibrant":{"_type":"sanity.imagePaletteSwatch","foreground":"#fff","title":"#fff","population":0,"background":"#19a1e5"},"dominant":{"_type":"sanity.imagePaletteSwatch","foreground":"#000","title":"#fff","population":0.02,"background":"#a4b4cc"},"_type":"sanity.imagePalette"}},"mimeType":"image/gif","path":"images/dgybcd83/production/75b63fa0df9dc721493c402db3098066be8c21b2-2394x1346.gif","_createdAt":"2024-06-06T16:10:26Z","originalFilename":"MEV_Taxes.gif","extension":"gif","_type":"sanity.imageAsset","_updatedAt":"2024-06-06T16:10:26Z"}},{"style":"normal","_key":"0cbc8e2c484c","markDefs":[],"children":[{"_type":"span","marks":[],"text":"We call this extra fee imposed by the smart contract a ","_key":"c195c704b8c50"},{"_type":"span","marks":["strong"],"text":"MEV tax","_key":"c195c704b8c51"},{"_type":"span","marks":[],"text":". MEV taxes let an application hijack priority ordering for its own benefit, allowing it to recapture MEV for its users rather than leaking it to the block proposer.","_key":"c195c704b8c52"}],"asset":null,"_type":"block"},{"_type":"block","style":"normal","_key":"212d2b3a20f4","markDefs":[{"slug":{"current":"5","_type":"slug"},"_type":"footNote","_key":"bebb8fea3124","title":"5","content":[{"children":[{"_key":"e4c9be4209310","_type":"span","marks":[],"text":"Assuming a transaction cannot be more than 30 million gas, a "},{"_type":"span","marks":["code"],"text":"priorityFeePerGas","_key":"e4c9be4209311"},{"_type":"span","marks":[],"text":" of 50,000 would result in a gas payment of 1500 gwei—about $0.006 at an ETH price of $4000.","_key":"e4c9be4209312"}],"_type":"block","style":"normal","_key":"d1b72b81ea99","markDefs":[]}]}],"children":[{"_type":"span","marks":[],"text":"If this fee increases sufficiently fast as a function of ","_key":"c274aeb579e20"},{"_type":"span","marks":["code"],"text":"priorityFeePerGas","_key":"c274aeb579e21"},{"_type":"span","marks":[],"text":", then only a negligible amount of MEV will accrue to the proposer. Since ","_key":"c274aeb579e22"},{"_type":"span","marks":["code"],"text":"priorityFeePerGas","_key":"c274aeb579e23"},{"_type":"span","marks":[],"text":" is denominated in wei (one billionth of a billionth of one ETH), we have a lot of precision to work with. For example, as long as the MEV tax is sufficiently sensitive that a ","_key":"c274aeb579e24"},{"_type":"span","marks":["code"],"text":"priorityFeePerGas","_key":"c274aeb579e25"},{"_type":"span","marks":[],"text":" of 50,000 would result in a prohibitively high tax, then the total payment to the proposer would be less than $0.01.","_key":"c274aeb579e26"},{"_key":"7d70fdd06a52","_type":"span","marks":["bebb8fea3124"],"text":"5"}],"asset":null},{"_key":"029c649df006","markDefs":[],"children":[{"_type":"span","marks":[],"text":"However, there is an important caveat. As discussed in the Limitations section, MEV taxes only work if block proposers follow certain rules—what we call “competitive priority ordering”—rather than deviating from those rules in order to maximize their own revenue. Enforcing these rules in a trustless way is an open problem.","_key":"50d28640a741"}],"asset":null,"_type":"block","style":"normal"},{"_key":"6c573e070038","markDefs":[],"children":[{"_type":"span","marks":[],"text":"\n","_key":"2aa659727b17"}],"_type":"block","asset":null,"style":"normal"}]},{"_type":"richTextBlock","_key":"62a2b378a516","content":[{"markDefs":[],"children":[{"_type":"span","marks":[],"text":"Single-application MEV capture","_key":"0d1bb8adb8180"}],"_type":"block","asset":null,"style":"h2","_key":"a3f4eb356ea0"},{"markDefs":[],"children":[{"text":"Here we sketch out how, on a chain that is guaranteed to use competitive priority ordering for block building, MEV taxes could be used to mitigate three important problems in MEV: letting DEX interfaces improve trade execution for swappers, letting AMMs reduce losses to arbitrage for their LPs, and letting wallets reduce MEV leakage for their users by selling the right to backrun the user.","_key":"00345654ff3e0","_type":"span","marks":[]}],"_type":"block","style":"normal","asset":null,"_key":"7ced3bea174b"}]},{"_type":"richTextBlock","_key":"b44a21b80bd7","content":[{"_key":"150155a72060","markDefs":[],"asset":null,"children":[{"_key":"dfaef463f5140","_type":"span","marks":[],"text":"DEX routers"}],"_type":"block","style":"h3"},{"_type":"block","style":"normal","asset":null,"_key":"d1c3cfd301e8","markDefs":[{"_type":"link","href":"https://uniswap.org/whitepaper-uniswapx.pdf","_key":"1fcd818bb649"},{"_key":"976358cd008c","_type":"link","href":"https://1inch.io/fusion/"}],"children":[{"_type":"span","marks":[],"text":"In intent-based DEX routing protocols like ","_key":"fb6e5f69a5f00"},{"_key":"fb6e5f69a5f01","_type":"span","marks":["1fcd818bb649"],"text":"UniswapX"},{"_type":"span","marks":[],"text":" and ","_key":"fb6e5f69a5f02"},{"_key":"fb6e5f69a5f03","_type":"span","marks":["976358cd008c"],"text":"1inch Fusion"},{"_type":"span","marks":[],"text":", a user (Alice) signs an intent to swap, and searchers compete to route or fill that intent at the best possible price for Alice.","_key":"fb6e5f69a5f04"}]},{"style":"normal","_key":"a05b592a9fd9","markDefs":[],"children":[{"marks":[],"text":"Current versions of UniswapX use two mechanisms to run that competition: a Dutch auction where Alice’s limit price changes over time until a searcher fills it, and an initial offchain request-for-quote (RFQ) auction to set the starting price of that Dutch auction.","_key":"f8d709d4d1500","_type":"span"}],"_type":"block","asset":null},{"children":[{"_type":"span","marks":[],"text":"On a platform that guarantees competitive priority ordering, UniswapX could replace these with a single mechanism: a MEV tax. It could implement this by having the user sign an order that can be filled immediately by anyone, but with an execution price that is set as a function of the transaction’s priority.","_key":"57471cf3a8050"}],"_type":"block","asset":null,"style":"normal","_key":"1f5a57b8148b","markDefs":[]},{"children":[{"_type":"span","marks":[],"text":"For example, if Alice has a UniswapX order to sell 1 ETH, she could define the execution price of the order to be ","_key":"e2ae1efebd9d0"},{"_type":"span","marks":["code"],"text":"minimumPrice + ($0.01 * priorityFeePerGas)","_key":"e2ae1efebd9d1"},{"text":". ","_key":"e2ae1efebd9d2","_type":"span","marks":[]},{"_type":"span","marks":["code"],"text":"minimumPrice","_key":"e2ae1efebd9d3"},{"_type":"span","marks":[],"text":" could be some fixed value that she expects to be significantly lower than the current price.","_key":"e2ae1efebd9d4"}],"_type":"block","style":"normal","_key":"24e385ca8fb9","asset":null,"markDefs":[]},{"markDefs":[],"children":[{"marks":[],"text":"Searchers would compete to fill Alice’s order by submitting transactions. Whichever transaction has the highest priority fee and doesn’t revert would get to fill the order, which should guarantee that the swapper gets the best price that searchers can find. (Some exceptions to this are discussed in the Limitations section.)","_key":"49c1845e120e0","_type":"span"}],"_type":"block","style":"normal","_key":"2303d08f1c14","asset":null},{"style":"normal","_key":"2db6b90af42c","asset":null,"markDefs":[],"children":[{"_key":"575eaa396c890","_type":"span","marks":[],"text":"If Alice’s minimum price is $3,000 and the current price of ETH is $3,500, "},{"marks":["code"],"text":"priorityFeePerGas","_key":"575eaa396c891","_type":"span"},{"_key":"575eaa396c892","_type":"span","marks":[],"text":" in the winning transaction would be about 50,000. (Observe that in a transaction that costs 200,000 gas, this will result in a payment of only about 10 billion wei—around $0.000035—to the block proposer.)"}],"_type":"block"},{"asset":null,"_type":"block","style":"normal","_key":"c1cd7e74e2e5","markDefs":[],"children":[{"marks":[],"text":"This has some potential benefits over the existing mechanisms used in UniswapX.","_key":"fc1ed15f18500","_type":"span"}]},{"style":"normal","_key":"bbdf6164653a","markDefs":[{"_type":"link","href":"https://moallemi.com/ciamac/papers/pricing-dutch-auctions-2024.pdf","_key":"3b759c305b3e"}],"children":[{"_type":"span","marks":[],"text":"Orders that use MEV taxes could complete faster and at a better price than orders which use Dutch auctions. As discussed in ","_key":"4cf2275e67660"},{"_type":"span","marks":["3b759c305b3e"],"text":"this paper","_key":"4cf2275e67661"},{"_type":"span","marks":[],"text":", onchain Dutch auctions leak some value to MEV due to price movements between blocks, and may take many blocks to complete. In contrast, orders that use MEV taxes could typically be completed in the next block while capturing the vast majority of their MEV.","_key":"4cf2275e67662"}],"_type":"block","asset":null},{"markDefs":[],"asset":null,"children":[{"_type":"span","marks":[],"text":"Unlike an offchain RFQ, the auction to fill an order that uses MEV taxes would happen atomically with transaction execution onchain. This means that a winning bidder could be guaranteed that they are only committed to fill the order if their onchain transaction succeeds. That could make it easier for onchain liquidity like AMMs to compete with offchain liquidity, meaning UniswapX could serve as an even more effective router for multi-pool systems like Uniswap v4.","_key":"a5a82cf0f44f0"}],"_type":"block","style":"normal","_key":"a5c6d1f5f305"}]},{"_type":"richTextBlock","_key":"f2ce597b8469","content":[{"markDefs":[],"children":[{"_type":"span","marks":[],"text":"AMMs","_key":"db9003af7fd20"}],"_type":"block","style":"h3","asset":null,"_key":"ef4bf2f8266b"},{"markDefs":[{"_type":"link","href":"https://arxiv.org/pdf/2208.06046","_key":"a62af268091a"},{"_type":"link","href":"https://arxiv.org/pdf/2305.14604","_key":"09e7003387a8"},{"_type":"link","href":"https://twitter.com/SorellaLabs","_key":"284c4578d32e"}],"asset":null,"children":[{"text":"Normally, AMMs leak value to arbitrageurs who trade against stale prices at the top of the block, as discussed in the ","_key":"a83a94fb85c30","_type":"span","marks":[]},{"_type":"span","marks":["a62af268091a"],"text":"loss-vs-rebalancing","_key":"a83a94fb85c31"},{"_type":"span","marks":[],"text":" ","_key":"a83a94fb85c32"},{"_type":"span","marks":["09e7003387a8"],"text":"papers","_key":"a83a94fb85c33"},{"_type":"span","marks":[],"text":". We can use MEV taxes to have AMMs capture that MEV. To keep things simple, we’ll discuss how this might work on an AMM without concentrated liquidity. (If you’re interested in how this kind of problem could be solved with concentrated liquidity, ","_key":"a83a94fb85c34"},{"_type":"span","marks":["284c4578d32e"],"text":"Sorella","_key":"a83a94fb85c35"},{"_type":"span","marks":[],"text":" will soon be publishing one solution.)","_key":"a83a94fb85c36"}],"_type":"block","style":"normal","_key":"a1284c144a05"},{"_key":"98a88b7ce40f","markDefs":[],"children":[{"_type":"span","marks":[],"text":"An AMM can capture MEV by charging an extra fee as a function of the priority fee on the transaction, allowing it to auction off the right to trade first in the block. There are many ways to calculate and denominate that fee. We’ll discuss one arguably neutral one—denominating it in units of pool liquidity, ","_key":"15f997f2e6e90"},{"_type":"span","marks":["code"],"text":"sqrt(xy)","_key":"15f997f2e6e91"},{"_type":"span","marks":[],"text":". The winning transaction would be the one that increases the pool’s liquidity by the most.","_key":"15f997f2e6e92"}],"_type":"block","style":"normal","asset":null},{"asset":null,"markDefs":[],"children":[{"_type":"span","marks":[],"text":"When executing the first transaction on a pool in a block, instead of enforcing the condition ","_key":"d4b6dbd4b0640"},{"_type":"span","marks":["code"],"text":"x_end * y_end \u003e x_start * y_start","_key":"d4b6dbd4b0641"},{"_key":"d4b6dbd4b0642","_type":"span","marks":[],"text":", the pool could enforce the condition (with "},{"marks":["code"],"text":"a","_key":"d4b6dbd4b0643","_type":"span"},{"_type":"span","marks":[],"text":" as some constant):","_key":"d4b6dbd4b0644"}],"_type":"block","style":"normal","_key":"8fe33a5315e9"},{"_key":"ba0643eda23c","markDefs":[],"children":[{"_type":"span","marks":[],"text":"x_end * y_end \u003e (sqrt(x_start * y_start) + a*priorityFeePerGas)^2","_key":"51dc2f7465a00"}],"asset":null,"_type":"block","style":"normal"},{"children":[{"_type":"span","marks":[],"text":"This formula would incentivize the arbitrage trader to trade to the true price, and after that trade, the midpoint price on the pool should be the true price.","_key":"e2d6979b622b0"},{"_type":"span","marks":["fd89ae1abee9"],"text":"6","_key":"d48263c72b54"}],"_type":"block","style":"normal","_key":"5610335fc135","markDefs":[{"content":[{"children":[{"_type":"span","marks":[],"text":"In the case where priorityFeePerGas is set so that the arbitrageur’s profit is zero, the profit-maximizing arbitrage trade should correspond to the same trade on the ","_key":"50d70b992a2c0"},{"text":"function-maximizing AMM","_key":"50d70b992a2c1","_type":"span","marks":["2f8fb24ae160"]},{"_type":"span","marks":[],"text":". Proving this is left as an exercise for the reader.","_key":"50d70b992a2c2"}],"_type":"block","style":"normal","_key":"146eb06c62a0","markDefs":[{"_type":"link","href":"https://arxiv.org/pdf/2307.02074","_key":"2f8fb24ae160"}]}],"slug":{"current":"6","_type":"slug"},"_type":"footNote","_key":"fd89ae1abee9","title":"6"}],"asset":null},{"_type":"block","style":"normal","_key":"04195d7ad806","markDefs":[],"children":[{"_type":"span","marks":[],"text":"After that first transaction, trades could work like they do on Uniswap v2, with fixed swap fees. Uninformed transactions that want to trade on the pool without paying an extra MEV tax would set a low priority fee.","_key":"e81eaa22bf0f0"}],"asset":null},{"children":[{"_type":"span","marks":[],"text":"There are many other ways to implement MEV taxes on an AMM that would have different effects. For example, MEV taxes could be denominated in the input or output token of the swap, could affect the swap fee percentage applied by the pool, or could determine the minimum price of the user’s trade. We think this is an interesting design space to explore.","_key":"b3aae6579b2e0"}],"_type":"block","style":"normal","_key":"10e7f18cdf1b","asset":null,"markDefs":[]}]},{"_type":"richTextBlock","_key":"c72634c05b8b","content":[{"children":[{"text":"Backrunning auctions","_key":"02dc329b24b20","_type":"span","marks":[]}],"_type":"block","style":"h3","_key":"3da51ff2a402","asset":null,"markDefs":[]},{"asset":null,"_type":"block","style":"normal","_key":"7d5a8149858b","markDefs":[],"children":[{"_type":"span","marks":[],"text":"The above descriptions show how certain applications could be designed to avoid leaking MEV. However, what if a wallet wants to try to help its users capture the MEV they create from arbitrary transactions interacting with ","_key":"dfbbc18c67ef0"},{"_type":"span","marks":["em"],"text":"any","_key":"dfbbc18c67ef1"},{"_type":"span","marks":[],"text":" application, even ones that don’t incorporate MEV taxes?","_key":"dfbbc18c67ef2"}]},{"children":[{"_type":"span","marks":[],"text":"For example, when Alice makes a large transaction on an AMM, she sometimes create an arbitrage opportunity for “backrunners” to move the price back. This is normally leaked to MEV, rather than going to Alice.","_key":"0ac80b8e0d650"}],"_type":"block","style":"normal","_key":"3aedf5f2a23a","markDefs":[],"asset":null},{"_key":"bed7db212b81","markDefs":[{"href":"https://docs.flashbots.net/flashbots-protect/mev-share","_key":"3c527760504c","_type":"link"},{"_type":"link","href":"https://mevblocker.io/","_key":"5c69a940e2ab"},{"_type":"link","href":"https://frontier.tech/the-orderflow-auction-design-space","_key":"079a35185ab5"}],"children":[{"_type":"span","marks":["3c527760504c"],"text":"MEV-Share","_key":"a729307ec01e0"},{"_type":"span","marks":[],"text":" and ","_key":"a729307ec01e1"},{"_key":"a729307ec01e2","_type":"span","marks":["5c69a940e2ab"],"text":"MEVBlocker"},{"marks":[],"text":" are two protocols that allow users to capture MEV from their transactions, but they rely on a complex offchain auction system. ","_key":"a729307ec01e3","_type":"span"},{"_key":"a729307ec01e4","_type":"span","marks":["079a35185ab5"],"text":"The Orderflow Auction Design Space"},{"marks":[],"text":" describes some other solutions.","_key":"a729307ec01e5","_type":"span"}],"_type":"block","style":"normal","asset":null},{"children":[{"marks":[],"text":"MEV taxes, when combined with an intent-based smart contract wallet, could allow us to construct an alternative system to capture backrunning MEV for Alice. Suppose that instead of creating a transaction that trades on the AMM, Alice signs an intent that anyone can submit to Alice’s smart contract wallet to cause it to take that action. Alice’s smart contract wallet charges whoever submits that transaction a MEV tax, which is paid to Alice.","_key":"a9e235bb992f0","_type":"span"}],"_type":"block","style":"normal","_key":"b29e75792d08","markDefs":[],"asset":null},{"style":"normal","_key":"c9c10ec92428","asset":null,"markDefs":[],"children":[{"_type":"span","marks":[],"text":"The searcher who submits Alice’s intent will have the exclusive right to backrun her, since they can do so atomically in the same transaction. As a result, if searching is competitive, all of the profit from backrunning Alice should accrue to Alice through her MEV tax.","_key":"a82b16492f2a0"}],"_type":"block"},{"style":"normal","_key":"8cb731f58824","markDefs":[],"asset":null,"children":[{"marks":[],"text":"Note that this system may not necessarily protect users from attacks that involve ","_key":"63964c19f2dc0","_type":"span"},{"_type":"span","marks":["em"],"text":"frontrunning","_key":"63964c19f2dc1"},{"_key":"63964c19f2dc2","_type":"span","marks":[],"text":" user transactions, because a transaction that frontruns a user may be able to avoid paying a MEV tax to that user. This issue (and some possible mitigations for it) is discussed in greater detail in the Limitations section below. Nevertheless, this could at least be an improvement on systems that use public mempools without any mitigations."}],"_type":"block"}]},{"_type":"richTextBlock","_key":"5ef7a59136fb","content":[{"markDefs":[],"children":[{"_type":"span","marks":[],"text":"Other use cases","_key":"eb7ba594f1390"}],"_type":"block","style":"h3","_key":"b8726646b4d3","asset":null},{"style":"normal","_key":"a256dd433963","markDefs":[],"children":[{"text":"In addition to these examples, other potential uses of MEV taxes could include almost anything that currently uses an offchain or Dutch auction, such as:","_key":"171fbc885e880","_type":"span","marks":[]}],"_type":"block","asset":null},{"level":1,"_type":"block","style":"normal","_key":"398c5fe2ba1b","asset":null,"listItem":"bullet","markDefs":[{"_type":"link","href":"https://medium.com/uma-project/announcing-oval-earn-protocol-revenue-by-capturing-oracle-mev-877192c51fe2","_key":"d21c1f352d62"}],"children":[{"_type":"span","marks":[],"text":"Protocols for oracles to capture the oracle extractable value they create, like ","_key":"b6e6a6e49d0f0"},{"_type":"span","marks":["d21c1f352d62"],"text":"Oval","_key":"b6e6a6e49d0f1"}]},{"listItem":"bullet","asset":null,"markDefs":[{"_key":"91081793c34c","_type":"link","href":"https://www.paradigm.xyz/2023/05/blend"}],"children":[{"_type":"span","marks":[],"text":"Refinancing auctions in NFT-collateralized lending protocols like ","_key":"a85fbd6316470"},{"_type":"span","marks":["91081793c34c"],"text":"Blend","_key":"a85fbd6316471"}],"level":1,"_type":"block","style":"normal","_key":"bb8475aa3a73"},{"_key":"d892947a7024","asset":null,"listItem":"bullet","markDefs":[{"_type":"link","href":"https://moallemi.com/ciamac/papers/pricing-dutch-auctions-2024.pdf","_key":"9f2dad268a61"}],"children":[{"text":"Lending protocol liquidations that ","_key":"bb54421c57e60","_type":"span","marks":[]},{"_type":"span","marks":["9f2dad268a61"],"text":"leak less value","_key":"bb54421c57e61"},{"marks":[],"text":" than Dutch auctions","_key":"bb54421c57e62","_type":"span"}],"level":1,"_type":"block","style":"normal"}]},{"_type":"richTextBlock","_key":"2ef1aec91eaa","content":[{"style":"h2","_key":"8cdc7ce33e2b","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Cross-application MEV capture","_key":"b02b6d878cd30"}],"_type":"block","asset":null},{"style":"normal","_key":"973ebbb05d90","markDefs":[],"asset":null,"children":[{"_type":"span","marks":[],"text":"The above solutions are designed to capture the MEV from interacting with a single application. But sometimes it may be possible for a searcher to capture even more value by interacting with multiple applications in the same transaction.","_key":"f59a6d44f8420"}],"_type":"block"},{"children":[{"_type":"span","marks":[],"text":"If only one of those applications has a MEV tax, then all the MEV from the transaction should go to the application with the MEV tax, regardless of how high or low that MEV tax is.","_key":"40c6b48f22500"}],"asset":null,"_type":"block","style":"normal","_key":"1c4242f90d36","markDefs":[]},{"_key":"369b1748ed6c","asset":null,"markDefs":[],"children":[{"_type":"span","marks":[],"text":"But what if a searcher’s transaction interacts with two applications that use MEV taxes? For example, what if there is some MEV that can only be captured by filling one of the MEV-taxed UniswapX orders described above against a MEV-taxed AMM?","_key":"60e7b736b97b0"}],"_type":"block","style":"normal"},{"markDefs":[],"children":[{"marks":[],"text":"In that case, the relative amount of excess MEV captured by each application is determined by how those applications set their MEV taxes. If the value ","_key":"31a92769f3ec0","_type":"span"},{"text":"app_i","_key":"31a92769f3ec1","_type":"span","marks":["code"]},{"marks":[],"text":" charges as a MEV tax is given by the function ","_key":"31a92769f3ec2","_type":"span"},{"_type":"span","marks":["code"],"text":"tax_i(priority)","_key":"31a92769f3ec3"},{"_type":"span","marks":[],"text":", then the priority of the winning transaction can be determined by solving for priority in this equation:","_key":"31a92769f3ec4"}],"_type":"block","style":"normal","_key":"70c8839b22c4","asset":null},{"children":[{"_type":"span","marks":[],"text":"tax_1(priorityPerGas) + tax_2(priorityPerGas) = total MEV","_key":"f0c6f90594570"}],"_type":"block","style":"normal","_key":"21f9a664f041","markDefs":[],"asset":null},{"markDefs":[],"children":[{"_type":"span","marks":[],"text":"(Technically, we could add a third term for ","_key":"200ae64f8e450"},{"_type":"span","marks":["code"],"text":"priorityPerGas * gasUsed","_key":"200ae64f8e451"},{"_type":"span","marks":[],"text":" to account for the priority fee paid to the block proposer, but we will ignore that since, as discussed in Appendix A, it will likely be negligible under normal conditions.)","_key":"200ae64f8e452"}],"_type":"block","asset":null,"style":"normal","_key":"1614a0165d9f"},{"style":"normal","_key":"5577614a0e7f","asset":null,"markDefs":[],"children":[{"_type":"span","marks":[],"text":"In the simple case of MEV taxes that are linear in ","_key":"0144bd8ec3e60"},{"_type":"span","marks":["code"],"text":"priorityPerGas","_key":"0144bd8ec3e61"},{"_key":"0144bd8ec3e62","_type":"span","marks":[],"text":" (so "},{"marks":["code"],"text":"tax_1(priorityPerGas) = a_1 * priorityPerGas","_key":"0144bd8ec3e63","_type":"span"},{"_type":"span","marks":[],"text":"), you can solve for the share of MEV received by each application:","_key":"0144bd8ec3e64"}],"_type":"block"},{"_type":"block","style":"normal","_key":"466fcfe7d4f2","markDefs":[],"children":[{"_type":"span","marks":[],"text":"a_1 * priorityPerGas + a_2 * priorityPerGas = MEV priorityPerGas = MEV/(a_1 + a_2) tax_1(priorityPerGas) = (a_1/(a_1+a_2))*MEV tax_2(priorityPerGas) = (a_2/(a_1+a_2))*MEV","_key":"6cf3a46e3d900"}],"asset":null},{"_type":"block","style":"normal","asset":null,"_key":"c85f47c2ea9e","markDefs":[],"children":[{"_type":"span","marks":[],"text":"When setting its own MEV tax, an application faces a tradeoff—higher taxes let it capture a greater share of cross-application MEV when it occurs, but mean it could miss out on some cross-application MEV if there are competing ways to extract it. For example, if there is an AMM that charges a MEV tax on every trade, then a MEV-tax UniswapX order might be more likely to be filled by a different AMM or an offchain filler.","_key":"b1fcf0bb16e80"}]},{"children":[{"marks":[],"text":"In many cases, there may be an equilibrium in which two applications design their MEV taxes in order to share MEV in a way that maximizes each of their welfare. For example, a MEV-tax AMM would likely want to capture value from a single informed trader near the top of the block, but then would want to provide liquidity to other traders and applications (including ones that use MEV taxes) with a low fixed fee. In that case, the AMM is likely to set a relatively low MEV tax (say, ","_key":"768cca0f31cf0","_type":"span"},{"text":"$0.00001 * priorityFeePerGas","_key":"768cca0f31cf1","_type":"span","marks":["code"]},{"marks":[],"text":"), so that the arbitrage transaction (if any) happens early in the block, and then charge no MEV tax on subsequent transactions in the block. Applications like UniswapX that want to interact with the AMM can set a much higher MEV tax (say ","_key":"768cca0f31cf2","_type":"span"},{"_type":"span","marks":["code"],"text":"$0.01 * priorityFeePerGas","_key":"768cca0f31cf3"},{"_type":"span","marks":[],"text":"), to ensure that their transactions are included after the pool is already arbitraged. With those relative taxes, the AMM would end up arbed first even if there was only $1 of MEV on it and $50,000 of MEV in a UniswapX order.","_key":"768cca0f31cf4"}],"asset":null,"_type":"block","style":"normal","_key":"f201f712ce85","markDefs":[]},{"_type":"block","style":"normal","_key":"cf1e91366271","markDefs":[],"asset":null,"children":[{"text":"We think this is a broad design space worthy of future study.","_key":"bfdc8acbf0030","_type":"span","marks":[]}]},{"style":"normal","_key":"5ae5a4dd3345","markDefs":[],"children":[{"_type":"span","marks":[],"text":"","_key":"e5a1205860090"}],"_type":"block","asset":null}]},{"_type":"richTextBlock","_key":"66181cadcd4d","content":[{"asset":null,"_type":"block","style":"h3","_key":"f6d13cd2a851","markDefs":[],"children":[{"_key":"00aebb26082e0","_type":"span","marks":[],"text":"Incentive incompatibility"}]},{"_type":"block","style":"normal","_key":"653e1804ab5b","markDefs":[],"children":[{"_type":"span","marks":[],"text":"MEV taxes are not incentive-compatible for a monopolistic block proposer. They only work if there is fair competition for transaction inclusion, which can only happen if the block proposer follows rules that we’ll call “competitive priority ordering,” rather than maximizing their own revenue. Informally and non-exhaustively, we suggest that these rules should include:","_key":"6af2fe6d4cb60"}],"asset":null},{"_key":"f942e3d3c8b2","listItem":"bullet","asset":null,"markDefs":[],"children":[{"_type":"span","marks":[],"text":"Priority ordering. Transactions within a block must be ordered in descending order of ","_key":"3d6d6f7cabf30"},{"_type":"span","marks":["code"],"text":"priorityFeePerGas","_key":"3d6d6f7cabf31"},{"text":".","_key":"3d6d6f7cabf32","_type":"span","marks":[]}],"level":1,"_type":"block","style":"normal"},{"asset":null,"level":1,"_type":"block","style":"normal","_key":"5a5841f4736a","listItem":"bullet","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Censorship-resistance. If the block proposer receives a transaction t1 during the block, and the block is either not full or includes some transaction t2 such that ","_key":"43347186cef50"},{"_type":"span","marks":["code"],"text":"t2.priorityFeePerGas \u003c t1.priorityFeePerGas","_key":"43347186cef51"},{"_type":"span","marks":[],"text":", then the block must include transaction t1.","_key":"43347186cef52"}]},{"markDefs":[],"children":[{"_type":"span","marks":[],"text":"Pre-transaction privacy. The block proposer must accept transactions through a private endpoint and must not share such transactions with anyone else before committing to the block, or use the content of those transactions as an input in constructing its own transactions.","_key":"8c45fa4b2c460"}],"level":1,"asset":null,"_type":"block","style":"normal","_key":"8a6ce2386606","listItem":"bullet"},{"level":1,"_type":"block","style":"normal","asset":null,"_key":"00c01ac120fe","listItem":"bullet","markDefs":[],"children":[{"_type":"span","marks":[],"text":"No last look. The block proposer must set a definite time ","_key":"2743dbde57200"},{"_type":"span","marks":["code"],"text":"blockTime","_key":"2743dbde57201"},{"_type":"span","marks":[],"text":" before which they accept transactions from anyone, and after which they do not accept transactions from anyone.","_key":"2743dbde57202"}]},{"markDefs":[],"children":[{"_type":"span","marks":[],"text":"If one or more of these properties is violated, it may weaken the effectiveness of MEV taxes. A block proposer that violates censorship-resistance can avoid most MEV taxes by excluding competing transactions and submitting a zero-priority transaction that takes the opportunity for itself. A block proposer that violates pre-transaction privacy could steal MEV from other transactions or peek at their priority fees to know exactly how high it needs to set its own, while one that is able to submit transactions later than anyone else would have a free “last look” on whether to outbid others for an opportunity, either of which could create adverse selection problems that ultimately discourage competition.","_key":"fca82763eedb0"}],"_type":"block","style":"normal","_key":"362a50dd6a79","asset":null},{"_key":"9315d564d996","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Unfortunately, while the first property would be easy to enforce at the protocol layer, enforcing the other properties trustlessly is an open problem.","_key":"3e3c15b65d350"}],"_type":"block","style":"normal","asset":null},{"style":"normal","_key":"273878e9cc2a","asset":null,"markDefs":[{"_key":"85d55eb456ca","_type":"link","href":"https://github.com/flashbots/mev-boost"}],"children":[{"text":"In the absence of enforcement at the protocol layer, a single sequencer who commits to these rules needs to be trusted not to deviate from them, and if proposers outsource block building to a competitive revenue-maximizing auction (such as Ethereum L1’s ","_key":"2c7dfc27576e0","_type":"span","marks":[]},{"_key":"2c7dfc27576e1","_type":"span","marks":["85d55eb456ca"],"text":"MEV-Boost"},{"text":"), blocks will likely not follow them.","_key":"2c7dfc27576e2","_type":"span","marks":[]}],"_type":"block"},{"style":"normal","_key":"a9f52ac0f7ac","markDefs":[{"_type":"link","href":"https://www.paradigm.xyz/2024/02/leaderless-auctions","_key":"9d0cc7df2e86"},{"_type":"link","href":"https://ethresear.ch/t/multiplicity-a-gadget-for-multiple-concurrent-block-proposers/14962","_key":"05f2d1a59857"}],"children":[{"_type":"span","marks":[],"text":"These issues can be “solved” with a single trusted sequencer who commits to use competitive priority ordering for block building. They may also be solvable with a decentralized mechanism using some combination of consensus, cryptography, and/or trusted execution environments, such as Sorella’s Angstrom, Flashbots’s SUAVE, ","_key":"64ea9e3c248c0"},{"text":"Leaderless Auctions","_key":"64ea9e3c248c1","_type":"span","marks":["9d0cc7df2e86"]},{"_type":"span","marks":[],"text":", or ","_key":"64ea9e3c248c2"},{"_key":"64ea9e3c248c3","_type":"span","marks":["05f2d1a59857"],"text":"Multiplicity"},{"_type":"span","marks":[],"text":".","_key":"64ea9e3c248c4"}],"_type":"block","asset":null}]},{"_type":"richTextBlock","_key":"a85476ab474a","content":[{"asset":null,"_type":"block","style":"h3","_key":"6934ba8c81f7","markDefs":[],"children":[{"marks":[],"text":"Full blocks","_key":"b1c20a2383200","_type":"span"}]},{"markDefs":[],"children":[{"_type":"span","marks":[],"text":"One exception to the normal operation of MEV taxes happens when blocks are completely full. In that case, block proposers may have to leave out lower-priority transactions, rather than simply including them late in the block. Since transactions that interact with MEV-taxed applications are likely to have extremely low priority fees, those applications are likely to be crowded out by applications that don’t use MEV taxes, or ones that have extremely low MEV taxes. However, in a chain that uses an EIP-1559-like mechanism to set a separate basefee, it should be relatively rare for blocks to be completely full. Additionally, given that ","_key":"fe1095e791740"},{"text":"some","_key":"fe1095e791741","_type":"span","marks":["em"]},{"_key":"fe1095e791742","_type":"span","marks":[],"text":" transactions need to be delayed when blocks are full, delaying transactions that express lower urgency by setting higher MEV taxes may be a reasonable result."}],"_type":"block","asset":null,"style":"normal","_key":"e0f4daac9683"}]},{"_type":"richTextBlock","_key":"95201a1a165e","content":[{"style":"h3","_key":"a77dc8c682c4","markDefs":[],"children":[{"_key":"2f30a3ef82500","_type":"span","marks":[],"text":"Reverted transactions"}],"_type":"block","asset":null},{"style":"normal","_key":"a61675d86987","markDefs":[],"children":[{"marks":[],"text":"MEV taxes effectively rely on single-block auctions in which every “bid” is a transaction. One downside of those auctions is that losing bids will generally result in reverted transactions being included onchain, paying some basefee and congesting the chain.","_key":"1df0618223c50","_type":"span"}],"_type":"block","asset":null},{"_type":"block","style":"normal","asset":null,"_key":"e904966dbcf2","markDefs":[],"children":[{"_type":"span","marks":[],"text":"If a sequencer can exclude failed transactions entirely, that would alleviate this issue, though that can be difficult to implement even with a centralized sequencer. (It would also not strictly obey the censorship-resistance property described above, though that definition could be adjusted.) A more sophisticated sequencer may be able to optimize this process by allowing transactions to specify which contentious auctions they are participating in, giving the sequencer enough information to skip subsequent transactions that it knows would fail.","_key":"a872792712de0"}]}]},{"_type":"richTextBlock","_key":"a9c11ba44e92","content":[{"_type":"block","style":"h3","_key":"6373f109b34d","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Leaking of user intents","_key":"8ce508612b0b0"}],"asset":null},{"children":[{"text":"MEV taxes only work if there is competition among searchers, which means the opportunity needs to be somewhat widely known. For applications like AMMs, where the opportunity is visible onchain, that should happen naturally. But for applications like intent-based routing or backrunning auctions, that means the application may need to share the user’s intent with searchers.","_key":"2ac930354ade0","_type":"span","marks":[]}],"_type":"block","style":"normal","_key":"4c5b4c42a8db","asset":null,"markDefs":[]},{"style":"normal","_key":"733d51e0c686","markDefs":[],"children":[{"_type":"span","marks":[],"text":"In some cases, the temporary privacy lost from broadcasting the user’s intent before it is fulfilled may leak value in a way that cannot be recaptured by a MEV tax.","_key":"e64e85aa173b0"}],"_type":"block","asset":null},{"markDefs":[],"children":[{"_type":"span","marks":[],"text":"For example, suppose Alice wants to purchase a low-liquidity token using the backrunning auction protocol described above. She publishes a signed intent for her smart contract wallet to purchase that token on an AMM, setting some slippage tolerance. Searchers could race to push the price of that token to her slippage tolerance in a high-priority transaction, ","_key":"e3f1ac712bee0"},{"marks":["em"],"text":"without","_key":"e3f1ac712bee1","_type":"span"},{"_key":"e3f1ac712bee2","_type":"span","marks":[],"text":" filling the user’s order. The winner, Bob, could then non-competitively fill Alice’s intent by including and backrunning it in a low-priority transaction, thus sandwiching Alice’s trade and giving her a worse price while evading her MEV tax. A similar issue could happen with purchases of NFTs."}],"_type":"block","style":"normal","_key":"d88c6c2b97a1","asset":null},{"_key":"e1d9a62dfad8","markDefs":[],"children":[{"_key":"4ef18fbdd3eb0","_type":"span","marks":[],"text":"Note that such an attack would be risky for Bob, since he would not be able to guarantee atomicity between buying the token and selling it to Alice. A naïve Bob could fall victim to a “sandwich ripping” trap in which Alice publishes an intent to purchase a worthless token from herself, causing Bob to purchase it in anticipation of sandwiching her trade, but Alice revokes her intent before Bob is able to complete the sandwich."}],"asset":null,"_type":"block","style":"normal"},{"asset":null,"style":"normal","_key":"e823cb8f65eb","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Applications may also be able to mitigate this by limiting the set of searchers with which they share intents and monitoring their behavior, as many existing orderflow auctions do.","_key":"025784fcadc10"}],"_type":"block"},{"_type":"block","style":"normal","_key":"09bfad0cff96","markDefs":[{"_type":"link","href":"https://writings.flashbots.net/mevm-suave-centauri-and-beyond","_key":"acf666bb4286"}],"children":[{"_type":"span","marks":[],"text":"It may also be possible to combine MEV taxes with privacy-aware builder features like envisioned in Flashbots’s designs for ","_key":"12bf6dc6e5760"},{"text":"SUAVE","_key":"12bf6dc6e5761","_type":"span","marks":["acf666bb4286"]},{"_key":"12bf6dc6e5762","_type":"span","marks":[],"text":"."}],"asset":null},{"_type":"block","style":"normal","_key":"3df38686ca41","markDefs":[],"asset":null,"children":[{"marks":[],"text":"Finally, in cases where Alice decides that the costs of sharing her intent outweigh the benefit from competitive searching, she could construct a transaction herself and submit it directly into the block. As discussed above, an ideal implementation of competitive priority ordering would provide pre-transaction privacy from the block proposer.","_key":"619bcfc0e6750","_type":"span"}]}]},{"_type":"richTextBlock","_key":"4f05955097e7","content":[{"markDefs":[],"children":[{"_type":"span","marks":[],"text":"Discussion and prior work","_key":"c9cdf8883d620"}],"_type":"block","style":"h2","_key":"2c4a81b044ad","asset":null},{"_key":"022eec7cccf3","asset":null,"markDefs":[{"_type":"link","href":"https://arxiv.org/pdf/1904.05234","_key":"9630e09ab03e"}],"children":[{"marks":["em"],"text":"Priority gas auctions","_key":"c37bcb41b4070","_type":"span"},{"_type":"span","marks":[],"text":". Some of the dynamics of priority ordering in decentralized blockchains were studied in the ","_key":"c37bcb41b4071"},{"_type":"span","marks":["9630e09ab03e"],"text":"Flash Boys 2.0","_key":"c37bcb41b4072"},{"_type":"span","marks":[],"text":" paper, which coined the term “miner extractable value.” That paper observed that Ethereum miners (when that network used proof-of-work) were already ordering transactions by priority, and that arbitrageurs were relying on that behavior to participate in “priority gas auctions” in which they bid for the right to be included first in a block, which led to much of the MEV from decentralized exchange arbitrage accruing to miners.","_key":"c37bcb41b4073"}],"_type":"block","style":"normal"},{"asset":null,"_key":"120d353eadc9","markDefs":[{"_type":"link","href":"https://eprint.iacr.org/2021/1465","_key":"e7dd4a423994"},{"_type":"link","href":"https://docs.arbitrum.io/learn-more/faq#does-arbitrum-have-a-mempool","_key":"9553d33405fb"},{"_type":"footNote","_key":"064c83d77738","title":"7","content":[{"_type":"block","style":"normal","_key":"9bed6e088489","markDefs":[{"href":"https://research.arbitrum.io/t/proposed-design-for-timeboost/9491","_key":"b888453d7411","_type":"link"}],"children":[{"_type":"span","marks":[],"text":"Arbitrum has ","_key":"910600a01d330"},{"_type":"span","marks":["b888453d7411"],"text":"discussed","_key":"910600a01d331"},{"_type":"span","marks":[],"text":" replacing this with a form of priority ordering called Timeboost, but that has not been put into production as of this writing.","_key":"910600a01d332"}]}],"slug":{"current":"7","_type":"slug"}}],"children":[{"_type":"span","marks":["em"],"text":"First come, first served","_key":"5bb3b206b59f0"},{"_type":"span","marks":[],"text":". Some attempts at MEV mitigation through transaction ordering rules, such as ","_key":"5bb3b206b59f1"},{"marks":["e7dd4a423994"],"text":"Themis","_key":"5bb3b206b59f2","_type":"span"},{"text":" or ","_key":"5bb3b206b59f3","_type":"span","marks":[]},{"_type":"span","marks":["9553d33405fb"],"text":"Arbitrum One’s current sequencer","_key":"5bb3b206b59f4"},{"_key":"5bb3b206b59f5","_type":"span","marks":[],"text":","},{"_type":"span","marks":["064c83d77738"],"text":"7 ","_key":"5bb3b206b59f6"},{"marks":[],"text":"have focused on enforcing a different ordering rule, ","_key":"00a64985d73c","_type":"span"},{"marks":["em"],"text":"first come, first served","_key":"5bb3b206b59f8","_type":"span"},{"_type":"span","marks":[],"text":" (sometimes called “fair ordering”) where block proposers must order transactions in the order in which they see them.","_key":"5bb3b206b59f9"}],"_type":"block","style":"normal"},{"style":"normal","_key":"c296d71b228d","markDefs":[],"children":[{"_key":"5f86084d1bb20","_type":"span","marks":[],"text":"Priority ordering takes a different approach—treating transactions that arrive within a given period equally, and ordering them instead by their declared priority."}],"_type":"block","asset":null},{"_type":"block","style":"normal","_key":"3e25bfcc1ab8","markDefs":[{"_type":"link","href":"https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2388265","_key":"da8311c8f148"}],"children":[{"text":"First come, first served is difficult to enforce or even define in a real network environment with more than one validator. It also can result in wasteful latency races and spam even with a single trusted sequencer. Finally, MEV taxes may be able to eliminate certain kinds of MEV that first-come first-served ordering cannot, such as arbitrage profits from discontinuous “jumps” in asset prices. The potential advantages of priority ordering over first-come first-served ordering are somewhat related to the advantages of discrete-time over continuous-time exchanges discussed in ","_key":"8b7f5ba1ee7c0","_type":"span","marks":[]},{"_type":"span","marks":["da8311c8f148"],"text":"Budish, Cramton, Shim (2015)","_key":"8b7f5ba1ee7c1"},{"_type":"span","marks":[],"text":".","_key":"8b7f5ba1ee7c2"}],"asset":null},{"markDefs":[],"children":[{"_type":"span","marks":[],"text":"Meanwhile, while priority ordering seems to leak value to MEV by default, this post shows how applications can be designed to recapture it.","_key":"0af9a73b67120"}],"_type":"block","style":"normal","_key":"b0da2029dbfc","asset":null},{"children":[{"_type":"span","marks":["em"],"text":"Fee sharing","_key":"c95db8ae6ef30"},{"_type":"span","marks":[],"text":". Blast, an Ethereum L2, ","_key":"c95db8ae6ef31"},{"_type":"span","marks":["d2da5aabcebe"],"text":"shares","_key":"c95db8ae6ef32"},{"_type":"span","marks":[],"text":" a portion of both priority and base fees with the smart contracts accessed in a transaction.","_key":"c95db8ae6ef33"}],"_type":"block","style":"normal","_key":"6e2bfc14e55c","asset":null,"markDefs":[{"_key":"d2da5aabcebe","_type":"link","href":"https://docs.blast.io/building/guides/gas-fees"}]},{"markDefs":[],"children":[{"_type":"span","marks":[],"text":"MEV taxes allow something similar (at least for priority fees), but can be implemented at the application layer on ","_key":"767147a167cd0"},{"_type":"span","marks":["em"],"text":"any","_key":"767147a167cd1"},{"text":" chain that uses competitive priority ordering, without special support for fee sharing. They also allow applications to define their own taxes as custom functions of priority fee, providing more flexibility and potentially resulting in greater composeability of MEV-aware applications.","_key":"767147a167cd2","_type":"span","marks":[]}],"_type":"block","asset":null,"style":"normal","_key":"2a35ea167be5"},{"markDefs":[],"children":[{"_type":"span","marks":["em"],"text":"Trustless solutions","_key":"10b2a298850e0"},{"text":". This post focuses on the motivation for platforms to use competitive priority ordering—and ways to take advantage of platforms that do—rather than discussing how to trustlessly enforce it.","_key":"10b2a298850e1","_type":"span","marks":[]}],"_type":"block","style":"normal","_key":"5da027b47a73","asset":null},{"markDefs":[{"_type":"link","href":"https://arxiv.org/pdf/2301.13321","_key":"0d0803d3378c"}],"children":[{"_type":"span","marks":[],"text":"There has been significant prior discussion of each of the other properties required for competitive priority ordering. For example, in ","_key":"6aed52f138e40"},{"_type":"span","marks":["0d0803d3378c"],"text":"Fox, Pai, Resnick (2023)","_key":"6aed52f138e41"},{"_type":"span","marks":[],"text":", the authors discuss vulnerabilities in onchain auctions in the absence of censorship resistance, and describe a design for a censorship resistant auction using multiple concurrent proposers. However, they do not suggest a specific ordering for transactions.","_key":"6aed52f138e42"}],"_type":"block","style":"normal","_key":"1a911f5ab1c1","asset":null},{"_key":"a3b418552213","asset":null,"markDefs":[{"_type":"link","href":"https://writings.flashbots.net/mevm-suave-centauri-and-beyond","_key":"5a555ee196c0"},{"_type":"link","href":"https://x.com/SorellaLabs","_key":"bdff3a147870"},{"_type":"link","href":"https://www.paradigm.xyz/2024/02/leaderless-auctions","_key":"6ca4bd0adf45"},{"_type":"link","href":"https://medium.com/@espressosys/espresso-systems-and-offchain-labs-release-r-d-roadmap-for-decentralized-timeboost-5d0007dff66d","_key":"bb6256b2482c"},{"_type":"link","href":"https://gist.github.com/karalabe/4313ece67b528113ea72388ac2df25d8","_key":"4aac55885779"}],"children":[{"_type":"span","marks":[],"text":"There has been other research on constructing mechanisms for trust-minimized block building, including Flashbots’s ","_key":"67d45405f0f20"},{"_type":"span","marks":["5a555ee196c0"],"text":"SUAVE","_key":"67d45405f0f21"},{"_type":"span","marks":[],"text":", ","_key":"67d45405f0f22"},{"_type":"span","marks":["bdff3a147870"],"text":"Sorella","_key":"67d45405f0f23"},{"_type":"span","marks":[],"text":"’s Angstrom, ","_key":"67d45405f0f24"},{"marks":["6ca4bd0adf45"],"text":"Leaderless Auctions","_key":"67d45405f0f25","_type":"span"},{"_type":"span","marks":[],"text":", Espresso and Offchain Labs’ ","_key":"67d45405f0f26"},{"text":"decentralized Timeboost","_key":"67d45405f0f27","_type":"span","marks":["bb6256b2482c"]},{"_type":"span","marks":[],"text":", and ","_key":"67d45405f0f28"},{"_key":"67d45405f0f29","_type":"span","marks":["4aac55885779"],"text":"mandated public transaction inclusion"},{"_key":"67d45405f0f210","_type":"span","marks":[],"text":" by Péter Szilági."}],"_type":"block","style":"normal"}]},{"_type":"richTextBlock","_key":"2cb697fa4630","content":[{"markDefs":[],"children":[{"_type":"span","marks":[],"text":"Conclusion","_key":"7a2cbce1132a0"}],"_type":"block","style":"h2","_key":"ccf8e00cd865","asset":null},{"_type":"block","style":"normal","_key":"2222451a8e9c","markDefs":[],"children":[{"_type":"span","marks":[],"text":"We hope this post encourages L2s to consider using priority ordering (as is supported by default in the OP Stack) and inspires applications to try out MEV taxes where supported.","_key":"29589106478a0"}],"asset":null},{"markDefs":[{"_type":"link","href":"https://www.tldresear.ch/tldr/tldr-request-for-papers/mev-resistant-l2-sequencers","_key":"394d344c4d0a"},{"_type":"link","href":"mailto:dan@paradigm.xyz","_key":"b04a798dca45"},{"_type":"link","href":"mailto:dave@paradigm.xyz","_key":"b52b39a11680"}],"children":[{"marks":[],"text":"We also hope it motivates further research into protocols for trust-minimized competitive priority ordering on both L1 and L2. If you’re interested in collaborating on that problem, and are reading this before Thursday, June 6, you can still apply for a TLDR Fellowship to work on ","_key":"281135e635f10","_type":"span"},{"_type":"span","marks":["394d344c4d0a"],"text":"MEV-resistant L2 sequencers","_key":"281135e635f11"},{"_key":"281135e635f12","_type":"span","marks":[],"text":" with Dan. Or feel free to just reach out to "},{"_type":"span","marks":["b04a798dca45"],"text":"dan@paradigm.xyz","_key":"281135e635f13"},{"_type":"span","marks":[],"text":" and ","_key":"281135e635f14"},{"text":"dave@paradigm.xyz","_key":"281135e635f15","_type":"span","marks":["b52b39a11680"]},{"_key":"281135e635f16","_type":"span","marks":[],"text":" with ideas!"}],"_type":"block","style":"normal","_key":"eca42341868f","asset":null}]}]},"__N_SSG":true},"page":"/[slug]/[postMonth]/[postSlug]","query":{"slug":"2024","postMonth":"06","postSlug":"priority-is-all-you-need"},"buildId":"l8SbaQQM0om_yyzCyQlj0","isFallback":false,"dynamicIds":[72334],"gsp":true,"scriptLoader":[{"src":"https://www.googletagmanager.com/gtag/js?id=G-1JXQV4JD0S","strategy":"afterInteractive"},{"id":"google-analytics","strategy":"afterInteractive","children":"\n      \t\t\t\twindow.dataLayer = window.dataLayer || [];       \t\t\t\tfunction gtag(){window.dataLayer.push(arguments);}       \t\t\t\tgtag('js', new Date());       \t\t\t\tgtag('config', 'G-1JXQV4JD0S');\n      \t\t\t"}]}</script></body></html>