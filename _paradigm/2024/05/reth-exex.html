<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>Reth Execution Extensions - Paradigm</title><meta name="description" content="Paradigm is a research-driven crypto investment firm that funds companies and protocols from their earliest stages."/><meta property="og:url" content="https://www.paradigm.xyz/2024/05/reth-exex"/><meta property="og:title" content="Reth Execution Extensions"/><meta property="og:site_name" content="Paradigm"/><meta property="og:description" content="Execution Extensions (ExExes) are post-execution hooks for building real-time, high performance and zero-operations off-chain infrastructure on top of Reth."/><meta property="og:image" content="https://cdn.sanity.io/images/dgybcd83/production/9dbe4f1022b67c7855f421498848f3f1a25f7031-2400x1350.png?auto=format&amp;q=75&amp;w=1200&amp;format=png"/><meta name="twitter:site" content="@paradigm"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Reth Execution Extensions - Paradigm"/><meta name="twitter:description" content="Paradigm is a research-driven crypto investment firm that funds companies and protocols from their earliest stages."/><meta name="twitter:url" content="https://www.paradigm.xyz/2024/05/reth-exex"/><meta name="twitter:image" content="https://cdn.sanity.io/images/dgybcd83/production/fd732ebeb1c4d286fd7e3b5b25395d72452edeb6-2400x1260.png?auto=format&amp;q=75&amp;w=1200&amp;format=png"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2024-05-03"/><meta property="article:modified_time" content="2024-05-03"/><meta property="article:author" content="https://paradigm-vc.vercel.app/team/georgios-konstantopoulos"/><meta name="next-head-count" content="19"/><link rel="apple-touch-icon" sizes="180x180" href="../../favicon/apple-touch-icon.png"/><link rel="mask-icon" href="../../favicon/safari-pinned-tab.svg" color="#00d700"/><meta name="msapplication-TileColor" content="#00d700"/><link rel="icon" href="../../favicon/favicon.ico" sizes="any"/><link rel="icon" href="../../favicon/favicon.svg" type="image/svg+xml"/><link rel="manifest" href="../../favicon/site.webmanifest" crossorigin="use-credentials"/><meta name="theme-color" content="#00E100"/><link rel="preload" href="../../_next/static/css/36d742fa6f75af33.css" as="style"/><link rel="stylesheet" href="../../_next/static/css/36d742fa6f75af33.css" data-n-g=""/><link rel="preload" href="../../_next/static/css/5b6964bdff897f88.css" as="style"/><link rel="stylesheet" href="../../_next/static/css/5b6964bdff897f88.css" data-n-p=""/><link rel="preload" href="../../_next/static/css/fdaebb5f1068cb99.css" as="style"/><link rel="stylesheet" href="../../_next/static/css/fdaebb5f1068cb99.css"/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="../../_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script defer="" src="../../_next/static/chunks/2334.fdd0fc2ee869ba74.js"></script><script defer="" src="../../_next/static/chunks/168.0364ff54ff279aa9.js"></script><script defer="" src="../../_next/static/chunks/2350.e7ebe2078e1d44c5.js"></script><script src="../../_next/static/chunks/webpack-54ad8f2f0d9b23ef.js" defer=""></script><script src="../../_next/static/chunks/framework-cfbe8447b8b751ea.js" defer=""></script><script src="../../_next/static/chunks/main-9a281b117d523626.js" defer=""></script><script src="../../_next/static/chunks/pages/_app-64c08ce1425afd18.js" defer=""></script><script src="../../_next/static/chunks/175675d1-ea6ec12d1ec73e3b.js" defer=""></script><script src="../../_next/static/chunks/3114-9ad26c08e3a6fd59.js" defer=""></script><script src="../../_next/static/chunks/8294-352a030481cb472f.js" defer=""></script><script src="../../_next/static/chunks/1358-b6def54e6ad0bd04.js" defer=""></script><script src="../../_next/static/chunks/7213-de9885b5038b802a.js" defer=""></script><script src="../../_next/static/chunks/pages/[slug]/[postMonth]/[postSlug]-79dba873a1ad12ef.js" defer=""></script><script src="../../_next/static/l8SbaQQM0om_yyzCyQlj0/_buildManifest.js" defer=""></script><script src="../../_next/static/l8SbaQQM0om_yyzCyQlj0/_ssgManifest.js" defer=""></script></head><body><div id="__next"><header><div class="lg:hidden fixed z-50 top-0 left-0 right-0 bg-white"><div class="px-container-mobile h-header-mobile flex justify-between items-center"><a class="block" href="../../index.html"><svg width="140" height="32" viewBox="0 0 140 32" class="block text-black"><path d="M28 9.84634L10.7692 0L8.61538 1.23168V3.69267L6.46154 2.46099L4.30769 3.69267V6.15367L2.15385 4.92198L0 6.15367V25.8463L2.15385 27.078L4.30769 25.8463V28.3073L6.46154 29.539L8.61538 28.3073V30.7683L10.7692 32L28 22.1537V19.6927L25.8462 18.461L28 17.2293V14.7683L25.8462 13.5366L28 12.305V9.84634ZM4.30769 23.3853L2.15385 24.617V7.38534L4.30769 8.61702V23.3853ZM10.7692 24.6147V22.1537L19.3846 17.2317L21.5385 18.4634L10.7692 24.6147ZM17.2308 16L10.7692 19.6927V12.3073L17.2308 16ZM19.3846 14.7683L10.7692 9.84634V7.38534L21.5385 13.539L19.3846 14.7683ZM6.46154 4.92198L8.61538 6.15367V8.61466L6.46154 7.38298V4.92198ZM6.46154 9.84634L8.61538 11.078V20.9244L6.46154 22.156V9.84634ZM6.46154 24.6147L8.61538 23.383V25.844L6.46154 27.0756V24.6147ZM25.8462 20.922L10.7692 29.5366V27.0756L23.6923 19.6903L25.8462 20.922ZM25.8462 16L23.6923 17.2317L21.5385 16L23.6923 14.7683L25.8462 16ZM23.6923 12.3073L10.7692 4.92198V2.46099L25.8462 11.0756L23.6923 12.3073Z" fill="#00E100"></path><g opacity="0"><path d="M38.9292 22.7264C38.9319 22.9865 39.6678 23.2626 40.7096 23.3938L41.4433 23.4572L41.4562 24.7103L33.9608 24.7879L33.9478 23.5348L34.5146 23.4581C35.5297 23.2821 36.118 23.0159 36.1154 22.7557L35.9733 9.04186C35.9706 8.78174 35.3768 8.52773 34.3584 8.37269L33.7903 8.30766L33.7773 7.05454L40.0195 6.98989C44.5119 6.94336 47.9329 8.46861 47.9691 11.968C48.0035 15.2783 45.0968 17.7441 40.3019 18.2666L40.005 16.9927C42.8857 16.5844 45.0725 15.4032 45.0474 12.9677C45.0201 10.3432 43.2509 8.46975 39.4441 8.50923L38.7822 8.51609L38.9294 22.7266L38.9292 22.7264Z" fill="currentColor"></path><path d="M48.7148 21.209C48.7148 18.5134 50.8902 17.9695 52.9475 17.6384C54.0353 17.4492 54.7445 17.1418 55.2884 16.5506L55.312 15.4156C55.3357 13.5713 54.5319 12.8382 53.3732 12.8382C52.309 12.8382 51.9307 13.3112 51.9307 13.9023C51.9307 14.3043 52.0253 14.6118 52.0253 14.8246C52.0253 15.132 51.5523 15.3685 50.6776 15.3685C49.9445 15.3685 49.2116 15.132 49.2116 14.8482C49.2116 13.7841 51.789 11.0885 54.3427 11.0885C56.5181 11.0885 57.866 11.9633 57.8187 14.5172L57.7004 19.9556C57.6531 22.0839 58.2443 22.6276 59.2848 22.6276C59.5449 22.6276 59.7104 22.604 59.9469 22.533L60.0179 22.5803C59.7341 23.739 58.8118 24.5192 57.677 24.5192C56.471 24.5192 55.7854 23.7625 55.407 22.6512C54.6976 23.8809 53.681 24.6376 52.2621 24.6376C50.3232 24.6376 48.7152 23.408 48.7152 21.209H48.7148ZM53.0656 22.8406C53.9169 22.8406 54.6263 22.3913 55.1938 21.8238L55.2648 17.8039C54.91 18.3005 54.3662 18.5607 53.5385 18.8208C52.2617 19.2228 51.1976 19.6011 51.1976 20.9961C51.1976 22.2021 51.9543 22.8406 53.0656 22.8406Z" fill="currentColor"></path><path d="M62.7621 14.5644C62.7621 14.328 62.5729 14.1388 60.9414 13.3821V12.531L64.2518 11.1121H64.843L65.2214 13.5476C66.1907 11.9632 67.042 11.1358 68.4609 11.1358C69.2176 11.1358 69.9031 11.4195 69.9031 11.7033C69.9031 12.862 69.1228 14.4225 68.7681 14.4225C68.6971 14.4225 68.6498 14.3989 68.4843 14.3043C67.9168 13.9732 67.3729 13.7604 66.8054 13.7604C66.3088 13.7604 65.7885 14.0442 65.3156 14.4698V22.2492C65.3156 22.5093 65.9304 22.7695 67.0891 22.935L67.8222 23.0296V24.1646H60.9885V23.0296L61.4142 22.935C62.431 22.7222 62.7619 22.5093 62.7619 22.2492V14.5642L62.7621 14.5644Z" fill="currentColor"></path><path d="M70.3496 21.209C70.3496 18.5134 72.525 17.9695 74.5823 17.6384C75.6701 17.4492 76.3793 17.1418 76.9232 16.5506L76.9468 15.4156C76.9705 13.5713 76.1666 12.8382 75.0079 12.8382C73.9438 12.8382 73.5654 13.3112 73.5654 13.9023C73.5654 14.3043 73.66 14.6118 73.66 14.8246C73.66 15.132 73.1871 15.3685 72.3123 15.3685C71.5793 15.3685 70.8464 15.132 70.8464 14.8482C70.8464 13.7841 73.4238 11.0885 75.9775 11.0885C78.1528 11.0885 79.5007 11.9633 79.4534 14.5172L79.3352 19.9556C79.2879 22.0839 79.8791 22.6276 80.9196 22.6276C81.1797 22.6276 81.3452 22.604 81.5817 22.533L81.6526 22.5803C81.3688 23.739 80.4466 24.5192 79.3117 24.5192C78.1057 24.5192 77.4201 23.7625 77.0418 22.6512C76.3324 23.8809 75.3157 24.6376 73.8969 24.6376C71.958 24.6376 70.35 23.408 70.35 21.209H70.3496ZM74.7003 22.8406C75.5516 22.8406 76.261 22.3913 76.8286 21.8238L76.8995 17.8039C76.5448 18.3005 76.0009 18.5607 75.1733 18.8208C73.8965 19.2228 72.8324 19.6011 72.8324 20.9961C72.8324 22.2021 73.5891 22.8406 74.7003 22.8406Z" fill="currentColor"></path><path d="M92.5238 24.8032H91.909L91.5779 22.9116C90.2065 23.8575 88.7404 24.6378 87.3691 24.6378C84.4132 24.6378 82.0723 22.1076 82.0723 18.3007C82.0723 13.9262 84.957 11.136 88.4566 11.136C89.6861 11.136 90.5847 11.3725 91.2941 11.8218V7.80802C91.2941 7.57155 91.0815 7.38237 89.4262 6.48397V5.65631L93.2568 4.35571H93.8244V19.9086C93.8244 21.9659 94.4156 22.5096 95.2903 22.5096C95.5031 22.5096 95.7158 22.4859 95.9524 22.4386L96.0234 22.4859V23.7629L92.5238 24.8032ZM88.953 22.6041C89.828 22.6041 90.5847 22.3913 91.2939 22.013V16.1488C91.2939 14.0444 89.9699 12.6729 88.1256 12.6729C86.2338 12.6729 84.744 14.0444 84.744 17.0238C84.744 20.618 86.3757 22.6041 88.953 22.6041Z" fill="currentColor"></path><path d="M96.944 24.1647V23.0296L97.3694 22.935C98.3863 22.6986 98.7171 22.4857 98.7171 22.2256V14.5643C98.7171 14.3278 98.5281 14.1386 96.8965 13.3819V12.5308L100.704 11.112H101.271V22.2256C101.271 22.4857 101.626 22.6986 102.619 22.935L103.044 23.0296V24.1647H96.9438H96.944ZM101.791 6.73762C101.791 7.84904 101.035 8.53462 99.9233 8.53462C98.8119 8.53462 98.0552 7.84885 98.0552 6.73762C98.0552 5.64984 98.8119 4.96426 99.9233 4.96426C101.058 4.96426 101.791 5.65003 101.791 6.73762Z" fill="currentColor"></path><path d="M108.193 19.8611C107.649 20.2867 107.223 20.7833 107.223 21.2799C107.223 21.7527 107.649 21.9657 108.997 22.0603L112.828 22.344C115.145 22.5332 116.469 23.6917 116.469 25.5599C116.469 28.3737 113.513 31.0222 109.21 31.0222C105.687 31.0222 103.984 29.7216 103.984 27.7591C103.984 26.5059 104.859 25.7019 106.94 24.1885C105.923 23.9757 104.576 23.2426 104.576 22.2969C104.576 21.3276 105.521 20.4526 107.129 19.6013C105.498 18.9865 104.363 17.6386 104.363 15.7707C104.363 12.9805 106.538 11.136 109.565 11.136C110.723 11.136 111.74 11.4907 112.497 12.0819L116.398 12.1765V13.4059L113.774 13.9971C114.057 14.4464 114.247 14.9665 114.247 15.6288C114.247 18.1352 112.095 19.9322 109.092 19.9322C108.784 19.9322 108.501 19.9085 108.193 19.8613L108.193 19.8611ZM109.943 29.5324C112.142 29.5324 113.939 28.2318 113.939 26.3875C113.939 25.2524 113.324 24.7559 111.432 24.614L108.311 24.4011C107.294 25.0869 106.419 26.0801 106.419 27.026C106.419 28.4446 107.696 29.5326 109.943 29.5326V29.5324ZM111.858 16.1723C111.858 14.3516 110.889 12.7436 109.044 12.7436C107.768 12.7436 106.869 13.6186 106.869 15.0372C106.869 16.8342 107.791 18.4659 109.659 18.4659C110.983 18.4659 111.858 17.5909 111.858 16.1723Z" fill="currentColor"></path><path d="M119.59 14.5654C119.59 14.3289 119.401 14.1397 117.77 13.383V12.5319L121.08 11.1131H121.671L121.955 12.9576C123.468 12.0117 125.076 11.1131 126.613 11.1131C127.984 11.1131 128.978 11.586 129.474 13.052C131.059 12.0826 132.737 11.1131 134.345 11.1131C136.355 11.1131 137.561 12.1772 137.561 16.0788V22.2504C137.561 22.5105 137.916 22.7233 138.932 22.9361L139.334 23.0307V24.1658H133.257V23.0307L133.659 22.9361C134.676 22.6997 135.007 22.5105 135.007 22.2504V16.4335C135.007 14.1872 134.132 13.2177 132.288 13.2177C131.389 13.2177 130.467 13.5014 129.71 13.9034C129.828 14.4946 129.876 15.2277 129.876 16.0788V22.2504C129.876 22.5105 130.207 22.7233 131.2 22.9361L131.625 23.0307V24.1658H125.572V23.0307L125.974 22.9361C126.991 22.6997 127.322 22.5105 127.322 22.2504V16.4335C127.322 14.1872 126.447 13.2177 124.579 13.2177C123.751 13.2177 122.876 13.4778 122.143 13.8325V22.2505C122.143 22.5107 122.474 22.6998 123.491 22.9363L123.893 23.0309V24.166H117.816V23.0309L118.242 22.9363C119.258 22.7235 119.589 22.5107 119.589 22.2505V14.5656L119.59 14.5654Z" fill="currentColor"></path></g></svg></a><button class="p-1 bg-black flex flex-col items-center text-center border border-solid border-transparent" aria-label="Mobile Menu"><div class="tag text-gray-dark"></div></button></div></div><div class="hidden lg:block fixed md:top-2 md:left-2 top-[16px] left-[16px] z-50 pointer-events-none w-full"><div class="grid grid-cols-12 items-center"><a class="col-start-1 block pointer-events-auto" href="../../index.html"><svg width="140" height="32" viewBox="0 0 140 32" class="block text-black"><path d="M28 9.84634L10.7692 0L8.61538 1.23168V3.69267L6.46154 2.46099L4.30769 3.69267V6.15367L2.15385 4.92198L0 6.15367V25.8463L2.15385 27.078L4.30769 25.8463V28.3073L6.46154 29.539L8.61538 28.3073V30.7683L10.7692 32L28 22.1537V19.6927L25.8462 18.461L28 17.2293V14.7683L25.8462 13.5366L28 12.305V9.84634ZM4.30769 23.3853L2.15385 24.617V7.38534L4.30769 8.61702V23.3853ZM10.7692 24.6147V22.1537L19.3846 17.2317L21.5385 18.4634L10.7692 24.6147ZM17.2308 16L10.7692 19.6927V12.3073L17.2308 16ZM19.3846 14.7683L10.7692 9.84634V7.38534L21.5385 13.539L19.3846 14.7683ZM6.46154 4.92198L8.61538 6.15367V8.61466L6.46154 7.38298V4.92198ZM6.46154 9.84634L8.61538 11.078V20.9244L6.46154 22.156V9.84634ZM6.46154 24.6147L8.61538 23.383V25.844L6.46154 27.0756V24.6147ZM25.8462 20.922L10.7692 29.5366V27.0756L23.6923 19.6903L25.8462 20.922ZM25.8462 16L23.6923 17.2317L21.5385 16L23.6923 14.7683L25.8462 16ZM23.6923 12.3073L10.7692 4.92198V2.46099L25.8462 11.0756L23.6923 12.3073Z" fill="#00E100"></path><g opacity="0"><path d="M38.9292 22.7264C38.9319 22.9865 39.6678 23.2626 40.7096 23.3938L41.4433 23.4572L41.4562 24.7103L33.9608 24.7879L33.9478 23.5348L34.5146 23.4581C35.5297 23.2821 36.118 23.0159 36.1154 22.7557L35.9733 9.04186C35.9706 8.78174 35.3768 8.52773 34.3584 8.37269L33.7903 8.30766L33.7773 7.05454L40.0195 6.98989C44.5119 6.94336 47.9329 8.46861 47.9691 11.968C48.0035 15.2783 45.0968 17.7441 40.3019 18.2666L40.005 16.9927C42.8857 16.5844 45.0725 15.4032 45.0474 12.9677C45.0201 10.3432 43.2509 8.46975 39.4441 8.50923L38.7822 8.51609L38.9294 22.7266L38.9292 22.7264Z" fill="currentColor"></path><path d="M48.7148 21.209C48.7148 18.5134 50.8902 17.9695 52.9475 17.6384C54.0353 17.4492 54.7445 17.1418 55.2884 16.5506L55.312 15.4156C55.3357 13.5713 54.5319 12.8382 53.3732 12.8382C52.309 12.8382 51.9307 13.3112 51.9307 13.9023C51.9307 14.3043 52.0253 14.6118 52.0253 14.8246C52.0253 15.132 51.5523 15.3685 50.6776 15.3685C49.9445 15.3685 49.2116 15.132 49.2116 14.8482C49.2116 13.7841 51.789 11.0885 54.3427 11.0885C56.5181 11.0885 57.866 11.9633 57.8187 14.5172L57.7004 19.9556C57.6531 22.0839 58.2443 22.6276 59.2848 22.6276C59.5449 22.6276 59.7104 22.604 59.9469 22.533L60.0179 22.5803C59.7341 23.739 58.8118 24.5192 57.677 24.5192C56.471 24.5192 55.7854 23.7625 55.407 22.6512C54.6976 23.8809 53.681 24.6376 52.2621 24.6376C50.3232 24.6376 48.7152 23.408 48.7152 21.209H48.7148ZM53.0656 22.8406C53.9169 22.8406 54.6263 22.3913 55.1938 21.8238L55.2648 17.8039C54.91 18.3005 54.3662 18.5607 53.5385 18.8208C52.2617 19.2228 51.1976 19.6011 51.1976 20.9961C51.1976 22.2021 51.9543 22.8406 53.0656 22.8406Z" fill="currentColor"></path><path d="M62.7621 14.5644C62.7621 14.328 62.5729 14.1388 60.9414 13.3821V12.531L64.2518 11.1121H64.843L65.2214 13.5476C66.1907 11.9632 67.042 11.1358 68.4609 11.1358C69.2176 11.1358 69.9031 11.4195 69.9031 11.7033C69.9031 12.862 69.1228 14.4225 68.7681 14.4225C68.6971 14.4225 68.6498 14.3989 68.4843 14.3043C67.9168 13.9732 67.3729 13.7604 66.8054 13.7604C66.3088 13.7604 65.7885 14.0442 65.3156 14.4698V22.2492C65.3156 22.5093 65.9304 22.7695 67.0891 22.935L67.8222 23.0296V24.1646H60.9885V23.0296L61.4142 22.935C62.431 22.7222 62.7619 22.5093 62.7619 22.2492V14.5642L62.7621 14.5644Z" fill="currentColor"></path><path d="M70.3496 21.209C70.3496 18.5134 72.525 17.9695 74.5823 17.6384C75.6701 17.4492 76.3793 17.1418 76.9232 16.5506L76.9468 15.4156C76.9705 13.5713 76.1666 12.8382 75.0079 12.8382C73.9438 12.8382 73.5654 13.3112 73.5654 13.9023C73.5654 14.3043 73.66 14.6118 73.66 14.8246C73.66 15.132 73.1871 15.3685 72.3123 15.3685C71.5793 15.3685 70.8464 15.132 70.8464 14.8482C70.8464 13.7841 73.4238 11.0885 75.9775 11.0885C78.1528 11.0885 79.5007 11.9633 79.4534 14.5172L79.3352 19.9556C79.2879 22.0839 79.8791 22.6276 80.9196 22.6276C81.1797 22.6276 81.3452 22.604 81.5817 22.533L81.6526 22.5803C81.3688 23.739 80.4466 24.5192 79.3117 24.5192C78.1057 24.5192 77.4201 23.7625 77.0418 22.6512C76.3324 23.8809 75.3157 24.6376 73.8969 24.6376C71.958 24.6376 70.35 23.408 70.35 21.209H70.3496ZM74.7003 22.8406C75.5516 22.8406 76.261 22.3913 76.8286 21.8238L76.8995 17.8039C76.5448 18.3005 76.0009 18.5607 75.1733 18.8208C73.8965 19.2228 72.8324 19.6011 72.8324 20.9961C72.8324 22.2021 73.5891 22.8406 74.7003 22.8406Z" fill="currentColor"></path><path d="M92.5238 24.8032H91.909L91.5779 22.9116C90.2065 23.8575 88.7404 24.6378 87.3691 24.6378C84.4132 24.6378 82.0723 22.1076 82.0723 18.3007C82.0723 13.9262 84.957 11.136 88.4566 11.136C89.6861 11.136 90.5847 11.3725 91.2941 11.8218V7.80802C91.2941 7.57155 91.0815 7.38237 89.4262 6.48397V5.65631L93.2568 4.35571H93.8244V19.9086C93.8244 21.9659 94.4156 22.5096 95.2903 22.5096C95.5031 22.5096 95.7158 22.4859 95.9524 22.4386L96.0234 22.4859V23.7629L92.5238 24.8032ZM88.953 22.6041C89.828 22.6041 90.5847 22.3913 91.2939 22.013V16.1488C91.2939 14.0444 89.9699 12.6729 88.1256 12.6729C86.2338 12.6729 84.744 14.0444 84.744 17.0238C84.744 20.618 86.3757 22.6041 88.953 22.6041Z" fill="currentColor"></path><path d="M96.944 24.1647V23.0296L97.3694 22.935C98.3863 22.6986 98.7171 22.4857 98.7171 22.2256V14.5643C98.7171 14.3278 98.5281 14.1386 96.8965 13.3819V12.5308L100.704 11.112H101.271V22.2256C101.271 22.4857 101.626 22.6986 102.619 22.935L103.044 23.0296V24.1647H96.9438H96.944ZM101.791 6.73762C101.791 7.84904 101.035 8.53462 99.9233 8.53462C98.8119 8.53462 98.0552 7.84885 98.0552 6.73762C98.0552 5.64984 98.8119 4.96426 99.9233 4.96426C101.058 4.96426 101.791 5.65003 101.791 6.73762Z" fill="currentColor"></path><path d="M108.193 19.8611C107.649 20.2867 107.223 20.7833 107.223 21.2799C107.223 21.7527 107.649 21.9657 108.997 22.0603L112.828 22.344C115.145 22.5332 116.469 23.6917 116.469 25.5599C116.469 28.3737 113.513 31.0222 109.21 31.0222C105.687 31.0222 103.984 29.7216 103.984 27.7591C103.984 26.5059 104.859 25.7019 106.94 24.1885C105.923 23.9757 104.576 23.2426 104.576 22.2969C104.576 21.3276 105.521 20.4526 107.129 19.6013C105.498 18.9865 104.363 17.6386 104.363 15.7707C104.363 12.9805 106.538 11.136 109.565 11.136C110.723 11.136 111.74 11.4907 112.497 12.0819L116.398 12.1765V13.4059L113.774 13.9971C114.057 14.4464 114.247 14.9665 114.247 15.6288C114.247 18.1352 112.095 19.9322 109.092 19.9322C108.784 19.9322 108.501 19.9085 108.193 19.8613L108.193 19.8611ZM109.943 29.5324C112.142 29.5324 113.939 28.2318 113.939 26.3875C113.939 25.2524 113.324 24.7559 111.432 24.614L108.311 24.4011C107.294 25.0869 106.419 26.0801 106.419 27.026C106.419 28.4446 107.696 29.5326 109.943 29.5326V29.5324ZM111.858 16.1723C111.858 14.3516 110.889 12.7436 109.044 12.7436C107.768 12.7436 106.869 13.6186 106.869 15.0372C106.869 16.8342 107.791 18.4659 109.659 18.4659C110.983 18.4659 111.858 17.5909 111.858 16.1723Z" fill="currentColor"></path><path d="M119.59 14.5654C119.59 14.3289 119.401 14.1397 117.77 13.383V12.5319L121.08 11.1131H121.671L121.955 12.9576C123.468 12.0117 125.076 11.1131 126.613 11.1131C127.984 11.1131 128.978 11.586 129.474 13.052C131.059 12.0826 132.737 11.1131 134.345 11.1131C136.355 11.1131 137.561 12.1772 137.561 16.0788V22.2504C137.561 22.5105 137.916 22.7233 138.932 22.9361L139.334 23.0307V24.1658H133.257V23.0307L133.659 22.9361C134.676 22.6997 135.007 22.5105 135.007 22.2504V16.4335C135.007 14.1872 134.132 13.2177 132.288 13.2177C131.389 13.2177 130.467 13.5014 129.71 13.9034C129.828 14.4946 129.876 15.2277 129.876 16.0788V22.2504C129.876 22.5105 130.207 22.7233 131.2 22.9361L131.625 23.0307V24.1658H125.572V23.0307L125.974 22.9361C126.991 22.6997 127.322 22.5105 127.322 22.2504V16.4335C127.322 14.1872 126.447 13.2177 124.579 13.2177C123.751 13.2177 122.876 13.4778 122.143 13.8325V22.2505C122.143 22.5107 122.474 22.6998 123.491 22.9363L123.893 23.0309V24.166H117.816V23.0309L118.242 22.9363C119.258 22.7235 119.589 22.5107 119.589 22.2505V14.5656L119.59 14.5654Z" fill="currentColor"></path></g></svg></a><div class="col-span-6 col-start-5 xl:col-span-5 xl:col-start-4"><div class="text-black pointer-events-auto bg-white px-2 w-fit -mx-3 border border-solid border-gray-neutral !border-transparent"><ul class="h-[48px] flex items-center justify-start gap-3 2xl:gap-4 font-mono text-mono-12"><li><a _key="426608038e76" class="flex gap-half items-center hover:underline" href="../../about.html">About</a></li><li><a _key="ff5f78089e91" class="flex gap-half items-center hover:underline" href="../../team.html">Team</a></li><li><a _key="38b3cd4525de" class="flex gap-half items-center hover:underline" href="../../portfolio.html">Portfolio</a></li><li><a _key="22b86a453ca1" class="flex gap-half items-center hover:underline" href="../../writing.html">Writing</a></li><li><a _key="cd5b2c9fbd5f" class="flex gap-half items-center hover:underline" href="../../oss.html">Open Source</a></li><li><a _key="05b4198b2e14" class="flex gap-half items-center hover:underline" href="../../careers.html">Careers</a></li></ul></div></div></div></div></header><div style="opacity:0"><div style="opacity:0"><div class="md:px-container-desktop pt-header-mobile md:pt-12 lg:pt-18"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-5 xl:col-start-4 px-container-mobile md:px-0 pt-6 md:pt-0 max-w-[900px]"><div class="flex flex-col gap-2"><div class="flex flex-col gap-2"><div class="flex flex-col gap-2"><div class="flex gap-1 md:gap-2 items-center font-mono text-mono-12 md:text-mono-13 text-gray-text"><span><a class="link-gray-black link-underline-hover" href="../../writing%3Ftags=research.html">Research</a></span></div><h1 class="font-mono text-mono-28 md:text-mono-40 tracking-tighter max-w-[1400px]">Reth Execution Extensions</h1></div></div><p class="font-mono text-mono-12 gap-1 w-full justify-between"><span>05.03.2024</span><span class="px-1">|</span><span class="content-none before:content-[&#x27;By_&#x27;]"><a class="link-underline-hover" href="../../team/georgios-konstantopoulos.html">Georgios Konstantopoulos</a></span></p></div></div></div></div><div class="my-2 md:my-4 px-container-mobile md:px-container-desktop"><div class="relative"><div class="pointer-events-none lg:pointer-events-auto my-3"><div class="grid grid-cols-12 pointer-events-auto"><div class="col-span-12 md:col-start-2 xl:col-span-5 xl:col-start-4"><div class="flex flex-col gap-1"><p class="font-mono text-mono-12 uppercase font-medium">Outline</p><ul class="flex flex-col gap-1"><li class="font-mono text-mono-12"><a class="link-underline-hover" href="reth-exex.html#89b41c291248">1. How do we build off-chain infrastructure today?</a></li><li class="font-mono text-mono-12" style="margin-inline-start:0"><a class="link-underline-hover" href="reth-exex.html#2d6201a1ee7d">2. Introducing Reth Execution Extensions (ExEx)</a><ul class="flex flex-col mt-1 gap-1 ml-[25px]"><li class="font-mono text-mono-12"><a class="link-underline-hover" href="reth-exex.html#cfd5f8fc6f98">1. How do ExExes work?</a></li><li class="font-mono text-mono-12"><a class="link-underline-hover" href="reth-exex.html#757e1a87e507">2. Hello ExEx!</a></li><li class="font-mono text-mono-12"><a class="link-underline-hover" href="reth-exex.html#64147d0b315e">3. Building an indexer for the OP Stack using ExEx</a></li><li class="font-mono text-mono-12"><a class="link-underline-hover" href="reth-exex.html#da38b29f544c">4. Building a Rollup using ExEx</a></li></ul></li><li class="font-mono text-mono-12"><a class="link-underline-hover" href="reth-exex.html#36f444fafc2d">3. What can I build with Execution Extensions?</a></li><li class="font-mono text-mono-12"><a class="link-underline-hover" href="reth-exex.html#14c0de1c99ef">4. What’s next for Execution Extensions?</a></li></ul></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><p>Reth is an all-in-one toolkit for building high performance and customizable nodes. We recently published our <a class="" href="../04/reth-perf.html">performance roadmap</a> for improving Reth’s performance &gt;100x, and <a class="" href="../04/reth-alphanet.html">Reth AlphaNet</a>, our testnet rollup for pushing Reth’s modularity and extensibility to the limits.</p><p><strong>Today, we are excited to announce Reth Execution Extensions (ExEx). ExEx is a framework for building performant and complex off-chain infrastructure as post-execution hooks. Reth ExExes can be used to implement rollups, indexers, MEV bots and more with &gt;10x less code than existing methods. With this release, we demonstrate from scratch a prod-ready reorg tracker in &lt;20 LoC, an indexer in &lt;250 LoC and a rollup in &lt;1000 LoC.</strong></p><p>ExEx was co-architected with <a class="" href="https://twitter.com/init4tech">init4</a>, a research collective building next-generation Ethereum infrastructure. We look forward to continuing to collaborate with the init4 team as we make Reth the #1 platform for building crypto infrastructure!</p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><h1 id="89b41c291248">How do we build off-chain infrastructure today?</h1><p>A blockchain is a clock that confirms blocks with transaction data on a regular interval. Off-chain infrastructure subscribes to these regular block updates and updates its own internal state as a response.</p><p>For example, consider how an Ethereum indexer works:</p><ol><li>It subscribes to Ethereum events such as blocks and logs, usually over <code>eth_subscribe</code> or by polling with <code>eth_getFilterChanges.</code></li><li>On each event, it proceeds to fetch any additional data needed over JSON-RPC such as the receipts alongside the block and its transactions.</li><li>For each payload it ABI decodes the logs it needs based on a configuration such as the address or the topics it cares about.</li><li>For all decoded data, it writes them to a database such as Postgres or Sqlite.</li></ol><p>This is the standard Extract Transform Load (ETL) pattern that you see in large scale data pipelines, with companies like Fivetran owning the data extraction, Snowflake handling the loading into a data warehouse, and customers focusing on writing the transformation’s business logic.</p><p>We observe that this same pattern also applies to other pieces of crypto infrastructure such as rollups, MEV searchers, or more complex data infrastructure like Shadow Logs.</p><p>Using that as motivation, we identify key challenges when building ETL pipelines for Ethereum nodes:</p><ol><li>Data Freshness: Chain reorganizations mean that most infrastructure is usually trailing behind the tip of the chain to avoid operating over state that might no longer be part of the canonical chain. This in practice means that building real-time crypto data products is challenging, evidenced by the proliferation of products with high latencies (on the order of multiple blocks, tens of seconds) relative to what they could be providing to their customers. We believe that this happens because nodes do not have a great developer experience for reorg-aware notification streams.</li><li>Performance: Moving data, transforming it and stitching it together across different systems means there are non negligible performance overheads. For example, a <a class="" href="https://github.com/joshstevens19/reth-indexer">Reth-based indexer</a> that directly plugs on Reth’s database showed 1-2 orders of magnitude improvement vs other indexers that plug on JSON-RPC, pointing at serious improvements by colocating workloads and removing intermediate layers of communication.</li><li>Operational Complexity: Running Ethereum nodes with high uptime is already a big challenge. Running additional infrastructure on top of them further exacerbates the problem and requires developers to think about job orchestration APIs, or running multiple services for relatively simple tasks.</li></ol><p><strong>There is a need for a better API for building off-chain infrastructure that depends on a node’s state changes. That API must be performant, ‘batteries-included’ and reorg-aware. We need an Airflow moment for building Ethereum ETL infrastructure and job orchestration.</strong></p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><h1 id="2d6201a1ee7d">Introducing Reth Execution Extensions (ExEx)</h1><p><strong>Execution Extensions (ExExes) are post-execution hooks for building real-time, high performance and zero-operations off-chain infrastructure on top of Reth.</strong></p><p>An Execution Extension is a task that derives its state from Reth&#x27;s state. Some examples of such state derives are rollups, indexers, MEV extractors, and more. We expect that developers will build reusable ExExes that compose with each other in a standardized way, similar to how Cosmos SDK modules or Substrate Pallets work.</p><figure class="py-1 gap-2 flex flex-col"><div class="image overflow-hidden" style="height:0;padding-bottom:56.25%"><picture><img class="scale-105 blur-lg" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABqUlEQVQokV1TibKjIBD0/z/w3YcmKgEElEPUmPTWTEI2u1Z1wVBF090zVtfrFQX0nfczXHAQg4AaFWywD7jo/kVyGNPIez975C2jYhbgQZqXjF73+Dh8oFENTtMJwgmcxhNUUDDJwM4WZjbQUUOHG9zsENeIqhBdrhfs+440Jwgj8N1/o9ENxCjQu55JpZdM5BbHpIVQBcV1WAKqZVsQc0TIASknJtSjRi1rHPURyisMcXgoIYWkhlY6H+LwOItLRGUmg1/xy1BOYQwjOtXhtX5llWSZSAmkkKz3tueV6+kWCT3ms0clncRb/YaX+gWd7mBHi1a1eD++4+f0w5bpkpxul1vTopENr4WsNS0/yITUHWkl52a9hY+elZZLxWaxTXnR5RLBcLdNljnD/bLzqGznDeu2Is6RR+ar+8JBH5hA+3s3o8aQbpk95zrEATbdm/I8NtzlnNAPPT7bT9SqZsud6bjTlBmp4wie8qNM6VG/+L9jU0BKaVCFFZCjhIkGJhheSQVZK6C6YJonpDXdFD7/KTSPRJrXzJO/nBes55XxvP+/3vaNo/sDyWRF0NVEV7sAAAAASUVORK5CYII="/></picture></div></figure><p>We co-architected Execution Extensions with the <a class="" href="https://twitter.com/init4tech">init4 team</a> (follow them!), a new research collective building next-generation Ethereum infrastructure. We are excited to continue collaborating with their team as we productionize ExExes and make Reth the #1 platform for building crypto infrastructure!</p><p>We are still early in the best practices of building ExExes, and we’d like to invite developers to join us in exploring this new frontier of building off-chain crypto infrastructure. Please reach out with ideas to collaborate.</p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><h2 id="cfd5f8fc6f98">How do ExExes work?</h2><p>In Rust terms, an ExEx is a Future that is run indefinitely alongside Reth. ExExes are initialized using an async closure that resolves to the ExEx. Here is the expected end to end flow:</p><ol><li>Reth exposes a reorg-aware stream called <a class="" href="https://paradigmxyz.github.io/reth/docs/reth_exex/enum.ExExNotification.html"><code>ExExNotification</code></a> which <a class="" href="https://paradigmxyz.github.io/reth/docs/reth_provider/chain/struct.Chain.html">includes</a> a list of blocks committed to the chain, and all associated transactions &amp; receipts, state changes and trie updates with them.</li><li>Developers are expected to consume that stream by writing ExExes as <code>async</code> functions that derive state such as a rollup block. The stream exposes a ChainCommitted variant for <a class="" href="https://github.com/paradigmxyz/reth/blob/main/examples/exex/op-bridge/src/main.rs#L130">appending to ExEx state</a> and a ChainReverted/Reorged-variant for <a class="" href="https://github.com/paradigmxyz/reth/blob/main/examples/exex/op-bridge/src/main.rs#L98">undoing any changes</a>. This is what allows ExExes to be operating at native block time, while also exposing a sane API for handling reorgs safely, instead of not handling reorgs and introducing latency.</li><li>ExExes get orchestrated by Reth’s <a class="" href="https://paradigmxyz.github.io/reth/docs/reth_exex/struct.ExExManager.html"><code>ExExManager</code></a> that is responsible for routing notifications from Reth to ExExes and ExEx events back to Reth, while Reth’s task executor drives ExExes to completion.</li><li>Each ExEx gets installed on the node via the <code>install_exex</code> API of the Node Builder.</li></ol><p>Here is how this roughly looks like from the node developer’s perspective:</p><p></p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="relative col-span-12 md:col-start-2 md:col-span-9 xl:col-span-5 xl:col-start-4 flex flex-col gap-1 max-w-[880px]"><div class="rich-text-code"><pre class="overflow-x-auto scroll-touch language-rust"><span class="token keyword">use</span> <span class="token namespace">futures<span class="token punctuation">::</span></span><span class="token class-name">Future</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">reth_exex<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">ExExContext</span><span class="token punctuation">,</span> <span class="token class-name">ExExEvent</span><span class="token punctuation">,</span> <span class="token class-name">ExExNotification</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">reth_node_api<span class="token punctuation">::</span></span><span class="token class-name">FullNodeComponents</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">reth_node_ethereum<span class="token punctuation">::</span></span><span class="token class-name">EthereumNode</span><span class="token punctuation">;</span>

<span class="token comment">// The `ExExContext` is available to every ExEx to interface with the rest of the node.</span>
<span class="token comment">// </span>
<span class="token comment">// pub struct ExExContext&lt;Node: FullNodeComponents> {</span>
<span class="token comment">//     /// The configured provider to interact with the blockchain.</span>
<span class="token comment">//     pub provider: Node::Provider,</span>
<span class="token comment">//     /// The task executor of the node.</span>
<span class="token comment">//     pub task_executor: TaskExecutor,</span>
<span class="token comment">//     /// The transaction pool of the node.</span>
<span class="token comment">//     pub pool: Node::Pool,</span>
<span class="token comment">//     /// Channel to receive [`ExExNotification`]s.</span>
<span class="token comment">//     pub notifications: Receiver&lt;ExExNotification>,</span>
<span class="token comment">//     // .. other useful context fields</span>
<span class="token comment">// }</span>
<span class="token keyword">async</span> <span class="token keyword">fn</span> <span class="token function-definition function">exex</span><span class="token operator">&lt;</span><span class="token class-name">Node</span><span class="token punctuation">:</span> <span class="token class-name">FullNodeComponents</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token keyword">mut</span> ctx<span class="token punctuation">:</span> <span class="token class-name">ExExContext</span><span class="token operator">&lt;</span><span class="token class-name">Node</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token namespace">eyre<span class="token punctuation">::</span></span><span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">while</span> <span class="token keyword">let</span> <span class="token class-name">Some</span><span class="token punctuation">(</span>notification<span class="token punctuation">)</span> <span class="token operator">=</span> ctx<span class="token punctuation">.</span>notifications<span class="token punctuation">.</span><span class="token function">recv</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span> <span class="token punctuation">{</span>
        <span class="token keyword">match</span> <span class="token operator">&amp;</span>notification <span class="token punctuation">{</span>
            <span class="token class-name">ExExNotification</span><span class="token punctuation">::</span><span class="token class-name">ChainCommitted</span> <span class="token punctuation">{</span> new <span class="token punctuation">}</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
                <span class="token comment">// do something</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">ExExNotification</span><span class="token punctuation">::</span><span class="token class-name">ChainReorged</span> <span class="token punctuation">{</span> old<span class="token punctuation">,</span> new <span class="token punctuation">}</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
                <span class="token comment">// do something</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">ExExNotification</span><span class="token punctuation">::</span><span class="token class-name">ChainReverted</span> <span class="token punctuation">{</span> old <span class="token punctuation">}</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
                <span class="token comment">// do something</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token namespace">eyre<span class="token punctuation">::</span></span><span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token namespace">reth<span class="token punctuation">::</span>cli<span class="token punctuation">::</span></span><span class="token class-name">Cli</span><span class="token punctuation">::</span><span class="token function">parse_args</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>builder<span class="token punctuation">,</span> _<span class="token closure-punctuation punctuation">|</span></span> <span class="token keyword">async</span> <span class="token keyword">move</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> handle <span class="token operator">=</span> builder
            <span class="token punctuation">.</span><span class="token function">node</span><span class="token punctuation">(</span><span class="token class-name">EthereumNode</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">install_exex</span><span class="token punctuation">(</span><span class="token string">"Minimal"</span><span class="token punctuation">,</span> <span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>ctx<span class="token closure-punctuation punctuation">|</span></span> <span class="token keyword">async</span> <span class="token keyword">move</span> <span class="token punctuation">{</span> <span class="token function">exex</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">launch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token keyword">await</span><span class="token operator">?</span><span class="token punctuation">;</span>

        handle<span class="token punctuation">.</span><span class="token function">wait_for_node_exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></pre></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><p>The above &lt;50 LoC snippet encapsulates defining and installing an ExEx. It is extremely powerful and allows extending your Ethereum node’s functionality with zero additional pieces of infrastructure.</p><p>Let’s walk through some examples now.</p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><h2 id="757e1a87e507">Hello ExEx!</h2><p>The <a class="" href="https://github.com/paradigmxyz/reth/blob/main/examples/exex/minimal/src/main.rs">“Hello World” of Execution Extensions</a> is a reorg tracker. The ExEx shown in the screenshot below illustrates logging whether there was a new chain or a reorganization. One could build a reorg tracker on top of their Reth node easily just by parsing the info logs emitted by the below ExEx.</p><p>In this example, the <code>old</code> and <code>new</code> chains have full access to every state change in that range of blocks, along with the trie updates and other useful information in the <a class="" href="https://paradigmxyz.github.io/reth/docs/reth_provider/chain/struct.Chain.html"><code>Chain</code></a> struct.</p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="relative col-span-12 md:col-start-2 md:col-span-9 xl:col-span-5 xl:col-start-4 flex flex-col gap-1 max-w-[880px]"><div class="rich-text-code"><pre class="overflow-x-auto scroll-touch language-rust"><span class="token keyword">async</span> <span class="token keyword">fn</span> <span class="token function-definition function">exex</span><span class="token operator">&lt;</span><span class="token class-name">Node</span><span class="token punctuation">:</span> <span class="token class-name">FullNodeComponents</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token keyword">mut</span> ctx<span class="token punctuation">:</span> <span class="token class-name">ExExContext</span><span class="token operator">&lt;</span><span class="token class-name">Node</span><span class="token operator">></span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token namespace">eyre<span class="token punctuation">::</span></span><span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">while</span> <span class="token keyword">let</span> <span class="token class-name">Some</span><span class="token punctuation">(</span>notification<span class="token punctuation">)</span> <span class="token operator">=</span> ctx<span class="token punctuation">.</span>notifications<span class="token punctuation">.</span><span class="token function">recv</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span> <span class="token punctuation">{</span>
        <span class="token keyword">match</span> <span class="token operator">&amp;</span>notification <span class="token punctuation">{</span>
            <span class="token class-name">ExExNotification</span><span class="token punctuation">::</span><span class="token class-name">ChainCommitted</span> <span class="token punctuation">{</span> new <span class="token punctuation">}</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
                <span class="token macro property">info!</span><span class="token punctuation">(</span>committed_chain <span class="token operator">=</span> <span class="token operator">?</span>new<span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"Received commit"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">ExExNotification</span><span class="token punctuation">::</span><span class="token class-name">ChainReorged</span> <span class="token punctuation">{</span> old<span class="token punctuation">,</span> new <span class="token punctuation">}</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
                <span class="token macro property">info!</span><span class="token punctuation">(</span>from_chain <span class="token operator">=</span> <span class="token operator">?</span>old<span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> to_chain <span class="token operator">=</span> <span class="token operator">?</span>new<span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"Received reorg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">ExExNotification</span><span class="token punctuation">::</span><span class="token class-name">ChainReverted</span> <span class="token punctuation">{</span> old <span class="token punctuation">}</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
                <span class="token macro property">info!</span><span class="token punctuation">(</span>reverted_chain <span class="token operator">=</span> <span class="token operator">?</span>old<span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"Received revert"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token keyword">let</span> <span class="token class-name">Some</span><span class="token punctuation">(</span>committed_chain<span class="token punctuation">)</span> <span class="token operator">=</span> notification<span class="token punctuation">.</span><span class="token function">committed_chain</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ctx<span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token class-name">ExExEvent</span><span class="token punctuation">::</span><span class="token class-name">FinishedHeight</span><span class="token punctuation">(</span>committed_chain<span class="token punctuation">.</span><span class="token function">tip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>number<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></pre></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><h2 id="64147d0b315e">Building an indexer for the OP Stack using ExEx</h2><p>Now that we have the basics of hooking on node events, let&#x27;s build a more elaborate example, such as an <a class="" href="https://github.com/paradigmxyz/reth/blob/main/examples/exex/op-bridge/src/main.rs">indexer for deposits and withdrawals in common OP Stack chains</a>, using SQlite as the backend.</p><p>In this case:</p><ol><li>We have loaded the <a class="" href="https://github.com/ethereum-optimism/optimism/blob/65ec61dde94ffa93342728d324fecf474d228e1f/packages/contracts-bedrock/contracts/L1/L1StandardBridge.sol">OP Stack&#x27;s bridge contract</a> using Alloy&#x27;s <a class="" href="https://docs.rs/alloy-core/latest/alloy_core/sol_types/macro.sol.html"><code>sol!</code></a> macro to generate type-safe ABI decoders (this is an extremely powerful macro that we encourage developers to <a class="" href="https://docs.rs/alloy-core/latest/alloy_core/sol_types/macro.sol.html">dive deeper in</a>).</li><li>We initialize the SQLite connection and set up the database tables.</li><li>On each <code>ExExNotification</code> we proceed to read the logs for every committed block, decode it, and then insert it into SQLite.</li><li>If the <code>ExExNotification</code> is for a chain reorganization, then we remove the corresponding entries from the SQLite tables.</li></ol><p>That&#x27;s it! Super simple, and probably the highest performance locally hosted real-time indexer you can build in 30 minutes. See the code below, and go through the <a class="" href="https://github.com/paradigmxyz/reth/blob/main/examples/exex/op-bridge/src/main.rs">full example</a>.</p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="relative col-span-12 md:col-start-2 md:col-span-9 xl:col-span-5 xl:col-start-4 flex flex-col gap-1 max-w-[880px]"><div class="rich-text-code"><pre class="overflow-x-auto scroll-touch language-rust"><span class="token keyword">use</span> <span class="token namespace">alloy_sol_types<span class="token punctuation">::</span></span><span class="token punctuation">{</span>sol<span class="token punctuation">,</span> <span class="token class-name">SolEventInterface</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">futures<span class="token punctuation">::</span></span><span class="token class-name">Future</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">reth_exex<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">ExExContext</span><span class="token punctuation">,</span> <span class="token class-name">ExExEvent</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">reth_node_api<span class="token punctuation">::</span></span><span class="token class-name">FullNodeComponents</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">reth_node_ethereum<span class="token punctuation">::</span></span><span class="token class-name">EthereumNode</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">reth_primitives<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">Log</span><span class="token punctuation">,</span> <span class="token class-name">SealedBlockWithSenders</span><span class="token punctuation">,</span> <span class="token class-name">TransactionSigned</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">reth_provider<span class="token punctuation">::</span></span><span class="token class-name">Chain</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">reth_tracing<span class="token punctuation">::</span>tracing<span class="token punctuation">::</span></span>info<span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">rusqlite<span class="token punctuation">::</span></span><span class="token class-name">Connection</span><span class="token punctuation">;</span>

<span class="token macro property">sol!</span><span class="token punctuation">(</span><span class="token class-name">L1StandardBridge</span><span class="token punctuation">,</span> <span class="token string">"l1_standard_bridge_abi.json"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token keyword">crate</span><span class="token punctuation">::</span><span class="token class-name">L1StandardBridge</span><span class="token punctuation">::</span><span class="token punctuation">{</span><span class="token class-name">ETHBridgeFinalized</span><span class="token punctuation">,</span> <span class="token class-name">ETHBridgeInitiated</span><span class="token punctuation">,</span> <span class="token class-name">L1StandardBridgeEvents</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">fn</span> <span class="token function-definition function">create_tables</span><span class="token punctuation">(</span>connection<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">mut</span> <span class="token class-name">Connection</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token namespace">rusqlite<span class="token punctuation">::</span></span><span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span> <span class="token punctuation">{</span>
    connection<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>
        <span class="token string">r#"
            CREATE TABLE IF NOT EXISTS deposits (
                id               INTEGER PRIMARY KEY,
                block_number     INTEGER NOT NULL,
                tx_hash          TEXT NOT NULL UNIQUE,
                contract_address TEXT NOT NULL,
                "from"           TEXT NOT NULL,
                "to"             TEXT NOT NULL,
                amount           TEXT NOT NULL
            );
            "#</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
    <span class="token comment">// .. rest of db initialization</span>

    <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">/// An example of ExEx that listens to ETH bridging events from OP Stack chains</span>
<span class="token comment">/// and stores deposits and withdrawals in a SQLite database.</span>
<span class="token keyword">async</span> <span class="token keyword">fn</span> <span class="token function-definition function">op_bridge_exex</span><span class="token operator">&lt;</span><span class="token class-name">Node</span><span class="token punctuation">:</span> <span class="token class-name">FullNodeComponents</span><span class="token operator">></span><span class="token punctuation">(</span>
    <span class="token keyword">mut</span> ctx<span class="token punctuation">:</span> <span class="token class-name">ExExContext</span><span class="token operator">&lt;</span><span class="token class-name">Node</span><span class="token operator">></span><span class="token punctuation">,</span>
    connection<span class="token punctuation">:</span> <span class="token class-name">Connection</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token namespace">eyre<span class="token punctuation">::</span></span><span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token comment">// Process all new chain state notifications</span>
    <span class="token keyword">while</span> <span class="token keyword">let</span> <span class="token class-name">Some</span><span class="token punctuation">(</span>notification<span class="token punctuation">)</span> <span class="token operator">=</span> ctx<span class="token punctuation">.</span>notifications<span class="token punctuation">.</span><span class="token function">recv</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span> <span class="token punctuation">{</span>
        <span class="token comment">// Revert all deposits and withdrawals</span>
        <span class="token keyword">if</span> <span class="token keyword">let</span> <span class="token class-name">Some</span><span class="token punctuation">(</span>reverted_chain<span class="token punctuation">)</span> <span class="token operator">=</span> notification<span class="token punctuation">.</span><span class="token function">reverted_chain</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// ..</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// Insert all new deposits and withdrawals</span>
        <span class="token keyword">if</span> <span class="token keyword">let</span> <span class="token class-name">Some</span><span class="token punctuation">(</span>committed_chain<span class="token punctuation">)</span> <span class="token operator">=</span> notification<span class="token punctuation">.</span><span class="token function">committed_chain</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// ..</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">/// Decode chain of blocks into a flattened list of receipt logs, and filter only</span>
<span class="token comment">/// [L1StandardBridgeEvents].</span>
<span class="token keyword">fn</span> <span class="token function-definition function">decode_chain_into_events</span><span class="token punctuation">(</span>
    chain<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token class-name">Chain</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token keyword">impl</span> <span class="token class-name">Iterator</span><span class="token operator">&lt;</span><span class="token class-name">Item</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token class-name">SealedBlockWithSenders</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span><span class="token class-name">TransactionSigned</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span><span class="token class-name">Log</span><span class="token punctuation">,</span> <span class="token class-name">L1StandardBridgeEvents</span><span class="token punctuation">)</span><span class="token operator">></span>
<span class="token punctuation">{</span>
    chain
        <span class="token comment">// Get all blocks and receipts</span>
        <span class="token punctuation">.</span><span class="token function">blocks_and_receipts</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">// .. proceed with decoding them</span>
<span class="token punctuation">}</span>

<span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token namespace">eyre<span class="token punctuation">::</span></span><span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token namespace">reth<span class="token punctuation">::</span>cli<span class="token punctuation">::</span></span><span class="token class-name">Cli</span><span class="token punctuation">::</span><span class="token function">parse_args</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>builder<span class="token punctuation">,</span> _<span class="token closure-punctuation punctuation">|</span></span> <span class="token keyword">async</span> <span class="token keyword">move</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> handle <span class="token operator">=</span> builder
            <span class="token punctuation">.</span><span class="token function">node</span><span class="token punctuation">(</span><span class="token class-name">EthereumNode</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">install_exex</span><span class="token punctuation">(</span><span class="token string">"OPBridge"</span><span class="token punctuation">,</span> <span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>ctx<span class="token closure-punctuation punctuation">|</span></span> <span class="token keyword">async</span> <span class="token keyword">move</span> <span class="token punctuation">{</span>
                <span class="token keyword">let</span> connection <span class="token operator">=</span> <span class="token class-name">Connection</span><span class="token punctuation">::</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"op_bridge.db"</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
              	<span class="token function">create_tables</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">mut</span> connection<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
                <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token function">op_bridge_exex</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> connection<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">launch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token keyword">await</span><span class="token operator">?</span><span class="token punctuation">;</span>

        handle<span class="token punctuation">.</span><span class="token function">wait_for_node_exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</pre></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><h2 id="da38b29f544c">Building a Rollup using ExEx</h2><p>Let&#x27;s do something more interesting now, and build a minimal Rollup as an ExEx, with an EVM runtime and SQLite as the backend!</p><p>If you <a class="" href="https://prestwich.substack.com/p/the-definitive-guide-to-sequencing">zoom out</a>, even Rollups are ETL-ish pipelines:</p><ol><li>Extract the data posted on L1 and convert to an L2 payload (e.g. OP Stack derivation function).</li><li>Run the state transition function (e.g. EVM).</li><li>Write the updated state to a persistent storage.</li></ol><p>In this example, we demonstrate a simplified rollup that derives its state from RLP encoded EVM transactions posted to <a class="" href="https://github.com/init4tech/zenith/blob/main/src/Zenith.sol">Zenith</a> (a <a class="" href="https://holesky.etherscan.io/address/0x74ae65DF20cB0e3BF8c022051d0Cdd79cc60890C#code">Holesky</a> smart contract for posting our rollup&#x27;s block commitments) driven by a <a class="" href="https://github.com/init4tech/zenith-rs">simple block builder</a>, both built by the <a class="" href="https://www.paradigm.xyz/2024/05/twitter.com/init4tech">init4</a> team.</p><p>The example specifically:</p><ol><li>Configures an EVM &amp; instantiates an SQLite database and implements the required <code>revm</code> Database traits to use SQLite as an EVM backend.</li><li>Filters transactions sent to the deployed rollup contract, ABI decodes the calldata, then RLP decodes that into a Rollup block which gets executed by the configured EVM.</li><li>Inserts the results of the EVM execution to SQLite.</li></ol><p>Again, super simple. It also works with <a class="" href="https://github.com/paradigmxyz/reth/blob/main/examples/exex/rollup/src/execution.rs#L135-L152">blobs</a>!</p><p><strong>ExEx Rollups are extremely powerful because we can now run any number of rollups on Reth without additional infrastructure, by installing them as ExExes</strong>.</p><p>We are working on extending the example with blobs, and providing a built-in sequencer, for a more complete end to end demo. Reach out if this is something you&#x27;d like to build, as we think this has potential for introducing L2 PBS, decentralized / shared sequencers or even SGX-based sequencers and more.</p><p><a class="" href="https://github.com/paradigmxyz/reth/blob/main/examples/exex/rollup/src/main.rs">Example</a> snippets below.</p><p></p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="relative col-span-12 md:col-start-2 md:col-span-9 xl:col-span-5 xl:col-start-4 flex flex-col gap-1 max-w-[880px]"><div class="rich-text-code"><pre class="overflow-x-auto scroll-touch language-rust"><span class="token keyword">use</span> <span class="token namespace">alloy_rlp<span class="token punctuation">::</span></span><span class="token class-name">Decodable</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">alloy_sol_types<span class="token punctuation">::</span></span><span class="token punctuation">{</span>sol<span class="token punctuation">,</span> <span class="token class-name">SolEventInterface</span><span class="token punctuation">,</span> <span class="token class-name">SolInterface</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">db<span class="token punctuation">::</span></span><span class="token class-name">Database</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">eyre<span class="token punctuation">::</span></span><span class="token class-name">OptionExt</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">once_cell<span class="token punctuation">::</span>sync<span class="token punctuation">::</span></span><span class="token class-name">Lazy</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">reth_exex<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">ExExContext</span><span class="token punctuation">,</span> <span class="token class-name">ExExEvent</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">reth_interfaces<span class="token punctuation">::</span>executor<span class="token punctuation">::</span></span><span class="token class-name">BlockValidationError</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">reth_node_api<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">ConfigureEvm</span><span class="token punctuation">,</span> <span class="token class-name">ConfigureEvmEnv</span><span class="token punctuation">,</span> <span class="token class-name">FullNodeComponents</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">reth_node_ethereum<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">EthEvmConfig</span><span class="token punctuation">,</span> <span class="token class-name">EthereumNode</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">reth_primitives<span class="token punctuation">::</span></span><span class="token punctuation">{</span>
    address<span class="token punctuation">,</span> constants<span class="token punctuation">,</span>
    <span class="token namespace">revm<span class="token punctuation">::</span>env<span class="token punctuation">::</span></span>fill_tx_env<span class="token punctuation">,</span>
    <span class="token namespace">revm_primitives<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token class-name">CfgEnvWithHandlerCfg</span><span class="token punctuation">,</span> <span class="token class-name">EVMError</span><span class="token punctuation">,</span> <span class="token class-name">ExecutionResult</span><span class="token punctuation">,</span> <span class="token class-name">ResultAndState</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token class-name">Address</span><span class="token punctuation">,</span> <span class="token class-name">Block</span><span class="token punctuation">,</span> <span class="token class-name">BlockWithSenders</span><span class="token punctuation">,</span> <span class="token class-name">Bytes</span><span class="token punctuation">,</span> <span class="token class-name">ChainSpec</span><span class="token punctuation">,</span> <span class="token class-name">ChainSpecBuilder</span><span class="token punctuation">,</span> <span class="token class-name">Genesis</span><span class="token punctuation">,</span> <span class="token class-name">Hardfork</span><span class="token punctuation">,</span>
    <span class="token class-name">Header</span><span class="token punctuation">,</span> <span class="token class-name">Receipt</span><span class="token punctuation">,</span> <span class="token class-name">SealedBlockWithSenders</span><span class="token punctuation">,</span> <span class="token class-name">TransactionSigned</span><span class="token punctuation">,</span> <span class="token constant">U256</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">reth_provider<span class="token punctuation">::</span></span><span class="token class-name">Chain</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">reth_revm<span class="token punctuation">::</span></span><span class="token punctuation">{</span>
    <span class="token namespace">db<span class="token punctuation">::</span></span><span class="token punctuation">{</span><span class="token namespace">states<span class="token punctuation">::</span>bundle_state<span class="token punctuation">::</span></span><span class="token class-name">BundleRetention</span><span class="token punctuation">,</span> <span class="token class-name">BundleState</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token class-name">DatabaseCommit</span><span class="token punctuation">,</span> <span class="token class-name">StateBuilder</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">reth_tracing<span class="token punctuation">::</span>tracing<span class="token punctuation">::</span></span><span class="token punctuation">{</span>debug<span class="token punctuation">,</span> error<span class="token punctuation">,</span> info<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">rusqlite<span class="token punctuation">::</span></span><span class="token class-name">Connection</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token namespace">std<span class="token punctuation">::</span>sync<span class="token punctuation">::</span></span><span class="token class-name">Arc</span><span class="token punctuation">;</span>

<span class="token keyword">mod</span> <span class="token module-declaration namespace">db</span><span class="token punctuation">;</span>

<span class="token macro property">sol!</span><span class="token punctuation">(</span><span class="token class-name">RollupContract</span><span class="token punctuation">,</span> <span class="token string">"rollup_abi.json"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token class-name">RollupContrac</span><span class="token punctuation">:</span><span class="token punctuation">{</span><span class="token class-name">RollupContractCalls</span><span class="token punctuation">,</span> <span class="token class-name">RollupContractEvents</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">DATABASE_PATH</span><span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span> <span class="token operator">=</span> <span class="token string">"rollup.db"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">ROLLUP_CONTRACT_ADDRESS</span><span class="token punctuation">:</span> <span class="token class-name">Address</span> <span class="token operator">=</span> <span class="token macro property">address!</span><span class="token punctuation">(</span><span class="token string">"74ae65DF20cB0e3BF8c022051d0Cdd79cc60890C"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">ROLLUP_SUBMITTER_ADDRESS</span><span class="token punctuation">:</span> <span class="token class-name">Address</span> <span class="token operator">=</span> <span class="token macro property">address!</span><span class="token punctuation">(</span><span class="token string">"B01042Db06b04d3677564222010DF5Bd09C5A947"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">CHAIN_ID</span><span class="token punctuation">:</span> <span class="token keyword">u64</span> <span class="token operator">=</span> <span class="token number">17001</span><span class="token punctuation">;</span>
<span class="token keyword">static</span> <span class="token constant">CHAIN_SPEC</span><span class="token punctuation">:</span> <span class="token class-name">Lazy</span><span class="token operator">&lt;</span><span class="token class-name">Arc</span><span class="token operator">&lt;</span><span class="token class-name">ChainSpec</span><span class="token operator">>></span> <span class="token operator">=</span> <span class="token class-name">Lazy</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span><span class="token closure-punctuation punctuation">|</span></span> <span class="token punctuation">{</span>
    <span class="token class-name">Arc</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span>
        <span class="token class-name">ChainSpecBuilder</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">chain</span><span class="token punctuation">(</span><span class="token constant">CHAIN_ID</span><span class="token punctuation">.</span><span class="token function">into</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">genesis</span><span class="token punctuation">(</span><span class="token class-name">Genesis</span><span class="token punctuation">::</span><span class="token function">clique_genesis</span><span class="token punctuation">(</span><span class="token constant">CHAIN_ID</span><span class="token punctuation">,</span> <span class="token constant">ROLLUP_SUBMITTER_ADDRESS</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">shanghai_activated</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">struct</span> <span class="token type-definition class-name">Rollup</span><span class="token operator">&lt;</span><span class="token class-name">Node</span><span class="token punctuation">:</span> <span class="token class-name">FullNodeComponents</span><span class="token operator">></span> <span class="token punctuation">{</span>
    ctx<span class="token punctuation">:</span> <span class="token class-name">ExExContext</span><span class="token operator">&lt;</span><span class="token class-name">Node</span><span class="token operator">></span><span class="token punctuation">,</span>
    db<span class="token punctuation">:</span> <span class="token class-name">Database</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">impl</span><span class="token operator">&lt;</span><span class="token class-name">Node</span><span class="token punctuation">:</span> <span class="token class-name">FullNodeComponents</span><span class="token operator">></span> <span class="token class-name">Rollup</span><span class="token operator">&lt;</span><span class="token class-name">Node</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token keyword">fn</span> <span class="token function-definition function">new</span><span class="token punctuation">(</span>ctx<span class="token punctuation">:</span> <span class="token class-name">ExExContext</span><span class="token operator">&lt;</span><span class="token class-name">Node</span><span class="token operator">></span><span class="token punctuation">,</span> connection<span class="token punctuation">:</span> <span class="token class-name">Connection</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token namespace">eyre<span class="token punctuation">::</span></span><span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token keyword">Self</span><span class="token operator">></span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> db <span class="token operator">=</span> <span class="token class-name">Database</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span>connection<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
        <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token keyword">Self</span> <span class="token punctuation">{</span> ctx<span class="token punctuation">,</span> db <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">async</span> <span class="token keyword">fn</span> <span class="token function-definition function">start</span><span class="token punctuation">(</span><span class="token keyword">mut</span> <span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token namespace">eyre<span class="token punctuation">::</span></span><span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span> <span class="token punctuation">{</span>
        <span class="token comment">// Process all new chain state notifications</span>
        <span class="token keyword">while</span> <span class="token keyword">let</span> <span class="token class-name">Some</span><span class="token punctuation">(</span>notification<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">self</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>notifications<span class="token punctuation">.</span><span class="token function">recv</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token keyword">let</span> <span class="token class-name">Some</span><span class="token punctuation">(</span>reverted_chain<span class="token punctuation">)</span> <span class="token operator">=</span> notification<span class="token punctuation">.</span><span class="token function">reverted_chain</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">self</span><span class="token punctuation">.</span><span class="token function">revert</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>reverted_chain<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span> <span class="token keyword">let</span> <span class="token class-name">Some</span><span class="token punctuation">(</span>committed_chain<span class="token punctuation">)</span> <span class="token operator">=</span> notification<span class="token punctuation">.</span><span class="token function">committed_chain</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">self</span><span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>committed_chain<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
                <span class="token keyword">self</span><span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>events<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token class-name">ExExEvent</span><span class="token punctuation">::</span><span class="token class-name">FinishedHeight</span><span class="token punctuation">(</span>committed_chain<span class="token punctuation">.</span><span class="token function">tip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>number<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/// Process a new chain commit.</span>
    <span class="token comment">///</span>
    <span class="token comment">/// This function decodes all transactions to the rollup contract into events, executes the</span>
    <span class="token comment">/// corresponding actions and inserts the results into the database.</span>
    <span class="token keyword">fn</span> <span class="token function-definition function">commit</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">mut</span> <span class="token keyword">self</span><span class="token punctuation">,</span> chain<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token class-name">Chain</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token namespace">eyre<span class="token punctuation">::</span></span><span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> events <span class="token operator">=</span> <span class="token function">decode_chain_into_rollup_events</span><span class="token punctuation">(</span>chain<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span>_<span class="token punctuation">,</span> tx<span class="token punctuation">,</span> event<span class="token punctuation">)</span> <span class="token keyword">in</span> events <span class="token punctuation">{</span>
            <span class="token keyword">match</span> event <span class="token punctuation">{</span>
                <span class="token comment">// A new block is submitted to the rollup contract.</span>
                <span class="token comment">// The block is executed on top of existing rollup state and committed into the</span>
                <span class="token comment">// database.</span>
                <span class="token class-name">RollupContractEvents</span><span class="token punctuation">::</span><span class="token class-name">BlockSubmitted</span><span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
                    <span class="token comment">// ..</span>
                <span class="token punctuation">}</span>
                <span class="token comment">// A deposit of ETH to the rollup contract. The deposit is added to the recipient's</span>
                <span class="token comment">// balance and committed into the database.</span>
                <span class="token class-name">RollupContractEvents</span><span class="token punctuation">::</span><span class="token class-name">Enter</span><span class="token punctuation">(</span><span class="token class-name">RollupContract</span><span class="token punctuation">::</span><span class="token class-name">Enter</span> <span class="token punctuation">{</span>
                    token<span class="token punctuation">,</span>
                    rollupRecipient<span class="token punctuation">,</span>
                    amount<span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
                    <span class="token comment">// ..</span>
                _ <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/// Process a chain revert.</span>
    <span class="token comment">///</span>
    <span class="token comment">/// This function decodes all transactions to the rollup contract into events, reverts the</span>
    <span class="token comment">/// corresponding actions and updates the database.</span>
    <span class="token keyword">fn</span> <span class="token function-definition function">revert</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">mut</span> <span class="token keyword">self</span><span class="token punctuation">,</span> chain<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token class-name">Chain</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token namespace">eyre<span class="token punctuation">::</span></span><span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> <span class="token keyword">mut</span> events <span class="token operator">=</span> <span class="token function">decode_chain_into_rollup_events</span><span class="token punctuation">(</span>chain<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// Reverse the order of events to start reverting from the tip</span>
        events<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span>_<span class="token punctuation">,</span> tx<span class="token punctuation">,</span> event<span class="token punctuation">)</span> <span class="token keyword">in</span> events <span class="token punctuation">{</span>
            <span class="token keyword">match</span> event <span class="token punctuation">{</span>
                <span class="token comment">// The block is reverted from the database.</span>
                <span class="token class-name">RollupContractEvents</span><span class="token punctuation">::</span><span class="token class-name">BlockSubmitted</span><span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
                    <span class="token comment">// ..</span>
                <span class="token punctuation">}</span>
                <span class="token comment">// The deposit is subtracted from the recipient's balance.</span>
                <span class="token class-name">RollupContractEvents</span><span class="token punctuation">::</span><span class="token class-name">Enter</span><span class="token punctuation">(</span><span class="token class-name">RollupContract</span><span class="token punctuation">::</span><span class="token class-name">Enter</span> <span class="token punctuation">{</span>
                    token<span class="token punctuation">,</span>
                    rollupRecipient<span class="token punctuation">,</span>
                    amount<span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
                    <span class="token comment">// ..</span>
                <span class="token punctuation">}</span>
                _ <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">fn</span> <span class="token function-definition function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token namespace">eyre<span class="token punctuation">::</span></span><span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span> <span class="token punctuation">{</span>
    <span class="token namespace">reth<span class="token punctuation">::</span>cli<span class="token punctuation">::</span></span><span class="token class-name">Cli</span><span class="token punctuation">::</span><span class="token function">parse_args</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>builder<span class="token punctuation">,</span> _<span class="token closure-punctuation punctuation">|</span></span> <span class="token keyword">async</span> <span class="token keyword">move</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> handle <span class="token operator">=</span> builder
            <span class="token punctuation">.</span><span class="token function">node</span><span class="token punctuation">(</span><span class="token class-name">EthereumNode</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">install_exex</span><span class="token punctuation">(</span><span class="token string">"Rollup"</span><span class="token punctuation">,</span> <span class="token keyword">move</span> <span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>ctx<span class="token closure-punctuation punctuation">|</span></span> <span class="token keyword">async</span> <span class="token punctuation">{</span>
                <span class="token keyword">let</span> connection <span class="token operator">=</span> <span class="token class-name">Connection</span><span class="token punctuation">::</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token constant">DATABASE_PATH</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span>
                <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token class-name">Rollup</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> connection<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">launch</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token keyword">await</span><span class="token operator">?</span><span class="token punctuation">;</span>

        handle<span class="token punctuation">.</span><span class="token function">wait_for_node_exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">await</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></pre></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><h1 id="36f444fafc2d">What can I build with Execution Extensions?</h1><p>This question can be reframed as “What can be modeled as a post-execution hook?”. Turns out a lot of things!</p><p>We see a few valuable ExExes that should be built:</p><ol><li>Rollup derivation pipelines such as <a class="" href="https://github.com/ethereum-optimism/kona/tree/main/crates/derive">Kona</a>, with EVMs configured for L2 usage, similar to how <a class="" href="https://github.com/paradigmxyz/alphanet/blob/main/crates/node/src/evm.rs">Reth Alphanet’s EVM</a> is set up. We also predict that composing L2 ExExes will provide the fastest path towards Stage 2 Rollup decentralization. Expect more from us here. We cannot wait to run OP Mainnet, Base, Zora, and other rollups on Reth as ExExes.</li><li>Out of process ExExes tightly integrated with the node’s services using gRPC, paving the way for multi-tenancy and Reth acting as a control plane for off-chain services.</li><li>Alternative VM integrations (e.g. MoveVM or Arbitrum Stylus), or complex execution pipelines similar to <a class="" href="https://github.com/paradigmxyz/artemis">Artemis</a>, <a class="" href="https://github.com/gakonst/sgx-revm">SGX Revm</a> or <a class="" href="https://shadow.xyz/">Shadow Logs</a>.</li><li>Foundational infrastructure combined with re-staking such as oracles &amp; bridges, or any other Actively Validated Services (AVS). This is possible because ExExes can peer with each other over Ethereum’s DiscV5 P2P network and have an elected set of participants with write permission to their state other than the node’s &#x27;finalized&#x27; notifications.</li><li>Next-generation auxiliary infrastructure such as AI coprocessors, or decentralized/shared sequencers.</li></ol></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div><div class="my-2 md:my-4"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-8 xl:col-start-4 flex flex-row gap-10 max-w-[1250px]"><div class="rich-text line-break rich-text-post text-serif-16 md:text-serif-18 leading-28"><div><h1 id="14c0de1c99ef">What’s next for Execution Extensions?</h1><p>Currently, ExExes need to be installed on the node with a custom build in your main function. We aspire to make ExExes <a class="" href="https://nullderef.com/series/rust-plugins/">dynamically loaded as plugins</a>, and expose a Docker Hub-esque <code>reth pull</code> API, such that developers can distribute their ExExes over the air to node operators easily.</p><p>We want to make Reth a platform that provides stability &amp; performance on core node operations, while also being a launchpad for innovation.</p><p>The Reth project is hopefully going to change how people think about building high performance off-chain infra, and ExExes are just the beginning. We are excited to continue building infrastructure on Reth, and invest in it.</p><p>Reach out to <a class="" href="mailto:georgios@paradigm.xyz">georgios@paradigm.xyz</a> if you want to build an ExEx project, or <a class="" href="https://github.com/paradigmxyz/reth/labels/A-exex">contribute</a> directly on Github.</p></div></div><div class="relative hidden xl:block row-start-1 max-w-[250px] pl-1" style="opacity:1"><div class="flex flex-col gap-3 min-w-[250px]"></div></div></div></div></div></div></div><footer class="px-container-mobile md:px-container-desktop py-7 md:py-8 md:pb-7"><div class="grid grid-cols-12"><div class="col-span-12 md:col-start-2 md:col-span-9 xl:col-span-5 xl:col-start-4 flex flex-row gap-10 max-w-[900px]"><div class="flex flex-col gap-6 max-w-[900px]"><div class="flex flex-col gap-2"><h3 class="font-mono text-mono-12 font-medium">Written by</h3><div class="flex flex-col gap-2"><div class="md:p-2 md:border md:border-solid md:border-gray-border"><div class="grid md:grid-cols-5 gap-2"><div class="md:col-span-2"><a class="block w-full" href="../../team/georgios-konstantopoulos.html"><div class="image overflow-hidden block w-full aspect-square"><picture><img class="scale-105 blur-lg" src="data:image/jpeg;base64,/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAUABQDASIAAhEBAxEB/8QAGQABAQADAQAAAAAAAAAAAAAAAAYDBAcF/8QAJhAAAQQCAAUEAwAAAAAAAAAAAQACAwQREgUGITFBFSIkcTJCYf/EABYBAQEBAAAAAAAAAAAAAAAAAAIEA//EABgRAAMBAQAAAAAAAAAAAAAAAAABAjER/9oADAMBAAIRAxEAPwDpNXh/xnlv56nX7UzyWwyWLdeaeWWZuTKJHZw7Pj+L1uZOOen0omQv1e/q4juGqdqXTXe2eCTXY7E+T9o0n1NF0T2WUVmjrMQOyLclsMeWuyPc0FEzE5rzTNI7iMuziQ1jcA9lgfI4VdQemERBPSucRU055DUhy79AiIksJnp//9k="/></picture></div></a></div><div class="md:col-span-3 font-mono text-mono-12"><div class="flex flex-col gap-2"><div class="flex flex-col gap-1 md:gap-2"><div class="flex flex-col gap-half"><p class="font-medium"><a class="link-underline-hover" href="../../team/georgios-konstantopoulos.html">Georgios Konstantopoulos</a></p><p>General Partner &amp; CTO</p></div><div class="flex gap-1 flex-wrap"><a _key="8daa2d181ba9" class="block button button-tag" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/gakonst/">LinkedIn</a><a _key="fe9b43fd46f8" class="block button button-tag" target="_blank" rel="noopener noreferrer" href="https://twitter.com/gakonst">Twitter</a><a _key="6d28763c445c" class="block button button-tag" target="_blank" rel="noopener noreferrer" href="https://warpcast.com/gakonst">Warpcast</a></div></div><div class="flex flex-col gap-1"><h4 class="md:hidden font-medium">Biography</h4><div class="lg:line-clamp-[10] rich-text-inline"><p>Georgios Konstantopoulos is the Chief Technology Officer and a General Partner focused on Paradigm’s portfolio companies and research into open-source protocols. Previously, Georgios was an independent consultant and researcher focused on cryptography, information security and mechanism design. He earned his M.Eng. in Electrical &amp; Computer Engineering from Aristotle University of Thessaloniki.</p> <a class="button button-tag-inline relative top-[2px]" href="../../team/georgios-konstantopoulos.html"><svg width="12" height="6" viewBox="0 0 12 6" class="mx-auto mt-[4px] rotate-180"><path d="M0 3L5 5.88675L5 0.113248L0 3ZM12 2.5L4.5 2.5L4.5 3.5L12 3.5L12 2.5Z" fill="currentColor"></path></svg></a></div></div></div></div></div></div></div></div><div class="rich-text line-break font-mono text-mono-12"><p>Disclaimer: This post is for general information purposes only. It does not constitute investment advice or a recommendation or solicitation to buy or sell any investment and should not be used in the evaluation of the merits of making any investment decision. It should not be relied upon for accounting, legal or tax advice or investment recommendations. This post reflects the current opinions of the authors and is not made on behalf of Paradigm or its affiliates and does not necessarily reflect the opinions of Paradigm, its affiliates or individuals associated with Paradigm. The opinions reflected herein are subject to change without being updated.</p></div></div></div></div></footer><div class="p-3 md:pt-6 bg-black text-white font-mono text-mono-12"><div class="flex flex-col gap-6"><div class="grid grid-cols-12 gap-y-6"><div class="col-span-12 md:col-span-3"><div class="flex"><svg width="94" height="108" viewBox="0 0 94 108" class="text-green block w-[53px] h-[60px] md:w-[94px] md:h-[108px]"><path d="M94 33.2314L36.1538 0L28.9231 4.15692V12.4628L21.6923 8.30585L14.4615 12.4628V20.7686L7.23077 16.6117L0 20.7686V87.2314L7.23077 91.3883L14.4615 87.2314V95.5372L21.6923 99.6942L28.9231 95.5372V103.843L36.1538 108L94 74.7686V66.4628L86.7692 62.3059L94 58.1489V49.8431L86.7692 45.6862L94 41.5292V33.2314ZM14.4615 78.9255L7.23077 83.0825V24.9255L14.4615 29.0825V78.9255ZM36.1538 83.0745V74.7686L65.0769 58.1569L72.3077 62.3138L36.1538 83.0745ZM57.8462 54L36.1538 66.4628V41.5372L57.8462 54ZM65.0769 49.8431L36.1538 33.2314V24.9255L72.3077 45.6942L65.0769 49.8431ZM21.6923 16.6117L28.9231 20.7686V29.0745L21.6923 24.9175V16.6117ZM21.6923 33.2314L28.9231 37.3883V70.6197L21.6923 74.7766V33.2314ZM21.6923 83.0745L28.9231 78.9175V87.2234L21.6923 91.3803V83.0745ZM86.7692 70.6117L36.1538 99.6862V91.3803L79.5385 66.4548L86.7692 70.6117ZM86.7692 54L79.5385 58.1569L72.3077 54L79.5385 49.8431L86.7692 54ZM79.5385 41.5372L36.1538 16.6117V8.30585L86.7692 37.3803L79.5385 41.5372Z" fill="currentColor"></path></svg></div></div><div class="col-span-12 md:col-span-6 flex flex-col gap-6"><div class="grid md:grid-cols-3 gap-y-1"><div><ul class="flex flex-col gap-1"><li><a _key="c617717bef10" class="link-underline-hover uppercase font-medium" href="../../about.html">About</a></li><li><a _key="445b500c20cd" class="link-underline-hover uppercase font-medium" href="../../team.html">Team</a></li><li><a _key="ae321ba66fad" class="link-underline-hover uppercase font-medium" href="../../portfolio.html">Portfolio</a></li></ul></div><div><ul class="flex flex-col gap-1"><li><a _key="6862d607fb16" class="link-underline-hover uppercase font-medium" href="../../writing.html">Writing</a></li><li><a _key="ce7b888d0e75" class="link-underline-hover uppercase font-medium" href="../../oss.html">Open Source</a></li><li><a _key="927788bfed4f" class="link-underline-hover uppercase font-medium" href="../../careers.html">Careers</a></li></ul></div><div><ul class="flex flex-col gap-1"><li><a _key="02f85bf11b4a" class="link-underline-hover uppercase font-medium" target="_blank" rel="noopener noreferrer" href="https://app.junipersquare.com/i/paradigm">LP Login</a></li></ul></div></div><div class="grid md:grid-cols-3 gap-y-1"><div><a _key="f325e52a9ec5" class="link-underline-hover" target="_blank" rel="noopener noreferrer" href="https://twitter.com/paradigm">Twitter</a></div><div><a _key="f231f3484f95" class="link-underline-hover" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/company/paradigm-xyz/">LinkedIn</a></div><div><a _key="1c198033e797" class="link-underline-hover" target="_blank" rel="noopener noreferrer" href="https://warpcast.com/paradigm">Warpcast</a></div><div><a _key="d8394a8a29cb" class="link-underline-hover" href="../../contact.html">Contact</a></div></div></div></div><div class="grid grid-cols-12 items-end gap-y-6"><div class="col-span-12 md:col-span-3"><ul class="flex flex-col gap-1"><li><a _key="d6e347271e47" class="link-underline-hover" href="../../website-terms-of-use.html">Terms</a></li><li><a _key="29e55cad5ff7" class="link-underline-hover" href="../../important-disclosures.html">Disclosures</a></li><li><a _key="02e810af4cf8" class="link-underline-hover" href="../../privacy-policy.html">Privacy</a></li><li><a _key="520d04d2ff65" class="link-underline-hover" href="../../privacy-policy.html#83a48e65d92d">CA Privacy</a></li></ul></div><div class="col-span-12 md:col-span-6"><p>Copyright © 2025 Paradigm Operations LP All rights reserved. “Paradigm” is a trademark, and the triangular mobius symbol is a registered trademark of Paradigm Operations LP</p></div><div class="col-span-12 md:col-span-3"><div class="flex justify-between md:justify-end"><div class="tag block md:hidden"></div><div class="tag"></div></div></div></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"layout":{"header":{"desktopLinks":[{"_key":"426608038e76","openInNewWindow":null,"title":null,"pageName":"About","slug":"about","_type":"pageLink","page":{"_ref":"8a0be9a1-8ab7-4a76-9d11-5b0d2636b14e","_type":"reference"}},{"_type":"link","_key":"ff5f78089e91","title":"Team","url":"/team","openInNewWindow":null},{"pageName":"Portfolio","slug":"portfolio","openInNewWindow":null,"title":null,"page":{"_ref":"5413381f-bafa-4f3e-bba8-91d912b8db45","_type":"reference"},"_key":"38b3cd4525de","_type":"pageLink"},{"_key":"22b86a453ca1","openInNewWindow":null,"title":"Writing","url":"/writing","_type":"link"},{"page":{"_type":"reference","_ref":"cd2cf7f4-c943-4bfe-928b-ee045fba8a9f"},"_key":"cd5b2c9fbd5f","slug":"oss","openInNewWindow":null,"title":null,"pageName":"Open Source","_type":"pageLink"},{"_type":"link","openInNewWindow":null,"_key":"05b4198b2e14","title":"Careers","url":"/careers"}],"mobileLinks":[{"title":null,"pageName":"About","slug":"about","_type":"pageLink","page":{"_ref":"8a0be9a1-8ab7-4a76-9d11-5b0d2636b14e","_type":"reference"},"_key":"ad3cf4299bd8","openInNewWindow":null},{"_type":"link","_key":"cdc21cfec068","title":"Team","url":"/team","openInNewWindow":null},{"openInNewWindow":null,"title":null,"pageName":"Portfolio","slug":"portfolio","_type":"pageLink","page":{"_ref":"5413381f-bafa-4f3e-bba8-91d912b8db45","_type":"reference"},"_key":"56f654c719a3"},{"_key":"f8ada95cbc04","title":"Writing","url":"/writing","openInNewWindow":null,"_type":"link"},{"_type":"pageLink","openInNewWindow":null,"title":null,"pageName":"Open Source","slug":"oss","page":{"_type":"reference","_ref":"cd2cf7f4-c943-4bfe-928b-ee045fba8a9f"},"_key":"8e6834f3c151"},{"_type":"link","_key":"027927bd5b1f","title":"Careers","url":"/careers","openInNewWindow":null}],"mobileSmallLinks":[{"openInNewWindow":true,"_type":"link","_key":"8fb4f75b65fa","title":"LP Login","url":"https://app.junipersquare.com/i/paradigm"}],"socialLinks":[{"title":"Twitter","url":"https://twitter.com/paradigm","openInNewWindow":true,"_type":"link","_key":"389a7a5bd2b7"},{"url":"https://www.linkedin.com/company/paradigm-xyz/","openInNewWindow":true,"_type":"link","_key":"309ee4c0c92b","title":"LinkedIn"},{"_type":"link","_key":"caa5dd28bb8e","title":"Warpcast","url":"https://warpcast.com/paradigm","openInNewWindow":true},{"page":{"_ref":"57df6e24-c479-4932-861a-f7b349880f5f","_type":"reference"},"_key":"c747bb27efab","openInNewWindow":null,"title":null,"pageName":"Contact","slug":"contact","_type":"pageLink"}],"legalLinks":[{"pageName":"Website Terms of Use","slug":"website-terms-of-use","openInNewWindow":null,"_type":"pageLink","page":{"_ref":"d33b5b91-90eb-4b9f-9eba-d894012bcc53","_type":"reference"},"_key":"798f6ddf0d55","title":"Terms"},{"_type":"pageLink","page":{"_ref":"c7027d0e-71a0-4bc4-b4ad-61cd2c3685a7","_type":"reference"},"_key":"a5c485dc29ed","title":"Disclosures","slug":"important-disclosures","openInNewWindow":null,"pageName":"Important Disclosures"},{"pageName":"Privacy Policy","slug":"privacy-policy","title":"Privacy","_type":"pageLink","page":{"_ref":"081c96bd-e746-495c-998f-dc5e1421b55e","_type":"reference"},"_key":"d66378d18c1a","openInNewWindow":null},{"url":"/privacy-policy#83a48e65d92d","openInNewWindow":false,"_type":"link","_key":"e8f366883ed3","title":"CA Privacy"}]},"footer":{"linkColumns":[{"_key":"520a97f1c3b3","links":[{"_type":"pageLink","openInNewWindow":null,"title":null,"pageName":"About","slug":"about","page":{"_ref":"8a0be9a1-8ab7-4a76-9d11-5b0d2636b14e","_type":"reference"},"_key":"c617717bef10"},{"pageName":"Team","_type":"pageLink","page":{"_ref":"c0cc1f2f-202f-4d37-b5bb-dc9edb7edf62","_type":"reference"},"_key":"445b500c20cd","slug":"team","openInNewWindow":null,"title":null},{"pageName":"Portfolio","_type":"pageLink","page":{"_ref":"5413381f-bafa-4f3e-bba8-91d912b8db45","_type":"reference"},"_key":"ae321ba66fad","slug":"portfolio","openInNewWindow":null,"title":null}]},{"_key":"0d51d5f77b26","links":[{"_type":"pageLink","page":{"_ref":"c4ba5025-72c6-4c4d-a5a1-c46dfcce2cea","_type":"reference"},"_key":"6862d607fb16","pageName":"Writing","slug":"writing","openInNewWindow":null,"title":null},{"_type":"pageLink","page":{"_ref":"cd2cf7f4-c943-4bfe-928b-ee045fba8a9f","_type":"reference"},"_key":"ce7b888d0e75","title":null,"pageName":"Open Source","slug":"oss","openInNewWindow":null},{"_type":"link","_key":"927788bfed4f","title":"Careers","url":"/careers","openInNewWindow":null}]},{"_key":"efc2b524a0f6","links":[{"_type":"link","_key":"02f85bf11b4a","title":"LP Login","url":"https://app.junipersquare.com/i/paradigm","openInNewWindow":true}]}],"socialLinks":[{"_type":"link","_key":"f325e52a9ec5","title":"Twitter","url":"https://twitter.com/paradigm","openInNewWindow":true},{"_type":"link","_key":"f231f3484f95","title":"LinkedIn","url":"https://www.linkedin.com/company/paradigm-xyz/","openInNewWindow":true},{"url":"https://warpcast.com/paradigm","openInNewWindow":true,"_type":"link","_key":"1c198033e797","title":"Warpcast"},{"openInNewWindow":null,"title":null,"pageName":"Contact","slug":"contact","_type":"pageLink","page":{"_ref":"57df6e24-c479-4932-861a-f7b349880f5f","_type":"reference"},"_key":"d8394a8a29cb"}],"legalLinks":[{"page":{"_ref":"d33b5b91-90eb-4b9f-9eba-d894012bcc53","_type":"reference"},"_key":"d6e347271e47","title":"Terms","pageName":"Website Terms of Use","slug":"website-terms-of-use","openInNewWindow":null,"_type":"pageLink"},{"_key":"29e55cad5ff7","pageName":"Important Disclosures","slug":"important-disclosures","openInNewWindow":null,"title":"Disclosures","_type":"pageLink","page":{"_ref":"c7027d0e-71a0-4bc4-b4ad-61cd2c3685a7","_type":"reference"}},{"page":{"_ref":"081c96bd-e746-495c-998f-dc5e1421b55e","_type":"reference"},"_key":"02e810af4cf8","title":"Privacy","pageName":"Privacy Policy","slug":"privacy-policy","openInNewWindow":null,"_type":"pageLink"},{"openInNewWindow":false,"_type":"link","_key":"520d04d2ff65","title":"CA Privacy","url":"/privacy-policy#83a48e65d92d"}],"legalStatement":"Copyright © [YEAR] Paradigm Operations LP All rights reserved. “Paradigm” is a trademark, and the triangular mobius symbol is a registered trademark of Paradigm Operations LP"},"postDisclaimer":{"disclaimer":[{"_type":"block","style":"normal","_key":"45dda89c171b","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Disclaimer: This post is for general information purposes only. It does not constitute investment advice or a recommendation or solicitation to buy or sell any investment and should not be used in the evaluation of the merits of making any investment decision. It should not be relied upon for accounting, legal or tax advice or investment recommendations. This post reflects the current opinions of the authors and is not made on behalf of Paradigm or its affiliates and does not necessarily reflect the opinions of Paradigm, its affiliates or individuals associated with Paradigm. The opinions reflected herein are subject to change without being updated.","_key":"da9bfb35a7960"}],"asset":null}]},"careersIndex":{"indexTitle":"Opportunities","description":[{"_type":"block","style":"normal","_key":"6663134c09b3","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Browse through careers and opportunities in the Paradigm universe.","_key":"fdbf7aeff6590"}],"asset":null}]}},"config":{"seo":{"metaTitle":"Paradigm","metaDescription":"Paradigm is a research-driven crypto investment firm that funds companies and protocols from their earliest stages.","metaKeywords":null,"openGraphTitle":"Paradigm","openGraphDescription":"Paradigm is a research-driven crypto investment firm that funds companies and protocols from their earliest stages.","twitterTitle":"Paradigm","twitterDescription":"Paradigm is a research-driven crypto investment firm that funds companies and protocols from their earliest stages.","hideFromSitemap":null,"disallowRobots":null,"openGraphImage":{"dimensions":{"width":2400,"aspectRatio":1.9047619047619047,"height":1260,"_type":"sanity.imageDimensions"},"url":"https://cdn.sanity.io/images/dgybcd83/production/fd732ebeb1c4d286fd7e3b5b25395d72452edeb6-2400x1260.png","_type":"image","_key":null,"alt":null,"lqip":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABa0lEQVQokX1Su47CMBD0T9PQU/ML/MBVFCBRUlAgJIQUBQVOPAyBEMgLbOJc7DnZRyAEuI1W2qzXs7OzJqiY0p9Sf7FSb704E0IgCAJ4nmfcdV2QKuAd+HaxGkM9cmmawvd9bDYbrNdrzGYzkGrX8r9UErGMQX8o/NyHUOKpRgPu93vM53NMp1OMx+MHYBVUG1ccw3SI1rmFL/YFJ3MMaFGX5zmSJDEMNeBoNHqM/E4nza7N26gFNdTDOjq8g0QmT/VSSlyvVxyPRyyXSxDd5ZPwZ3lGj/fQiBpoxk0M0gGYZK+6AoatloBcLhcTFMDlTTPBYIUWul4Xfa8PGlOI7KYjXgloI3rdYRiCMWaegR6hKNI56lLY3zZsxwal1OTKeqMiF9lut2ZTu90Oh8MBnPP7YZZl0BNEYYTT6YQoiu4My0DlmKxWKywWC7Mlx3EMW82y2vm/11A2YlkWJpOJcdu2DZMy4Dv7lNeAv2hnUK/yFW33AAAAAElFTkSuQmCC"},"twitterImage":{"_key":null,"alt":null,"lqip":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABa0lEQVQokX1Su47CMBD0T9PQU/ML/MBVFCBRUlAgJIQUBQVOPAyBEMgLbOJc7DnZRyAEuI1W2qzXs7OzJqiY0p9Sf7FSb704E0IgCAJ4nmfcdV2QKuAd+HaxGkM9cmmawvd9bDYbrNdrzGYzkGrX8r9UErGMQX8o/NyHUOKpRgPu93vM53NMp1OMx+MHYBVUG1ccw3SI1rmFL/YFJ3MMaFGX5zmSJDEMNeBoNHqM/E4nza7N26gFNdTDOjq8g0QmT/VSSlyvVxyPRyyXSxDd5ZPwZ3lGj/fQiBpoxk0M0gGYZK+6AoatloBcLhcTFMDlTTPBYIUWul4Xfa8PGlOI7KYjXgloI3rdYRiCMWaegR6hKNI56lLY3zZsxwal1OTKeqMiF9lut2ZTu90Oh8MBnPP7YZZl0BNEYYTT6YQoiu4My0DlmKxWKywWC7Mlx3EMW82y2vm/11A2YlkWJpOJcdu2DZMy4Dv7lNeAv2hnUK/yFW33AAAAAElFTkSuQmCC","dimensions":{"_type":"sanity.imageDimensions","width":2400,"aspectRatio":1.9047619047619047,"height":1260},"url":"https://cdn.sanity.io/images/dgybcd83/production/fd732ebeb1c4d286fd7e3b5b25395d72452edeb6-2400x1260.png","_type":"image"}}},"passwordProtection":{"enablePassword":false,"password":"paradigm"},"tags":[{"_id":"493e238e-72b6-4c77-9dcf-35f015c39025","slug":"research","title":"Research"}],"featuredImageCaption":null,"seo":{"disallowRobots":null,"openGraphDescription":"Execution Extensions (ExExes) are post-execution hooks for building real-time, high performance and zero-operations off-chain infrastructure on top of Reth.","twitterTitle":null,"twitterDescription":null,"twitterImage":null,"hideFromSitemap":null,"metaTitle":null,"metaDescription":null,"metaKeywords":null,"openGraphTitle":"Reth Execution Extensions","openGraphImage":{"url":"https://cdn.sanity.io/images/dgybcd83/production/9dbe4f1022b67c7855f421498848f3f1a25f7031-2400x1350.png","_type":"image","_key":null,"alt":null,"lqip":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABqUlEQVQokV1TibKjIBD0/z/w3YcmKgEElEPUmPTWTEI2u1Z1wVBF090zVtfrFQX0nfczXHAQg4AaFWywD7jo/kVyGNPIez975C2jYhbgQZqXjF73+Dh8oFENTtMJwgmcxhNUUDDJwM4WZjbQUUOHG9zsENeIqhBdrhfs+440Jwgj8N1/o9ENxCjQu55JpZdM5BbHpIVQBcV1WAKqZVsQc0TIASknJtSjRi1rHPURyisMcXgoIYWkhlY6H+LwOItLRGUmg1/xy1BOYQwjOtXhtX5llWSZSAmkkKz3tueV6+kWCT3ms0clncRb/YaX+gWd7mBHi1a1eD++4+f0w5bpkpxul1vTopENr4WsNS0/yITUHWkl52a9hY+elZZLxWaxTXnR5RLBcLdNljnD/bLzqGznDeu2Is6RR+ar+8JBH5hA+3s3o8aQbpk95zrEATbdm/I8NtzlnNAPPT7bT9SqZsud6bjTlBmp4wie8qNM6VG/+L9jU0BKaVCFFZCjhIkGJhheSQVZK6C6YJonpDXdFD7/KTSPRJrXzJO/nBes55XxvP+/3vaNo/sDyWRF0NVEV7sAAAAASUVORK5CYII=","dimensions":{"_type":"sanity.imageDimensions","width":2400,"aspectRatio":1.7777777777777777,"height":1350}}},"_type":"post","slug":"reth-exex","publishDate":"2024-05-03","authors":[{"name":"Georgios Konstantopoulos","_type":"teamMember","_key":"6f5356ad19d4","portrait":{"lqip":"data:image/jpeg;base64,/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAUABQDASIAAhEBAxEB/8QAGQABAQADAQAAAAAAAAAAAAAAAAYDBAcF/8QAJhAAAQQCAAUEAwAAAAAAAAAAAQACAwQREgUGITFBFSIkcTJCYf/EABYBAQEBAAAAAAAAAAAAAAAAAAIEA//EABgRAAMBAQAAAAAAAAAAAAAAAAABAjER/9oADAMBAAIRAxEAPwDpNXh/xnlv56nX7UzyWwyWLdeaeWWZuTKJHZw7Pj+L1uZOOen0omQv1e/q4juGqdqXTXe2eCTXY7E+T9o0n1NF0T2WUVmjrMQOyLclsMeWuyPc0FEzE5rzTNI7iMuziQ1jcA9lgfI4VdQemERBPSucRU055DUhy79AiIksJnp//9k=","dimensions":{"_type":"sanity.imageDimensions","width":3736,"aspectRatio":1,"height":3736},"url":"https://cdn.sanity.io/images/dgybcd83/production/25f8bf8bd9d85ef762ff506bcd7baa0202207f9b-3736x3736.jpg","_type":"imageAlt","_key":null,"alt":null},"links":[{"title":"LinkedIn","url":"https://www.linkedin.com/in/gakonst/","openInNewWindow":true,"_type":"link","_key":"8daa2d181ba9"},{"_type":"link","_key":"fe9b43fd46f8","title":"Twitter","url":"https://twitter.com/gakonst","openInNewWindow":true},{"openInNewWindow":true,"_type":"link","_key":"6d28763c445c","title":"Warpcast","url":"https://warpcast.com/gakonst"}],"hideOnAll":null,"biography":[{"children":[{"_type":"span","marks":[],"text":"Georgios Konstantopoulos is the Chief Technology Officer and a General Partner focused on Paradigm’s portfolio companies and research into open-source protocols. Previously, Georgios was an independent consultant and researcher focused on cryptography, information security and mechanism design. He earned his M.Eng. in Electrical \u0026 Computer Engineering from Aristotle University of Thessaloniki.","_key":"c7ee18701ea90"}],"_type":"block","style":"normal","_key":"24b61c0f0974","markDefs":[],"asset":null}],"_id":"c523f829-1068-4f7e-b537-15dda7302b71","title":"General Partner \u0026 CTO","tags":[{"_id":"e7cc8e78-9951-4bd0-9359-2de52c2c71e0","slug":"leadership","title":"Leadership","subTags":null},{"_id":"5f451f5f-7e63-41bf-94e2-e9086936db67","slug":"investing-and-research","title":"Investing \u0026 Research","subTags":null},{"_id":"77b41f9f-1bf8-43a1-ae7a-cbed1de7e13c","slug":"sort-priority-6","title":"(Sort Priority) 6","subTags":null}],"slug":"georgios-konstantopoulos"}],"summary":"Execution Extensions (ExExes) are post-execution hooks for building real-time, high performance and zero-operations off-chain infrastructure on top of Reth.","featuredImage":{"_type":"imageAlt","_key":null,"alt":null,"lqip":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABqUlEQVQokV1TibKjIBD0/z/w3YcmKgEElEPUmPTWTEI2u1Z1wVBF090zVtfrFQX0nfczXHAQg4AaFWywD7jo/kVyGNPIez975C2jYhbgQZqXjF73+Dh8oFENTtMJwgmcxhNUUDDJwM4WZjbQUUOHG9zsENeIqhBdrhfs+440Jwgj8N1/o9ENxCjQu55JpZdM5BbHpIVQBcV1WAKqZVsQc0TIASknJtSjRi1rHPURyisMcXgoIYWkhlY6H+LwOItLRGUmg1/xy1BOYQwjOtXhtX5llWSZSAmkkKz3tueV6+kWCT3ms0clncRb/YaX+gWd7mBHi1a1eD++4+f0w5bpkpxul1vTopENr4WsNS0/yITUHWkl52a9hY+elZZLxWaxTXnR5RLBcLdNljnD/bLzqGznDeu2Is6RR+ar+8JBH5hA+3s3o8aQbpk95zrEATbdm/I8NtzlnNAPPT7bT9SqZsud6bjTlBmp4wie8qNM6VG/+L9jU0BKaVCFFZCjhIkGJhheSQVZK6C6YJonpDXdFD7/KTSPRJrXzJO/nBes55XxvP+/3vaNo/sDyWRF0NVEV7sAAAAASUVORK5CYII=","dimensions":{"_type":"sanity.imageDimensions","width":2400,"aspectRatio":1.7777777777777777,"height":1350},"url":"https://cdn.sanity.io/images/dgybcd83/production/9dbe4f1022b67c7855f421498848f3f1a25f7031-2400x1350.png"},"tableOfContents":true,"content":[{"_type":"richTextBlock","_key":"98ab7c73177c","content":[{"asset":null,"_key":"b275745b2d4c","markDefs":[{"_type":"link","href":"https://www.paradigm.xyz/2024/04/reth-perf","_key":"3f440fe00f7e"},{"_type":"link","href":"https://www.paradigm.xyz/2024/04/reth-alphanet","_key":"fdc2c110d0cb"}],"children":[{"_type":"span","marks":[],"text":"Reth is an all-in-one toolkit for building high performance and customizable nodes. We recently published our ","_key":"e0193c4a5c4a0"},{"_type":"span","marks":["3f440fe00f7e"],"text":"performance roadmap","_key":"e0193c4a5c4a1"},{"_type":"span","marks":[],"text":" for improving Reth’s performance \u003e100x, and ","_key":"e0193c4a5c4a2"},{"_type":"span","marks":["fdc2c110d0cb"],"text":"Reth AlphaNet","_key":"e0193c4a5c4a3"},{"marks":[],"text":", our testnet rollup for pushing Reth’s modularity and extensibility to the limits.","_key":"e0193c4a5c4a4","_type":"span"}],"_type":"block","style":"normal"},{"style":"normal","_key":"dbe6f6d65709","asset":null,"markDefs":[],"children":[{"_type":"span","marks":["strong"],"text":"Today, we are excited to announce Reth Execution Extensions (ExEx). ExEx is a framework for building performant and complex off-chain infrastructure as post-execution hooks. Reth ExExes can be used to implement rollups, indexers, MEV bots and more with \u003e10x less code than existing methods. With this release, we demonstrate from scratch a prod-ready reorg tracker in \u003c20 LoC, an indexer in \u003c250 LoC and a rollup in \u003c1000 LoC.","_key":"cc6053640bbf0"}],"_type":"block"},{"asset":null,"children":[{"_type":"span","marks":[],"text":"ExEx was co-architected with ","_key":"0f273116b5a10"},{"text":"init4","_key":"0f273116b5a11","_type":"span","marks":["ecd4135d0a7c"]},{"_type":"span","marks":[],"text":", a research collective building next-generation Ethereum infrastructure. We look forward to continuing to collaborate with the init4 team as we make Reth the #1 platform for building crypto infrastructure!","_key":"0f273116b5a12"}],"_type":"block","style":"normal","_key":"7a323a158e1c","markDefs":[{"_key":"ecd4135d0a7c","_type":"link","href":"https://twitter.com/init4tech"}]}]},{"_type":"richTextBlock","_key":"ec03eca757ec","content":[{"markDefs":[],"children":[{"_key":"f3610351a28d0","_type":"span","marks":[],"text":"How do we build off-chain infrastructure today?"}],"_type":"block","style":"h1","_key":"89b41c291248","asset":null},{"_key":"1fe798b5b7fe","markDefs":[],"children":[{"marks":[],"text":"A blockchain is a clock that confirms blocks with transaction data on a regular interval. Off-chain infrastructure subscribes to these regular block updates and updates its own internal state as a response.","_key":"5e6928cbd0610","_type":"span"}],"asset":null,"_type":"block","style":"normal"},{"markDefs":[],"children":[{"text":"For example, consider how an Ethereum indexer works:","_key":"2f150982d9e30","_type":"span","marks":[]}],"_type":"block","style":"normal","_key":"7838e62b5894","asset":null},{"style":"normal","_key":"f394713ae53d","listItem":"number","markDefs":[],"children":[{"_type":"span","marks":[],"text":"It subscribes to Ethereum events such as blocks and logs, usually over ","_key":"c5e9d6c6d6ef0"},{"_type":"span","marks":["code"],"text":"eth_subscribe","_key":"c5e9d6c6d6ef1"},{"marks":[],"text":" or by polling with ","_key":"c5e9d6c6d6ef2","_type":"span"},{"_key":"c5e9d6c6d6ef3","_type":"span","marks":["code"],"text":"eth_getFilterChanges."}],"asset":null,"level":1,"_type":"block"},{"listItem":"number","markDefs":[],"children":[{"_type":"span","marks":[],"text":"On each event, it proceeds to fetch any additional data needed over JSON-RPC such as the receipts alongside the block and its transactions.","_key":"f2ba7f0042d10"}],"level":1,"_type":"block","style":"normal","asset":null,"_key":"1d93a8d57958"},{"listItem":"number","asset":null,"markDefs":[],"children":[{"text":"For each payload it ABI decodes the logs it needs based on a configuration such as the address or the topics it cares about.","_key":"5199f5df87c90","_type":"span","marks":[]}],"level":1,"_type":"block","style":"normal","_key":"d43c90c9be5b"},{"listItem":"number","asset":null,"markDefs":[],"children":[{"_type":"span","marks":[],"text":"For all decoded data, it writes them to a database such as Postgres or Sqlite.","_key":"ccffc3463b440"}],"level":1,"_type":"block","style":"normal","_key":"da3426921c23"},{"_type":"block","style":"normal","_key":"4e840fcdbd47","markDefs":[],"children":[{"_type":"span","marks":[],"text":"This is the standard Extract Transform Load (ETL) pattern that you see in large scale data pipelines, with companies like Fivetran owning the data extraction, Snowflake handling the loading into a data warehouse, and customers focusing on writing the transformation’s business logic.","_key":"8e7f127297870"}],"asset":null},{"asset":null,"_type":"block","style":"normal","_key":"deebdc585727","markDefs":[],"children":[{"_type":"span","marks":[],"text":"We observe that this same pattern also applies to other pieces of crypto infrastructure such as rollups, MEV searchers, or more complex data infrastructure like Shadow Logs.","_key":"d798629c887f0"}]},{"children":[{"marks":[],"text":"Using that as motivation, we identify key challenges when building ETL pipelines for Ethereum nodes:","_key":"54ba6a89e3e60","_type":"span"}],"_type":"block","style":"normal","_key":"807c8d01039c","asset":null,"markDefs":[]},{"_key":"ebce711caca6","listItem":"number","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Data Freshness: Chain reorganizations mean that most infrastructure is usually trailing behind the tip of the chain to avoid operating over state that might no longer be part of the canonical chain. This in practice means that building real-time crypto data products is challenging, evidenced by the proliferation of products with high latencies (on the order of multiple blocks, tens of seconds) relative to what they could be providing to their customers. We believe that this happens because nodes do not have a great developer experience for reorg-aware notification streams.","_key":"8aaf32717cc80"}],"level":1,"asset":null,"_type":"block","style":"normal"},{"style":"normal","asset":null,"_key":"8e1739ab8bbe","listItem":"number","markDefs":[{"_key":"ffa7e0c91d10","_type":"link","href":"https://github.com/joshstevens19/reth-indexer"}],"children":[{"_key":"37777b6aff7e0","_type":"span","marks":[],"text":"Performance: Moving data, transforming it and stitching it together across different systems means there are non negligible performance overheads. For example, a "},{"_type":"span","marks":["ffa7e0c91d10"],"text":"Reth-based indexer","_key":"37777b6aff7e1"},{"_type":"span","marks":[],"text":" that directly plugs on Reth’s database showed 1-2 orders of magnitude improvement vs other indexers that plug on JSON-RPC, pointing at serious improvements by colocating workloads and removing intermediate layers of communication.","_key":"37777b6aff7e2"}],"level":1,"_type":"block"},{"markDefs":[],"children":[{"marks":[],"text":"Operational Complexity: Running Ethereum nodes with high uptime is already a big challenge. Running additional infrastructure on top of them further exacerbates the problem and requires developers to think about job orchestration APIs, or running multiple services for relatively simple tasks.","_key":"e2d1c0817c4a0","_type":"span"}],"level":1,"_type":"block","style":"normal","asset":null,"_key":"f4810d5e92f2","listItem":"number"},{"children":[{"_type":"span","marks":["strong"],"text":"There is a need for a better API for building off-chain infrastructure that depends on a node’s state changes. That API must be performant, ‘batteries-included’ and reorg-aware. We need an Airflow moment for building Ethereum ETL infrastructure and job orchestration.","_key":"8d4e8170a8cc0"}],"_type":"block","asset":null,"style":"normal","_key":"90d42eee5374","markDefs":[]}]},{"_type":"richTextBlock","_key":"8d5608be4b56","content":[{"children":[{"_key":"47e0ddeab9f80","_type":"span","marks":[],"text":"Introducing Reth Execution Extensions (ExEx)"}],"_type":"block","style":"h1","_key":"2d6201a1ee7d","markDefs":[],"asset":null},{"style":"normal","_key":"3e8c73120f41","markDefs":[],"children":[{"marks":["strong"],"text":"Execution Extensions (ExExes) are post-execution hooks for building real-time, high performance and zero-operations off-chain infrastructure on top of Reth.","_key":"69e9ea6d61480","_type":"span"}],"asset":null,"_type":"block"},{"children":[{"_type":"span","marks":[],"text":"An Execution Extension is a task that derives its state from Reth's state. Some examples of such state derives are rollups, indexers, MEV extractors, and more. We expect that developers will build reusable ExExes that compose with each other in a standardized way, similar to how Cosmos SDK modules or Substrate Pallets work.","_key":"99c588870e3e0"}],"_type":"block","style":"normal","asset":null,"_key":"8a211a17cd32","markDefs":[]},{"asset":{"sha1hash":"9dbe4f1022b67c7855f421498848f3f1a25f7031","assetId":"9dbe4f1022b67c7855f421498848f3f1a25f7031","_id":"image-9dbe4f1022b67c7855f421498848f3f1a25f7031-2400x1350-png","mimeType":"image/png","_updatedAt":"2024-06-06T19:19:56Z","extension":"png","url":"https://cdn.sanity.io/images/dgybcd83/production/9dbe4f1022b67c7855f421498848f3f1a25f7031-2400x1350.png","size":104577,"originalFilename":"chart.png","metadata":{"blurHash":"M8RpOK^m~E_3%M?bofofj[ay~E%Mxus;WB","_type":"sanity.imageMetadata","palette":{"lightMuted":{"_type":"sanity.imagePaletteSwatch","foreground":"#000","title":"#fff","population":0.04,"background":"#b4c4b4"},"vibrant":{"population":0,"background":"#7fdc22","_type":"sanity.imagePaletteSwatch","foreground":"#000","title":"#fff"},"dominant":{"title":"#fff","population":0.51,"background":"#798179","_type":"sanity.imagePaletteSwatch","foreground":"#fff"},"_type":"sanity.imagePalette","darkMuted":{"background":"#3e483e","_type":"sanity.imagePaletteSwatch","foreground":"#fff","title":"#fff","population":0.02},"muted":{"foreground":"#fff","title":"#fff","population":0.51,"background":"#798179","_type":"sanity.imagePaletteSwatch"},"lightVibrant":{"title":"#000","population":0.23,"background":"#f4fcec","_type":"sanity.imagePaletteSwatch","foreground":"#000"},"darkVibrant":{"title":"#fff","population":0,"background":"#427212","_type":"sanity.imagePaletteSwatch","foreground":"#fff"}},"hasAlpha":true,"lqip":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABqUlEQVQokV1TibKjIBD0/z/w3YcmKgEElEPUmPTWTEI2u1Z1wVBF090zVtfrFQX0nfczXHAQg4AaFWywD7jo/kVyGNPIez975C2jYhbgQZqXjF73+Dh8oFENTtMJwgmcxhNUUDDJwM4WZjbQUUOHG9zsENeIqhBdrhfs+440Jwgj8N1/o9ENxCjQu55JpZdM5BbHpIVQBcV1WAKqZVsQc0TIASknJtSjRi1rHPURyisMcXgoIYWkhlY6H+LwOItLRGUmg1/xy1BOYQwjOtXhtX5llWSZSAmkkKz3tueV6+kWCT3ms0clncRb/YaX+gWd7mBHi1a1eD++4+f0w5bpkpxul1vTopENr4WsNS0/yITUHWkl52a9hY+elZZLxWaxTXnR5RLBcLdNljnD/bLzqGznDeu2Is6RR+ar+8JBH5hA+3s3o8aQbpk95zrEATbdm/I8NtzlnNAPPT7bT9SqZsud6bjTlBmp4wie8qNM6VG/+L9jU0BKaVCFFZCjhIkGJhheSQVZK6C6YJonpDXdFD7/KTSPRJrXzJO/nBes55XxvP+/3vaNo/sDyWRF0NVEV7sAAAAASUVORK5CYII=","dimensions":{"height":1350,"_type":"sanity.imageDimensions","width":2400,"aspectRatio":1.7777777777777777},"isOpaque":true},"uploadId":"LnkmgmNiXWdB9aGySjW1wr2vBNJj8dmc","path":"images/dgybcd83/production/9dbe4f1022b67c7855f421498848f3f1a25f7031-2400x1350.png","_createdAt":"2024-06-06T19:19:56Z","_rev":"AM0idtmW4yKOx4IVH3OrVk","_type":"sanity.imageAsset"},"_type":"imageAlt","_key":"4186d059d6f7"},{"asset":null,"_key":"138b81393c6b","markDefs":[{"href":"https://twitter.com/init4tech","_key":"5969d52e6e89","_type":"link"}],"children":[{"_type":"span","marks":[],"text":"We co-architected Execution Extensions with the ","_key":"25a2cebddaee0"},{"_type":"span","marks":["5969d52e6e89"],"text":"init4 team","_key":"25a2cebddaee1"},{"_type":"span","marks":[],"text":" (follow them!), a new research collective building next-generation Ethereum infrastructure. We are excited to continue collaborating with their team as we productionize ExExes and make Reth the #1 platform for building crypto infrastructure!","_key":"25a2cebddaee2"}],"_type":"block","style":"normal"},{"children":[{"_type":"span","marks":[],"text":"We are still early in the best practices of building ExExes, and we’d like to invite developers to join us in exploring this new frontier of building off-chain crypto infrastructure. Please reach out with ideas to collaborate.","_key":"652eab03fecb0"}],"_type":"block","style":"normal","_key":"ab70fb48b983","asset":null,"markDefs":[]}]},{"_type":"richTextBlock","_key":"c4a497a09936","content":[{"asset":null,"children":[{"_type":"span","marks":[],"text":"How do ExExes work?","_key":"ce5dd923520c0"}],"_type":"block","style":"h2","_key":"cfd5f8fc6f98","markDefs":[]},{"style":"normal","_key":"c4660df87f5a","markDefs":[],"children":[{"_type":"span","marks":[],"text":"In Rust terms, an ExEx is a Future that is run indefinitely alongside Reth. ExExes are initialized using an async closure that resolves to the ExEx. Here is the expected end to end flow:","_key":"ea18a5f38d060"}],"_type":"block","asset":null},{"style":"normal","_key":"a28a7245d47a","asset":null,"listItem":"number","markDefs":[{"_type":"link","href":"https://paradigmxyz.github.io/reth/docs/reth_exex/enum.ExExNotification.html","_key":"4023594e8291"},{"_type":"link","href":"https://paradigmxyz.github.io/reth/docs/reth_provider/chain/struct.Chain.html","_key":"3b5fd429195c"}],"children":[{"_type":"span","marks":[],"text":"Reth exposes a reorg-aware stream called ","_key":"3f6b212a07750"},{"_type":"span","marks":["code","4023594e8291"],"text":"ExExNotification","_key":"3f6b212a07751"},{"_key":"3f6b212a07752","_type":"span","marks":[],"text":" which "},{"_type":"span","marks":["3b5fd429195c"],"text":"includes","_key":"3f6b212a07753"},{"_key":"3f6b212a07754","_type":"span","marks":[],"text":" a list of blocks committed to the chain, and all associated transactions \u0026 receipts, state changes and trie updates with them."}],"level":1,"_type":"block"},{"asset":null,"_key":"5fb12bf599ec","listItem":"number","markDefs":[{"_type":"link","href":"https://github.com/paradigmxyz/reth/blob/main/examples/exex/op-bridge/src/main.rs#L130","_key":"f6969724e8b1"},{"_type":"link","href":"https://github.com/paradigmxyz/reth/blob/main/examples/exex/op-bridge/src/main.rs#L98","_key":"be4b84541466"}],"children":[{"_type":"span","marks":[],"text":"Developers are expected to consume that stream by writing ExExes as ","_key":"b7649241cc9b0"},{"_type":"span","marks":["code"],"text":"async","_key":"b7649241cc9b1"},{"_type":"span","marks":[],"text":" functions that derive state such as a rollup block. The stream exposes a ChainCommitted variant for ","_key":"b7649241cc9b2"},{"_type":"span","marks":["f6969724e8b1"],"text":"appending to ExEx state","_key":"b7649241cc9b3"},{"_type":"span","marks":[],"text":" and a ChainReverted/Reorged-variant for ","_key":"b7649241cc9b4"},{"_type":"span","marks":["be4b84541466"],"text":"undoing any changes","_key":"b7649241cc9b5"},{"_type":"span","marks":[],"text":". This is what allows ExExes to be operating at native block time, while also exposing a sane API for handling reorgs safely, instead of not handling reorgs and introducing latency.","_key":"b7649241cc9b6"}],"level":1,"_type":"block","style":"normal"},{"style":"normal","_key":"89ce8d76109e","asset":null,"listItem":"number","markDefs":[{"href":"https://paradigmxyz.github.io/reth/docs/reth_exex/struct.ExExManager.html","_key":"982389459e9f","_type":"link"}],"children":[{"marks":[],"text":"ExExes get orchestrated by Reth’s ","_key":"039a1c31ad560","_type":"span"},{"text":"ExExManager","_key":"039a1c31ad561","_type":"span","marks":["code","982389459e9f"]},{"_type":"span","marks":[],"text":" that is responsible for routing notifications from Reth to ExExes and ExEx events back to Reth, while Reth’s task executor drives ExExes to completion.","_key":"039a1c31ad562"}],"level":1,"_type":"block"},{"_type":"block","style":"normal","_key":"89edd3520b7e","listItem":"number","markDefs":[],"asset":null,"children":[{"_type":"span","marks":[],"text":"Each ExEx gets installed on the node via the ","_key":"cd8f39cb47af0"},{"_key":"cd8f39cb47af1","_type":"span","marks":["code"],"text":"install_exex"},{"_type":"span","marks":[],"text":" API of the Node Builder.","_key":"cd8f39cb47af2"}],"level":1},{"asset":null,"markDefs":[],"children":[{"marks":[],"text":"Here is how this roughly looks like from the node developer’s perspective:","_key":"5be99e0dbf8b0","_type":"span"}],"_type":"block","style":"normal","_key":"a722d25adc52"},{"children":[{"_type":"span","marks":[],"text":"","_key":"b307c25b4c73"}],"asset":null,"_type":"block","style":"normal","_key":"cef7185ab391","markDefs":[]}]},{"_type":"codeTextBlock","_key":"0019b1bb5fe4","content":{"code":"use futures::Future;\nuse reth_exex::{ExExContext, ExExEvent, ExExNotification};\nuse reth_node_api::FullNodeComponents;\nuse reth_node_ethereum::EthereumNode;\n\n// The `ExExContext` is available to every ExEx to interface with the rest of the node.\n// \n// pub struct ExExContext\u003cNode: FullNodeComponents\u003e {\n//     /// The configured provider to interact with the blockchain.\n//     pub provider: Node::Provider,\n//     /// The task executor of the node.\n//     pub task_executor: TaskExecutor,\n//     /// The transaction pool of the node.\n//     pub pool: Node::Pool,\n//     /// Channel to receive [`ExExNotification`]s.\n//     pub notifications: Receiver\u003cExExNotification\u003e,\n//     // .. other useful context fields\n// }\nasync fn exex\u003cNode: FullNodeComponents\u003e(mut ctx: ExExContext\u003cNode\u003e) -\u003e eyre::Result\u003c()\u003e {\n    while let Some(notification) = ctx.notifications.recv().await {\n        match \u0026notification {\n            ExExNotification::ChainCommitted { new } =\u003e {\n                // do something\n            }\n            ExExNotification::ChainReorged { old, new } =\u003e {\n                // do something\n            }\n            ExExNotification::ChainReverted { old } =\u003e {\n                // do something\n            }\n        };\n    }\n    Ok(())\n}\n\nfn main() -\u003e eyre::Result\u003c()\u003e {\n    reth::cli::Cli::parse_args().run(|builder, _| async move {\n        let handle = builder\n            .node(EthereumNode::default())\n            .install_exex(\"Minimal\", |ctx| async move { exex(ctx) } )\n            .launch()\n            .await?;\n\n        handle.wait_for_node_exit().await\n    })\n}","language":"rust"},"renderedContent":"\u003cspan class=\"token keyword\"\u003euse\u003c/span\u003e \u003cspan class=\"token namespace\"\u003efutures\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eFuture\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003euse\u003c/span\u003e \u003cspan class=\"token namespace\"\u003ereth_exex\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eExExContext\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eExExEvent\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eExExNotification\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003euse\u003c/span\u003e \u003cspan class=\"token namespace\"\u003ereth_node_api\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eFullNodeComponents\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003euse\u003c/span\u003e \u003cspan class=\"token namespace\"\u003ereth_node_ethereum\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eEthereumNode\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e// The `ExExContext` is available to every ExEx to interface with the rest of the node.\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e// \u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e// pub struct ExExContext\u0026lt;Node: FullNodeComponents\u003e {\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e//     /// The configured provider to interact with the blockchain.\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e//     pub provider: Node::Provider,\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e//     /// The task executor of the node.\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e//     pub task_executor: TaskExecutor,\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e//     /// The transaction pool of the node.\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e//     pub pool: Node::Pool,\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e//     /// Channel to receive [`ExExNotification`]s.\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e//     pub notifications: Receiver\u0026lt;ExExNotification\u003e,\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e//     // .. other useful context fields\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e// }\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003eexex\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eNode\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eFullNodeComponents\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e ctx\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eExExContext\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eNode\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token namespace\"\u003eeyre\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eResult\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003ewhile\u003c/span\u003e \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eSome\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003enotification\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e ctx\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003enotifications\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003erecv\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003ematch\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026amp;\u003c/span\u003enotification \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"token class-name\"\u003eExExNotification\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eChainCommitted\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e new \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"token comment\"\u003e// do something\u003c/span\u003e\n            \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"token class-name\"\u003eExExNotification\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eChainReorged\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e old\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e new \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"token comment\"\u003e// do something\u003c/span\u003e\n            \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"token class-name\"\u003eExExNotification\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eChainReverted\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e old \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"token comment\"\u003e// do something\u003c/span\u003e\n            \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token class-name\"\u003eOk\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003emain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token namespace\"\u003eeyre\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eResult\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token namespace\"\u003ereth\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003ecli\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eCli\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token function\"\u003eparse_args\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003erun\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token closure-params\"\u003e\u003cspan class=\"token closure-punctuation punctuation\"\u003e|\u003c/span\u003ebuilder\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e _\u003cspan class=\"token closure-punctuation punctuation\"\u003e|\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emove\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e handle \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e builder\n            \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003enode\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eEthereumNode\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token function\"\u003edefault\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003einstall_exex\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"Minimal\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token closure-params\"\u003e\u003cspan class=\"token closure-punctuation punctuation\"\u003e|\u003c/span\u003ectx\u003cspan class=\"token closure-punctuation punctuation\"\u003e|\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emove\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token function\"\u003eexex\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ectx\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003elaunch\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eawait\u003c/span\u003e\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n        handle\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ewait_for_node_exit\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eawait\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e"},{"_type":"richTextBlock","_key":"548d17755ef8","content":[{"style":"normal","_key":"f0f2dd897973","markDefs":[],"children":[{"_type":"span","marks":[],"text":"The above \u003c50 LoC snippet encapsulates defining and installing an ExEx. It is extremely powerful and allows extending your Ethereum node’s functionality with zero additional pieces of infrastructure.","_key":"ff71fb7620db0"}],"_type":"block","asset":null},{"_key":"f1baaac71d0d","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Let’s walk through some examples now.","_key":"3e6e73cdf2280"}],"_type":"block","style":"normal","asset":null}]},{"_type":"richTextBlock","_key":"f6d233d803e4","content":[{"markDefs":[],"children":[{"marks":[],"text":"Hello ExEx!","_key":"1031e76d25f90","_type":"span"}],"_type":"block","style":"h2","_key":"757e1a87e507","asset":null},{"markDefs":[{"href":"https://github.com/paradigmxyz/reth/blob/main/examples/exex/minimal/src/main.rs","_key":"b7b4c35c95c4","_type":"link"}],"children":[{"_type":"span","marks":[],"text":"The ","_key":"c65042c1ebcb0"},{"_type":"span","marks":["b7b4c35c95c4"],"text":"“Hello World” of Execution Extensions","_key":"c65042c1ebcb1"},{"marks":[],"text":" is a reorg tracker. The ExEx shown in the screenshot below illustrates logging whether there was a new chain or a reorganization. One could build a reorg tracker on top of their Reth node easily just by parsing the info logs emitted by the below ExEx.","_key":"c65042c1ebcb2","_type":"span"}],"_type":"block","style":"normal","_key":"793222a58170","asset":null},{"_type":"block","style":"normal","_key":"191d8f665989","asset":null,"markDefs":[{"_type":"link","href":"https://paradigmxyz.github.io/reth/docs/reth_provider/chain/struct.Chain.html","_key":"7f4aa0c5febe"}],"children":[{"_type":"span","marks":[],"text":"In this example, the ","_key":"1534ac6607ff0"},{"_type":"span","marks":["code"],"text":"old","_key":"1534ac6607ff1"},{"_key":"1534ac6607ff2","_type":"span","marks":[],"text":" and "},{"_type":"span","marks":["code"],"text":"new","_key":"1534ac6607ff3"},{"_type":"span","marks":[],"text":" chains have full access to every state change in that range of blocks, along with the trie updates and other useful information in the ","_key":"1534ac6607ff4"},{"_key":"1534ac6607ff5","_type":"span","marks":["code","7f4aa0c5febe"],"text":"Chain"},{"_type":"span","marks":[],"text":" struct.","_key":"1534ac6607ff6"}]}]},{"_type":"codeTextBlock","_key":"063adc1906a5","content":{"code":"async fn exex\u003cNode: FullNodeComponents\u003e(mut ctx: ExExContext\u003cNode\u003e) -\u003e eyre::Result\u003c()\u003e {\n    while let Some(notification) = ctx.notifications.recv().await {\n        match \u0026notification {\n            ExExNotification::ChainCommitted { new } =\u003e {\n                info!(committed_chain = ?new.range(), \"Received commit\");\n            }\n            ExExNotification::ChainReorged { old, new } =\u003e {\n                info!(from_chain = ?old.range(), to_chain = ?new.range(), \"Received reorg\");\n            }\n            ExExNotification::ChainReverted { old } =\u003e {\n                info!(reverted_chain = ?old.range(), \"Received revert\");\n            }\n        };\n\n        if let Some(committed_chain) = notification.committed_chain() {\n            ctx.events.send(ExExEvent::FinishedHeight(committed_chain.tip().number))?;\n        }\n    }\n    Ok(())\n}","language":"rust"},"renderedContent":"\u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003eexex\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eNode\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eFullNodeComponents\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e ctx\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eExExContext\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eNode\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token namespace\"\u003eeyre\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eResult\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003ewhile\u003c/span\u003e \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eSome\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003enotification\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e ctx\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003enotifications\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003erecv\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003ematch\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026amp;\u003c/span\u003enotification \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"token class-name\"\u003eExExNotification\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eChainCommitted\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e new \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"token macro property\"\u003einfo!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecommitted_chain \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token operator\"\u003e?\u003c/span\u003enew\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003erange\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"Received commit\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"token class-name\"\u003eExExNotification\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eChainReorged\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e old\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e new \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"token macro property\"\u003einfo!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003efrom_chain \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token operator\"\u003e?\u003c/span\u003eold\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003erange\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e to_chain \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token operator\"\u003e?\u003c/span\u003enew\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003erange\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"Received reorg\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"token class-name\"\u003eExExNotification\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eChainReverted\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e old \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"token macro property\"\u003einfo!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ereverted_chain \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token operator\"\u003e?\u003c/span\u003eold\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003erange\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"Received revert\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eSome\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecommitted_chain\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e notification\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ecommitted_chain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            ctx\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eevents\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003esend\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eExExEvent\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eFinishedHeight\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecommitted_chain\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003etip\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003enumber\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token class-name\"\u003eOk\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e"},{"_type":"richTextBlock","_key":"2c0123abb9cc","content":[{"_key":"64147d0b315e","markDefs":[],"asset":null,"children":[{"_type":"span","marks":[],"text":"Building an indexer for the OP Stack using ExEx","_key":"be44703da1cd0"}],"_type":"block","style":"h2"},{"style":"normal","_key":"86ec2a945547","markDefs":[{"_type":"link","href":"https://github.com/paradigmxyz/reth/blob/main/examples/exex/op-bridge/src/main.rs","_key":"617ed7953de6"}],"asset":null,"children":[{"_type":"span","marks":[],"text":"Now that we have the basics of hooking on node events, let's build a more elaborate example, such as an ","_key":"a296dd12d0c00"},{"text":"indexer for deposits and withdrawals in common OP Stack chains","_key":"a296dd12d0c01","_type":"span","marks":["617ed7953de6"]},{"_key":"a296dd12d0c02","_type":"span","marks":[],"text":", using SQlite as the backend."}],"_type":"block"},{"asset":null,"_type":"block","style":"normal","_key":"9349e791d2e4","markDefs":[],"children":[{"text":"In this case:","_key":"cccd591e41860","_type":"span","marks":[]}]},{"_type":"block","style":"normal","_key":"d67806d25362","listItem":"number","markDefs":[{"_type":"link","href":"https://github.com/ethereum-optimism/optimism/blob/65ec61dde94ffa93342728d324fecf474d228e1f/packages/contracts-bedrock/contracts/L1/L1StandardBridge.sol","_key":"f30b186146f2"},{"_type":"link","href":"https://docs.rs/alloy-core/latest/alloy_core/sol_types/macro.sol.html","_key":"4d628e030071"},{"_type":"link","href":"https://docs.rs/alloy-core/latest/alloy_core/sol_types/macro.sol.html","_key":"ae922fa34ae5"}],"asset":null,"children":[{"_type":"span","marks":[],"text":"We have loaded the ","_key":"aacb5bba357d0"},{"text":"OP Stack's bridge contract","_key":"aacb5bba357d1","_type":"span","marks":["f30b186146f2"]},{"_type":"span","marks":[],"text":" using Alloy's ","_key":"aacb5bba357d2"},{"marks":["4d628e030071","code"],"text":"sol!","_key":"aacb5bba357d3","_type":"span"},{"_key":"aacb5bba357d4","_type":"span","marks":[],"text":" macro to generate type-safe ABI decoders (this is an extremely powerful macro that we encourage developers to "},{"_key":"aacb5bba357d5","_type":"span","marks":["ae922fa34ae5"],"text":"dive deeper in"},{"text":").","_key":"aacb5bba357d6","_type":"span","marks":[]}],"level":1},{"_type":"block","style":"normal","_key":"91f73bfa3134","listItem":"number","markDefs":[],"children":[{"marks":[],"text":"We initialize the SQLite connection and set up the database tables.","_key":"3f10177872cf0","_type":"span"}],"level":1,"asset":null},{"_key":"de55c7d41932","listItem":"number","markDefs":[],"children":[{"_key":"85805b6562760","_type":"span","marks":[],"text":"On each "},{"_type":"span","marks":["code"],"text":"ExExNotification","_key":"85805b6562761"},{"marks":[],"text":" we proceed to read the logs for every committed block, decode it, and then insert it into SQLite.","_key":"85805b6562762","_type":"span"}],"level":1,"asset":null,"_type":"block","style":"normal"},{"style":"normal","_key":"370dea976fa5","listItem":"number","markDefs":[],"children":[{"_type":"span","marks":[],"text":"If the ","_key":"e55fc24b033e0"},{"text":"ExExNotification","_key":"e55fc24b033e1","_type":"span","marks":["code"]},{"_type":"span","marks":[],"text":" is for a chain reorganization, then we remove the corresponding entries from the SQLite tables.","_key":"e55fc24b033e2"}],"level":1,"asset":null,"_type":"block"},{"markDefs":[{"_type":"link","href":"https://github.com/paradigmxyz/reth/blob/main/examples/exex/op-bridge/src/main.rs","_key":"7be6b6005481"}],"children":[{"_key":"144dd24128fa0","_type":"span","marks":[],"text":"That's it! Super simple, and probably the highest performance locally hosted real-time indexer you can build in 30 minutes. See the code below, and go through the "},{"text":"full example","_key":"144dd24128fa1","_type":"span","marks":["7be6b6005481"]},{"_type":"span","marks":[],"text":".","_key":"144dd24128fa2"}],"_type":"block","style":"normal","_key":"df2ab14384ef","asset":null}]},{"_type":"codeTextBlock","_key":"f46dd9b60447","content":{"code":"use alloy_sol_types::{sol, SolEventInterface};\nuse futures::Future;\nuse reth_exex::{ExExContext, ExExEvent};\nuse reth_node_api::FullNodeComponents;\nuse reth_node_ethereum::EthereumNode;\nuse reth_primitives::{Log, SealedBlockWithSenders, TransactionSigned};\nuse reth_provider::Chain;\nuse reth_tracing::tracing::info;\nuse rusqlite::Connection;\n\nsol!(L1StandardBridge, \"l1_standard_bridge_abi.json\");\nuse crate::L1StandardBridge::{ETHBridgeFinalized, ETHBridgeInitiated, L1StandardBridgeEvents};\n\nfn create_tables(connection: \u0026mut Connection) -\u003e rusqlite::Result\u003c()\u003e {\n    connection.execute(\n        r#\"\n            CREATE TABLE IF NOT EXISTS deposits (\n                id               INTEGER PRIMARY KEY,\n                block_number     INTEGER NOT NULL,\n                tx_hash          TEXT NOT NULL UNIQUE,\n                contract_address TEXT NOT NULL,\n                \"from\"           TEXT NOT NULL,\n                \"to\"             TEXT NOT NULL,\n                amount           TEXT NOT NULL\n            );\n            \"#,\n        (),\n    )?;\n    // .. rest of db initialization\n\n    Ok(())\n}\n\n/// An example of ExEx that listens to ETH bridging events from OP Stack chains\n/// and stores deposits and withdrawals in a SQLite database.\nasync fn op_bridge_exex\u003cNode: FullNodeComponents\u003e(\n    mut ctx: ExExContext\u003cNode\u003e,\n    connection: Connection,\n) -\u003e eyre::Result\u003c()\u003e {\n    // Process all new chain state notifications\n    while let Some(notification) = ctx.notifications.recv().await {\n        // Revert all deposits and withdrawals\n        if let Some(reverted_chain) = notification.reverted_chain() {\n            // ..\n        }\n\n        // Insert all new deposits and withdrawals\n        if let Some(committed_chain) = notification.committed_chain() {\n            // ..\n        }\n    }\n\n    Ok(())\n}\n\n/// Decode chain of blocks into a flattened list of receipt logs, and filter only\n/// [L1StandardBridgeEvents].\nfn decode_chain_into_events(\n    chain: \u0026Chain,\n) -\u003e impl Iterator\u003cItem = (\u0026SealedBlockWithSenders, \u0026TransactionSigned, \u0026Log, L1StandardBridgeEvents)\u003e\n{\n    chain\n        // Get all blocks and receipts\n        .blocks_and_receipts()\n        // .. proceed with decoding them\n}\n\nfn main() -\u003e eyre::Result\u003c()\u003e {\n    reth::cli::Cli::parse_args().run(|builder, _| async move {\n        let handle = builder\n            .node(EthereumNode::default())\n            .install_exex(\"OPBridge\", |ctx| async move {\n                let connection = Connection::open(\"op_bridge.db\")?;\n              \tcreate_tables(\u0026mut connection)?;\n                Ok(op_bridge_exex(ctx, connection))\n            })\n            .launch()\n            .await?;\n\n        handle.wait_for_node_exit().await\n    })\n}\n","language":"rust"},"renderedContent":"\u003cspan class=\"token keyword\"\u003euse\u003c/span\u003e \u003cspan class=\"token namespace\"\u003ealloy_sol_types\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003esol\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eSolEventInterface\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003euse\u003c/span\u003e \u003cspan class=\"token namespace\"\u003efutures\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eFuture\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003euse\u003c/span\u003e \u003cspan class=\"token namespace\"\u003ereth_exex\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eExExContext\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eExExEvent\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003euse\u003c/span\u003e \u003cspan class=\"token namespace\"\u003ereth_node_api\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eFullNodeComponents\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003euse\u003c/span\u003e \u003cspan class=\"token namespace\"\u003ereth_node_ethereum\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eEthereumNode\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003euse\u003c/span\u003e \u003cspan class=\"token namespace\"\u003ereth_primitives\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eLog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eSealedBlockWithSenders\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eTransactionSigned\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003euse\u003c/span\u003e \u003cspan class=\"token namespace\"\u003ereth_provider\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eChain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003euse\u003c/span\u003e \u003cspan class=\"token namespace\"\u003ereth_tracing\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003etracing\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003einfo\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003euse\u003c/span\u003e \u003cspan class=\"token namespace\"\u003erusqlite\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eConnection\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token macro property\"\u003esol!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eL1StandardBridge\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"l1_standard_bridge_abi.json\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003euse\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ecrate\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eL1StandardBridge\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eETHBridgeFinalized\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eETHBridgeInitiated\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eL1StandardBridgeEvents\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003ecreate_tables\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003econnection\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eConnection\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token namespace\"\u003erusqlite\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eResult\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    connection\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eexecute\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"token string\"\u003er#\"\n            CREATE TABLE IF NOT EXISTS deposits (\n                id               INTEGER PRIMARY KEY,\n                block_number     INTEGER NOT NULL,\n                tx_hash          TEXT NOT NULL UNIQUE,\n                contract_address TEXT NOT NULL,\n                \"from\"           TEXT NOT NULL,\n                \"to\"             TEXT NOT NULL,\n                amount           TEXT NOT NULL\n            );\n            \"#\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e// .. rest of db initialization\u003c/span\u003e\n\n    \u003cspan class=\"token class-name\"\u003eOk\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e/// An example of ExEx that listens to ETH bridging events from OP Stack chains\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e/// and stores deposits and withdrawals in a SQLite database.\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003eop_bridge_exex\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eNode\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eFullNodeComponents\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e ctx\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eExExContext\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eNode\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    connection\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eConnection\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token namespace\"\u003eeyre\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eResult\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e// Process all new chain state notifications\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003ewhile\u003c/span\u003e \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eSome\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003enotification\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e ctx\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003enotifications\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003erecv\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token comment\"\u003e// Revert all deposits and withdrawals\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eSome\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ereverted_chain\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e notification\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ereverted_chain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"token comment\"\u003e// ..\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"token comment\"\u003e// Insert all new deposits and withdrawals\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eSome\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecommitted_chain\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e notification\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ecommitted_chain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"token comment\"\u003e// ..\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"token class-name\"\u003eOk\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token comment\"\u003e/// Decode chain of blocks into a flattened list of receipt logs, and filter only\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e/// [L1StandardBridgeEvents].\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003edecode_chain_into_events\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n    chain\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eChain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eimpl\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eIterator\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eItem\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eSealedBlockWithSenders\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eTransactionSigned\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eLog\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eL1StandardBridgeEvents\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    chain\n        \u003cspan class=\"token comment\"\u003e// Get all blocks and receipts\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eblocks_and_receipts\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"token comment\"\u003e// .. proceed with decoding them\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003emain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token namespace\"\u003eeyre\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eResult\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token namespace\"\u003ereth\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003ecli\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eCli\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token function\"\u003eparse_args\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003erun\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token closure-params\"\u003e\u003cspan class=\"token closure-punctuation punctuation\"\u003e|\u003c/span\u003ebuilder\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e _\u003cspan class=\"token closure-punctuation punctuation\"\u003e|\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emove\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e handle \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e builder\n            \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003enode\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eEthereumNode\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token function\"\u003edefault\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003einstall_exex\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"OPBridge\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token closure-params\"\u003e\u003cspan class=\"token closure-punctuation punctuation\"\u003e|\u003c/span\u003ectx\u003cspan class=\"token closure-punctuation punctuation\"\u003e|\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emove\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e connection \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eConnection\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token function\"\u003eopen\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"op_bridge.db\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n              \t\u003cspan class=\"token function\"\u003ecreate_tables\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e connection\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n                \u003cspan class=\"token class-name\"\u003eOk\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token function\"\u003eop_bridge_exex\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ectx\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e connection\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003elaunch\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eawait\u003c/span\u003e\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n        handle\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ewait_for_node_exit\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eawait\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n"},{"_type":"richTextBlock","_key":"f333f37c4949","content":[{"children":[{"_type":"span","marks":[],"text":"Building a Rollup using ExEx","_key":"9b0f33b43ba00"}],"_type":"block","style":"h2","_key":"da38b29f544c","asset":null,"markDefs":[]},{"_type":"block","style":"normal","asset":null,"_key":"4799549c4614","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Let's do something more interesting now, and build a minimal Rollup as an ExEx, with an EVM runtime and SQLite as the backend!","_key":"58b9106a295d0"}]},{"children":[{"_type":"span","marks":[],"text":"If you ","_key":"bd93f955c94a0"},{"marks":["ca90ff5add7c"],"text":"zoom out","_key":"bd93f955c94a1","_type":"span"},{"_key":"bd93f955c94a2","_type":"span","marks":[],"text":", even Rollups are ETL-ish pipelines:"}],"_type":"block","style":"normal","_key":"585b96167b4c","markDefs":[{"_type":"link","href":"https://prestwich.substack.com/p/the-definitive-guide-to-sequencing","_key":"ca90ff5add7c"}],"asset":null},{"markDefs":[],"children":[{"_type":"span","marks":[],"text":"Extract the data posted on L1 and convert to an L2 payload (e.g. OP Stack derivation function).","_key":"3f0825bd68a10"}],"level":1,"asset":null,"_type":"block","style":"normal","_key":"fdc075a3f62e","listItem":"number"},{"style":"normal","_key":"07b919faf2f2","asset":null,"listItem":"number","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Run the state transition function (e.g. EVM).","_key":"bbf60e4fd35b0"}],"level":1,"_type":"block"},{"_key":"2864596225f1","listItem":"number","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Write the updated state to a persistent storage.","_key":"6ce817226c990"}],"level":1,"_type":"block","asset":null,"style":"normal"},{"_key":"594fb9bc81d3","markDefs":[{"_type":"link","href":"https://github.com/init4tech/zenith/blob/main/src/Zenith.sol","_key":"a43305935a90"},{"_type":"link","href":"https://holesky.etherscan.io/address/0x74ae65DF20cB0e3BF8c022051d0Cdd79cc60890C#code","_key":"58c059bb1646"},{"_type":"link","href":"https://github.com/init4tech/zenith-rs","_key":"ebb26edf9892"},{"_type":"link","href":"https://www.paradigm.xyz/2024/05/twitter.com/init4tech","_key":"0fee377a7e98"}],"children":[{"_type":"span","marks":[],"text":"In this example, we demonstrate a simplified rollup that derives its state from RLP encoded EVM transactions posted to ","_key":"14fdede539750"},{"_type":"span","marks":["a43305935a90"],"text":"Zenith","_key":"14fdede539751"},{"_type":"span","marks":[],"text":" (a ","_key":"14fdede539752"},{"_type":"span","marks":["58c059bb1646"],"text":"Holesky","_key":"14fdede539753"},{"_type":"span","marks":[],"text":" smart contract for posting our rollup's block commitments) driven by a ","_key":"14fdede539754"},{"_type":"span","marks":["ebb26edf9892"],"text":"simple block builder","_key":"14fdede539755"},{"marks":[],"text":", both built by the ","_key":"14fdede539756","_type":"span"},{"_type":"span","marks":["0fee377a7e98"],"text":"init4","_key":"14fdede539757"},{"_type":"span","marks":[],"text":" team.","_key":"14fdede539758"}],"_type":"block","style":"normal","asset":null},{"style":"normal","_key":"28308fe22f6e","markDefs":[],"asset":null,"children":[{"text":"The example specifically:","_key":"5b48ad0c3a7c0","_type":"span","marks":[]}],"_type":"block"},{"level":1,"_type":"block","style":"normal","_key":"3567f7e00d17","asset":null,"listItem":"number","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Configures an EVM \u0026 instantiates an SQLite database and implements the required ","_key":"b13bdd0298c60"},{"_type":"span","marks":["code"],"text":"revm","_key":"b13bdd0298c61"},{"_type":"span","marks":[],"text":" Database traits to use SQLite as an EVM backend.","_key":"b13bdd0298c62"}]},{"markDefs":[],"children":[{"_type":"span","marks":[],"text":"Filters transactions sent to the deployed rollup contract, ABI decodes the calldata, then RLP decodes that into a Rollup block which gets executed by the configured EVM.","_key":"6f25c0218e970"}],"level":1,"asset":null,"_type":"block","style":"normal","_key":"5a4aac2715a9","listItem":"number"},{"_key":"c69691976c51","listItem":"number","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Inserts the results of the EVM execution to SQLite.","_key":"0114d874cb5e0"}],"level":1,"asset":null,"_type":"block","style":"normal"},{"_key":"717423ce356f","markDefs":[{"_type":"link","href":"https://github.com/paradigmxyz/reth/blob/main/examples/exex/rollup/src/execution.rs#L135-L152","_key":"854fe637b69d"}],"children":[{"text":"Again, super simple. It also works with ","_key":"93b7273b112a0","_type":"span","marks":[]},{"_key":"93b7273b112a1","_type":"span","marks":["854fe637b69d"],"text":"blobs"},{"_type":"span","marks":[],"text":"!","_key":"93b7273b112a2"}],"_type":"block","style":"normal","asset":null},{"children":[{"_type":"span","marks":["strong"],"text":"ExEx Rollups are extremely powerful because we can now run any number of rollups on Reth without additional infrastructure, by installing them as ExExes","_key":"d0e73bd6cf4c0"},{"_type":"span","marks":[],"text":".","_key":"d0e73bd6cf4c1"}],"asset":null,"_type":"block","style":"normal","_key":"f6952eb73e11","markDefs":[]},{"_type":"block","style":"normal","_key":"456571d04018","markDefs":[],"asset":null,"children":[{"_type":"span","marks":[],"text":"We are working on extending the example with blobs, and providing a built-in sequencer, for a more complete end to end demo. Reach out if this is something you'd like to build, as we think this has potential for introducing L2 PBS, decentralized / shared sequencers or even SGX-based sequencers and more.","_key":"655015c4f9f00"}]},{"_type":"block","style":"normal","asset":null,"_key":"027fcf70095a","markDefs":[{"_type":"link","href":"https://github.com/paradigmxyz/reth/blob/main/examples/exex/rollup/src/main.rs","_key":"3be695a3b560"}],"children":[{"_type":"span","marks":["3be695a3b560"],"text":"Example","_key":"6b2fd6fab2780"},{"_type":"span","marks":[],"text":" snippets below.","_key":"6b2fd6fab2781"}]},{"_key":"b6761d057f14","markDefs":[],"children":[{"text":"","_key":"7966405bef6b0","_type":"span","marks":[]}],"asset":null,"_type":"block","style":"normal"}]},{"_type":"codeTextBlock","_key":"9918754c91bb","content":{"code":"use alloy_rlp::Decodable;\nuse alloy_sol_types::{sol, SolEventInterface, SolInterface};\nuse db::Database;\nuse eyre::OptionExt;\nuse once_cell::sync::Lazy;\nuse reth_exex::{ExExContext, ExExEvent};\nuse reth_interfaces::executor::BlockValidationError;\nuse reth_node_api::{ConfigureEvm, ConfigureEvmEnv, FullNodeComponents};\nuse reth_node_ethereum::{EthEvmConfig, EthereumNode};\nuse reth_primitives::{\n    address, constants,\n    revm::env::fill_tx_env,\n    revm_primitives::{CfgEnvWithHandlerCfg, EVMError, ExecutionResult, ResultAndState},\n    Address, Block, BlockWithSenders, Bytes, ChainSpec, ChainSpecBuilder, Genesis, Hardfork,\n    Header, Receipt, SealedBlockWithSenders, TransactionSigned, U256,\n};\nuse reth_provider::Chain;\nuse reth_revm::{\n    db::{states::bundle_state::BundleRetention, BundleState},\n    DatabaseCommit, StateBuilder,\n};\nuse reth_tracing::tracing::{debug, error, info};\nuse rusqlite::Connection;\nuse std::sync::Arc;\n\nmod db;\n\nsol!(RollupContract, \"rollup_abi.json\");\nuse RollupContrac:{RollupContractCalls, RollupContractEvents};\n\nconst DATABASE_PATH: \u0026str = \"rollup.db\";\nconst ROLLUP_CONTRACT_ADDRESS: Address = address!(\"74ae65DF20cB0e3BF8c022051d0Cdd79cc60890C\");\nconst ROLLUP_SUBMITTER_ADDRESS: Address = address!(\"B01042Db06b04d3677564222010DF5Bd09C5A947\");\nconst CHAIN_ID: u64 = 17001;\nstatic CHAIN_SPEC: Lazy\u003cArc\u003cChainSpec\u003e\u003e = Lazy::new(|| {\n    Arc::new(\n        ChainSpecBuilder::default()\n            .chain(CHAIN_ID.into())\n            .genesis(Genesis::clique_genesis(CHAIN_ID, ROLLUP_SUBMITTER_ADDRESS))\n            .shanghai_activated()\n            .build(),\n    )\n});\n\nstruct Rollup\u003cNode: FullNodeComponents\u003e {\n    ctx: ExExContext\u003cNode\u003e,\n    db: Database,\n}\n\nimpl\u003cNode: FullNodeComponents\u003e Rollup\u003cNode\u003e {\n    fn new(ctx: ExExContext\u003cNode\u003e, connection: Connection) -\u003e eyre::Result\u003cSelf\u003e {\n        let db = Database::new(connection)?;\n        Ok(Self { ctx, db })\n    }\n\n    async fn start(mut self) -\u003e eyre::Result\u003c()\u003e {\n        // Process all new chain state notifications\n        while let Some(notification) = self.ctx.notifications.recv().await {\n            if let Some(reverted_chain) = notification.reverted_chain() {\n                self.revert(\u0026reverted_chain)?;\n            }\n\n            if let Some(committed_chain) = notification.committed_chain() {\n                self.commit(\u0026committed_chain)?;\n                self.ctx.events.send(ExExEvent::FinishedHeight(committed_chain.tip().number))?;\n            }\n        }\n\n        Ok(())\n    }\n\n    /// Process a new chain commit.\n    ///\n    /// This function decodes all transactions to the rollup contract into events, executes the\n    /// corresponding actions and inserts the results into the database.\n    fn commit(\u0026mut self, chain: \u0026Chain) -\u003e eyre::Result\u003c()\u003e {\n        let events = decode_chain_into_rollup_events(chain);\n\n        for (_, tx, event) in events {\n            match event {\n                // A new block is submitted to the rollup contract.\n                // The block is executed on top of existing rollup state and committed into the\n                // database.\n                RollupContractEvents::BlockSubmitted(_) =\u003e {\n                    // ..\n                }\n                // A deposit of ETH to the rollup contract. The deposit is added to the recipient's\n                // balance and committed into the database.\n                RollupContractEvents::Enter(RollupContract::Enter {\n                    token,\n                    rollupRecipient,\n                    amount,\n                }) =\u003e {\n                    // ..\n                _ =\u003e (),\n            }\n        }\n\n        Ok(())\n    }\n\n    /// Process a chain revert.\n    ///\n    /// This function decodes all transactions to the rollup contract into events, reverts the\n    /// corresponding actions and updates the database.\n    fn revert(\u0026mut self, chain: \u0026Chain) -\u003e eyre::Result\u003c()\u003e {\n        let mut events = decode_chain_into_rollup_events(chain);\n        // Reverse the order of events to start reverting from the tip\n        events.reverse();\n\n        for (_, tx, event) in events {\n            match event {\n                // The block is reverted from the database.\n                RollupContractEvents::BlockSubmitted(_) =\u003e {\n                    // ..\n                }\n                // The deposit is subtracted from the recipient's balance.\n                RollupContractEvents::Enter(RollupContract::Enter {\n                    token,\n                    rollupRecipient,\n                    amount,\n                }) =\u003e {\n                    // ..\n                }\n                _ =\u003e (),\n            }\n        }\n\n        Ok(())\n    }\n}\n\nfn main() -\u003e eyre::Result\u003c()\u003e {\n    reth::cli::Cli::parse_args().run(|builder, _| async move {\n        let handle = builder\n            .node(EthereumNode::default())\n            .install_exex(\"Rollup\", move |ctx| async {\n                let connection = Connection::open(DATABASE_PATH)?;\n                Ok(Rollup::new(ctx, connection)?.start())\n            })\n            .launch()\n            .await?;\n\n        handle.wait_for_node_exit().await\n    })\n}","language":"rust"},"renderedContent":"\u003cspan class=\"token keyword\"\u003euse\u003c/span\u003e \u003cspan class=\"token namespace\"\u003ealloy_rlp\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eDecodable\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003euse\u003c/span\u003e \u003cspan class=\"token namespace\"\u003ealloy_sol_types\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003esol\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eSolEventInterface\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eSolInterface\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003euse\u003c/span\u003e \u003cspan class=\"token namespace\"\u003edb\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eDatabase\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003euse\u003c/span\u003e \u003cspan class=\"token namespace\"\u003eeyre\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eOptionExt\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003euse\u003c/span\u003e \u003cspan class=\"token namespace\"\u003eonce_cell\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003esync\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eLazy\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003euse\u003c/span\u003e \u003cspan class=\"token namespace\"\u003ereth_exex\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eExExContext\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eExExEvent\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003euse\u003c/span\u003e \u003cspan class=\"token namespace\"\u003ereth_interfaces\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003eexecutor\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eBlockValidationError\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003euse\u003c/span\u003e \u003cspan class=\"token namespace\"\u003ereth_node_api\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eConfigureEvm\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eConfigureEvmEnv\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eFullNodeComponents\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003euse\u003c/span\u003e \u003cspan class=\"token namespace\"\u003ereth_node_ethereum\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eEthEvmConfig\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eEthereumNode\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003euse\u003c/span\u003e \u003cspan class=\"token namespace\"\u003ereth_primitives\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    address\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e constants\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token namespace\"\u003erevm\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003eenv\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003efill_tx_env\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token namespace\"\u003erevm_primitives\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eCfgEnvWithHandlerCfg\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eEVMError\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eExecutionResult\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eResultAndState\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token class-name\"\u003eAddress\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eBlock\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eBlockWithSenders\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eBytes\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eChainSpec\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eChainSpecBuilder\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eGenesis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eHardfork\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token class-name\"\u003eHeader\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eReceipt\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eSealedBlockWithSenders\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eTransactionSigned\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token constant\"\u003eU256\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003euse\u003c/span\u003e \u003cspan class=\"token namespace\"\u003ereth_provider\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eChain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003euse\u003c/span\u003e \u003cspan class=\"token namespace\"\u003ereth_revm\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token namespace\"\u003edb\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token namespace\"\u003estates\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003ebundle_state\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eBundleRetention\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eBundleState\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token class-name\"\u003eDatabaseCommit\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eStateBuilder\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003euse\u003c/span\u003e \u003cspan class=\"token namespace\"\u003ereth_tracing\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003etracing\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003edebug\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e error\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e info\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003euse\u003c/span\u003e \u003cspan class=\"token namespace\"\u003erusqlite\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eConnection\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003euse\u003c/span\u003e \u003cspan class=\"token namespace\"\u003estd\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003esync\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eArc\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003emod\u003c/span\u003e \u003cspan class=\"token module-declaration namespace\"\u003edb\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token macro property\"\u003esol!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eRollupContract\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"rollup_abi.json\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003euse\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eRollupContrac\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eRollupContractCalls\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eRollupContractEvents\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token constant\"\u003eDATABASE_PATH\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003estr\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"rollup.db\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token constant\"\u003eROLLUP_CONTRACT_ADDRESS\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eAddress\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token macro property\"\u003eaddress!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"74ae65DF20cB0e3BF8c022051d0Cdd79cc60890C\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token constant\"\u003eROLLUP_SUBMITTER_ADDRESS\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eAddress\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token macro property\"\u003eaddress!\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"B01042Db06b04d3677564222010DF5Bd09C5A947\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token constant\"\u003eCHAIN_ID\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eu64\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e17001\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003estatic\u003c/span\u003e \u003cspan class=\"token constant\"\u003eCHAIN_SPEC\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eLazy\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eArc\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eChainSpec\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003e\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eLazy\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token function\"\u003enew\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token closure-params\"\u003e\u003cspan class=\"token closure-punctuation punctuation\"\u003e|\u003c/span\u003e\u003cspan class=\"token closure-punctuation punctuation\"\u003e|\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token class-name\"\u003eArc\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token function\"\u003enew\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n        \u003cspan class=\"token class-name\"\u003eChainSpecBuilder\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token function\"\u003edefault\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003echain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token constant\"\u003eCHAIN_ID\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003einto\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003egenesis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eGenesis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token function\"\u003eclique_genesis\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token constant\"\u003eCHAIN_ID\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token constant\"\u003eROLLUP_SUBMITTER_ADDRESS\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003eshanghai_activated\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ebuild\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003estruct\u003c/span\u003e \u003cspan class=\"token type-definition class-name\"\u003eRollup\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eNode\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eFullNodeComponents\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    ctx\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eExExContext\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eNode\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    db\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eDatabase\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eimpl\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eNode\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eFullNodeComponents\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eRollup\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eNode\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003enew\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ectx\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eExExContext\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eNode\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e connection\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eConnection\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token namespace\"\u003eeyre\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eResult\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eSelf\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e db \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eDatabase\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token function\"\u003enew\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003econnection\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token class-name\"\u003eOk\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eSelf\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e ctx\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e db \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003estart\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eself\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token namespace\"\u003eeyre\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eResult\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token comment\"\u003e// Process all new chain state notifications\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003ewhile\u003c/span\u003e \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eSome\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003enotification\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eself\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ectx\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003enotifications\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003erecv\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eSome\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ereverted_chain\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e notification\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ereverted_chain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"token keyword\"\u003eself\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003erevert\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026amp;\u003c/span\u003ereverted_chain\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n            \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eSome\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecommitted_chain\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e notification\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ecommitted_chain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"token keyword\"\u003eself\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ecommit\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026amp;\u003c/span\u003ecommitted_chain\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n                \u003cspan class=\"token keyword\"\u003eself\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ectx\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eevents\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003esend\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eExExEvent\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eFinishedHeight\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecommitted_chain\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003etip\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003enumber\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"token class-name\"\u003eOk\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"token comment\"\u003e/// Process a new chain commit.\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e///\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e/// This function decodes all transactions to the rollup contract into events, executes the\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e/// corresponding actions and inserts the results into the database.\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003ecommit\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eself\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e chain\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eChain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token namespace\"\u003eeyre\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eResult\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e events \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003edecode_chain_into_rollup_events\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003echain\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e_\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e tx\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e event\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e events \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"token keyword\"\u003ematch\u003c/span\u003e event \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"token comment\"\u003e// A new block is submitted to the rollup contract.\u003c/span\u003e\n                \u003cspan class=\"token comment\"\u003e// The block is executed on top of existing rollup state and committed into the\u003c/span\u003e\n                \u003cspan class=\"token comment\"\u003e// database.\u003c/span\u003e\n                \u003cspan class=\"token class-name\"\u003eRollupContractEvents\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eBlockSubmitted\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e_\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n                    \u003cspan class=\"token comment\"\u003e// ..\u003c/span\u003e\n                \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n                \u003cspan class=\"token comment\"\u003e// A deposit of ETH to the rollup contract. The deposit is added to the recipient's\u003c/span\u003e\n                \u003cspan class=\"token comment\"\u003e// balance and committed into the database.\u003c/span\u003e\n                \u003cspan class=\"token class-name\"\u003eRollupContractEvents\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eEnter\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eRollupContract\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eEnter\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n                    token\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n                    rollupRecipient\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n                    amount\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n                    \u003cspan class=\"token comment\"\u003e// ..\u003c/span\u003e\n                _ \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"token class-name\"\u003eOk\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"token comment\"\u003e/// Process a chain revert.\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e///\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e/// This function decodes all transactions to the rollup contract into events, reverts the\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e/// corresponding actions and updates the database.\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003erevert\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eself\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e chain\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token operator\"\u003e\u0026amp;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eChain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token namespace\"\u003eeyre\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eResult\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emut\u003c/span\u003e events \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003edecode_chain_into_rollup_events\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003echain\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"token comment\"\u003e// Reverse the order of events to start reverting from the tip\u003c/span\u003e\n        events\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ereverse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e_\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e tx\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e event\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e events \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"token keyword\"\u003ematch\u003c/span\u003e event \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"token comment\"\u003e// The block is reverted from the database.\u003c/span\u003e\n                \u003cspan class=\"token class-name\"\u003eRollupContractEvents\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eBlockSubmitted\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e_\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n                    \u003cspan class=\"token comment\"\u003e// ..\u003c/span\u003e\n                \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n                \u003cspan class=\"token comment\"\u003e// The deposit is subtracted from the recipient's balance.\u003c/span\u003e\n                \u003cspan class=\"token class-name\"\u003eRollupContractEvents\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eEnter\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eRollupContract\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eEnter\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n                    token\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n                    rollupRecipient\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n                    amount\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n                \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n                    \u003cspan class=\"token comment\"\u003e// ..\u003c/span\u003e\n                \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n                _ \u003cspan class=\"token operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"token class-name\"\u003eOk\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003efn\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003emain\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e-\u003e\u003c/span\u003e \u003cspan class=\"token namespace\"\u003eeyre\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eResult\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token namespace\"\u003ereth\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003ecli\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eCli\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token function\"\u003eparse_args\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003erun\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token closure-params\"\u003e\u003cspan class=\"token closure-punctuation punctuation\"\u003e|\u003c/span\u003ebuilder\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e _\u003cspan class=\"token closure-punctuation punctuation\"\u003e|\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emove\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e handle \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e builder\n            \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003enode\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eEthereumNode\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token function\"\u003edefault\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003einstall_exex\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"Rollup\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token keyword\"\u003emove\u003c/span\u003e \u003cspan class=\"token closure-params\"\u003e\u003cspan class=\"token closure-punctuation punctuation\"\u003e|\u003c/span\u003ectx\u003cspan class=\"token closure-punctuation punctuation\"\u003e|\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"token keyword\"\u003elet\u003c/span\u003e connection \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eConnection\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token function\"\u003eopen\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token constant\"\u003eDATABASE_PATH\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n                \u003cspan class=\"token class-name\"\u003eOk\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eRollup\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e::\u003c/span\u003e\u003cspan class=\"token function\"\u003enew\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ectx\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e connection\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003estart\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003elaunch\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eawait\u003c/span\u003e\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n        handle\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token function\"\u003ewait_for_node_exit\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token keyword\"\u003eawait\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e"},{"_type":"richTextBlock","_key":"87467b3b24f3","content":[{"style":"h1","_key":"36f444fafc2d","markDefs":[],"asset":null,"children":[{"marks":[],"text":"What can I build with Execution Extensions?","_key":"f0157f7a53320","_type":"span"}],"_type":"block"},{"_type":"block","style":"normal","_key":"61017db4813f","asset":null,"markDefs":[],"children":[{"text":"This question can be reframed as “What can be modeled as a post-execution hook?”. Turns out a lot of things!","_key":"514bf56fc6a00","_type":"span","marks":[]}]},{"markDefs":[],"children":[{"_type":"span","marks":[],"text":"We see a few valuable ExExes that should be built:","_key":"df67f2ec9c410"}],"_type":"block","style":"normal","_key":"da95a1f29e88","asset":null},{"markDefs":[{"_type":"link","href":"https://github.com/ethereum-optimism/kona/tree/main/crates/derive","_key":"40a5cfcd5886"},{"_type":"link","href":"https://github.com/paradigmxyz/alphanet/blob/main/crates/node/src/evm.rs","_key":"82ba7c7ad071"}],"children":[{"_type":"span","marks":[],"text":"Rollup derivation pipelines such as ","_key":"f2f893cdfd7d0"},{"_key":"f2f893cdfd7d1","_type":"span","marks":["40a5cfcd5886"],"text":"Kona"},{"_key":"f2f893cdfd7d2","_type":"span","marks":[],"text":", with EVMs configured for L2 usage, similar to how "},{"_type":"span","marks":["82ba7c7ad071"],"text":"Reth Alphanet’s EVM","_key":"f2f893cdfd7d3"},{"_type":"span","marks":[],"text":" is set up. We also predict that composing L2 ExExes will provide the fastest path towards Stage 2 Rollup decentralization. Expect more from us here. We cannot wait to run OP Mainnet, Base, Zora, and other rollups on Reth as ExExes.","_key":"f2f893cdfd7d4"}],"level":1,"_type":"block","style":"normal","asset":null,"_key":"1b8352c9a95f","listItem":"number"},{"level":1,"_type":"block","style":"normal","_key":"4a9e0e70c145","listItem":"number","markDefs":[],"children":[{"_type":"span","marks":[],"text":"Out of process ExExes tightly integrated with the node’s services using gRPC, paving the way for multi-tenancy and Reth acting as a control plane for off-chain services.","_key":"964866bf0b090"}],"asset":null},{"markDefs":[{"_type":"link","href":"https://github.com/paradigmxyz/artemis","_key":"a07fa394f75f"},{"_type":"link","href":"https://github.com/gakonst/sgx-revm","_key":"e0b2bbda637c"},{"_type":"link","href":"https://shadow.xyz/","_key":"4c9f8e94bde5"}],"children":[{"_type":"span","marks":[],"text":"Alternative VM integrations (e.g. MoveVM or Arbitrum Stylus), or complex execution pipelines similar to ","_key":"4af7a5a310540"},{"_type":"span","marks":["a07fa394f75f"],"text":"Artemis","_key":"4af7a5a310541"},{"_type":"span","marks":[],"text":", ","_key":"4af7a5a310542"},{"_type":"span","marks":["e0b2bbda637c"],"text":"SGX Revm","_key":"4af7a5a310543"},{"_type":"span","marks":[],"text":" or ","_key":"4af7a5a310544"},{"text":"Shadow Logs","_key":"4af7a5a310545","_type":"span","marks":["4c9f8e94bde5"]},{"text":".","_key":"4af7a5a310546","_type":"span","marks":[]}],"asset":null,"level":1,"_type":"block","style":"normal","_key":"3c4b7fda6316","listItem":"number"},{"asset":null,"children":[{"_type":"span","marks":[],"text":"Foundational infrastructure combined with re-staking such as oracles \u0026 bridges, or any other Actively Validated Services (AVS). This is possible because ExExes can peer with each other over Ethereum’s DiscV5 P2P network and have an elected set of participants with write permission to their state other than the node’s 'finalized' notifications.","_key":"e48975b304780"}],"level":1,"_type":"block","style":"normal","_key":"809090037627","listItem":"number","markDefs":[]},{"listItem":"number","markDefs":[],"asset":null,"children":[{"text":"Next-generation auxiliary infrastructure such as AI coprocessors, or decentralized/shared sequencers.","_key":"54e72861985f0","_type":"span","marks":[]}],"level":1,"_type":"block","style":"normal","_key":"f77567ce1ab1"}]},{"_type":"richTextBlock","_key":"c621f3a1c8d5","content":[{"style":"h1","_key":"14c0de1c99ef","asset":null,"markDefs":[],"children":[{"_type":"span","marks":[],"text":"What’s next for Execution Extensions?","_key":"1366e4a93a3a0"}],"_type":"block"},{"style":"normal","_key":"cb7ad3d48fa6","asset":null,"markDefs":[{"_type":"link","href":"https://nullderef.com/series/rust-plugins/","_key":"6f3a074cf252"}],"children":[{"_type":"span","marks":[],"text":"Currently, ExExes need to be installed on the node with a custom build in your main function. We aspire to make ExExes ","_key":"e03ddd3265130"},{"_type":"span","marks":["6f3a074cf252"],"text":"dynamically loaded as plugins","_key":"e03ddd3265131"},{"marks":[],"text":", and expose a Docker Hub-esque ","_key":"e03ddd3265132","_type":"span"},{"_key":"e03ddd3265133","_type":"span","marks":["code"],"text":"reth pull"},{"_key":"e03ddd3265134","_type":"span","marks":[],"text":" API, such that developers can distribute their ExExes over the air to node operators easily."}],"_type":"block"},{"children":[{"text":"We want to make Reth a platform that provides stability \u0026 performance on core node operations, while also being a launchpad for innovation.","_key":"84da5109b6a20","_type":"span","marks":[]}],"_type":"block","style":"normal","asset":null,"_key":"efe22d387d63","markDefs":[]},{"_type":"block","style":"normal","_key":"209f0d4ce9a0","markDefs":[],"children":[{"_type":"span","marks":[],"text":"The Reth project is hopefully going to change how people think about building high performance off-chain infra, and ExExes are just the beginning. We are excited to continue building infrastructure on Reth, and invest in it.","_key":"612425921cab0"}],"asset":null},{"children":[{"_type":"span","marks":[],"text":"Reach out to ","_key":"cd519e56d2490"},{"_type":"span","marks":["958d73053c81"],"text":"georgios@paradigm.xyz","_key":"cd519e56d2491"},{"marks":[],"text":" if you want to build an ExEx project, or ","_key":"cd519e56d2492","_type":"span"},{"_type":"span","marks":["14b849fb4953"],"text":"contribute","_key":"cd519e56d2493"},{"text":" directly on Github.","_key":"cd519e56d2494","_type":"span","marks":[]}],"_type":"block","style":"normal","_key":"da8fe0c32ce9","asset":null,"markDefs":[{"_type":"link","href":"mailto:georgios@paradigm.xyz","_key":"958d73053c81"},{"_type":"link","href":"https://github.com/paradigmxyz/reth/labels/A-exex","_key":"14b849fb4953"}]}]}],"_id":"1d2344ed-f0c4-486e-84c8-2f163c47c29f","title":"Reth Execution Extensions"},"__N_SSG":true},"page":"/[slug]/[postMonth]/[postSlug]","query":{"slug":"2024","postMonth":"05","postSlug":"reth-exex"},"buildId":"l8SbaQQM0om_yyzCyQlj0","isFallback":false,"dynamicIds":[72334,2350],"gsp":true,"scriptLoader":[{"src":"https://www.googletagmanager.com/gtag/js?id=G-1JXQV4JD0S","strategy":"afterInteractive"},{"id":"google-analytics","strategy":"afterInteractive","children":"\n      \t\t\t\twindow.dataLayer = window.dataLayer || [];       \t\t\t\tfunction gtag(){window.dataLayer.push(arguments);}       \t\t\t\tgtag('js', new Date());       \t\t\t\tgtag('config', 'G-1JXQV4JD0S');\n      \t\t\t"}]}</script></body></html>